import{b as N,h as o,e as I,E as A,H as S,i as R,j as U,k as v,l as g,m as h,n as p,U as k,o as x,q as D,u as q,v as m,w,g as F,x as H}from"./BU6uzw8J.js";import{s as L,g as O}from"./CmBQ2XSf.js";function M(e,n,a=!1){o&&I();var s=e,r=null,t=null,f=k,y=a?A:0,l=!1;const E=(c,i=!0)=>{l=!0,b(i,c)},b=(c,i)=>{if(f===(f=c))return;let d=!1;if(o){const T=s.data===S;!!f===T&&(s=R(),U(s),v(!1),d=!0)}f?(r?g(r):i&&(r=h(()=>i(s))),t&&p(t,()=>{t=null})):(t?g(t):i&&(t=h(()=>i(s))),r&&p(r,()=>{r=null})),d&&v(!0)};N(()=>{l=!1,n(E),l||b(null,null)},y),o&&(s=x)}let u=!1,_=Symbol();function P(e,n,a){const s=a[n]??(a[n]={store:null,source:w(void 0),unsubscribe:m});if(s.store!==e&&!(_ in a))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=m;else{var r=!0;s.unsubscribe=L(e,t=>{r?s.source.v=t:H(s.source,t)}),r=!1}return e&&_ in a?O(e):F(s.source)}function Y(e,n){return e.set(n),n}function Z(){const e={};function n(){D(()=>{for(var a in e)e[a].unsubscribe();q(e,_,{enumerable:!1,value:!0})})}return[e,n]}function $(){u=!0}function z(e){var n=u;try{return u=!1,[e(),u]}finally{u=n}}export{P as a,Y as b,z as c,M as i,$ as m,Z as s};
