import{a as he,t as ve,c as Ta}from"../chunks/DskRJORI.js";import{i as Nr}from"../chunks/D2Ra9WD4.js";import{y as vl,z as wl,B as hu,C as qs,l as Mt,K as hs,F as ih,S as oh,L as sh,i as ah,g as me,a5 as lh,a6 as kl,J as ps,m as _r,M as ch,at as qi,a7 as pu,j as mu,a8 as uh,Q as gu,ab as Ks,au as Ma,av as xl,aw as Oa,ax as fh,P as dh,ay as hh,k as ph,az as yu,ao as mh,aA as gh,ad as yh,_ as Sl,A as bh,aB as vh,G as wh,aC as kh,aD as xh,a4 as Sh,aE as Eh,aa as Ch,ac as Th,p as Lt,q as Bt,s as ge,v as le,w as ne,t as qt,o as Ir,aF as Mh,f as Oh}from"../chunks/WbyIxNlm.js";import{d as Ah,i as ri,s as Cn,e as Tn,b as El,f as Nh,a as Ih}from"../chunks/bkfi5rkg.js";import{w as Dh,o as Rh,a as Ph}from"../chunks/BHrh4iRC.js";import{d as Lh,s as Kt}from"../chunks/DqOd8G6C.js";let Cl=!1;function bu(){Cl||(Cl=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Bh(n){var e=hu,t=qs;vl(null),wl(null);try{return n()}finally{vl(e),wl(t)}}function _h(n,e,t,r=t){n.addEventListener(e,()=>Bh(t));const i=n.__on_r;i?n.__on_r=()=>{i(),r(!0)}:n.__on_r=()=>r(!0),bu()}function yn(n,e){return e}function zh(n,e,t,r){for(var i=[],o=e.length,s=0;s<o;s++)fh(e[s].e,i,!0);var a=o>0&&i.length===0&&t!==null;if(a){var l=t.parentNode;dh(l),l.append(t),r.clear(),ln(n,e[0].prev,e[o-1].next)}hh(i,()=>{for(var c=0;c<o;c++){var u=e[c];a||(r.delete(u.k),ln(n,u.prev,u.next)),ph(u.e,!a)}})}function bn(n,e,t,r,i,o=null){var s=n,a={flags:e,items:new Map,first:null},l=(e&yu)!==0;if(l){var c=n;s=Mt?hs(ih(c)):c.appendChild(oh())}Mt&&sh();var u=null,f=!1,d=mh(()=>{var h=t();return bh(h)?h:h==null?[]:gu(h)});ah(()=>{var h=me(d),p=h.length;if(f&&p===0)return;f=p===0;let g=!1;if(Mt){var b=s.data===lh;b!==(p===0)&&(s=kl(),hs(s),ps(!1),g=!0)}if(Mt){for(var k=null,M,D=0;D<p;D++){if(_r.nodeType===8&&_r.data===ch){s=_r,g=!0,ps(!1);break}var v=h[D],S=r(v,D);M=vu(_r,a,k,null,v,S,D,i,e,t),a.items.set(S,M),k=M}p>0&&hs(kl())}if(!Mt){var T=hu;Fh(h,a,s,i,e,(T.f&qi)!==0,r,t)}o!==null&&(p===0?u?pu(u):u=mu(()=>o(s)):u!==null&&uh(u,()=>{u=null})),g&&ps(!0),me(d)}),Mt&&(s=_r)}function Fh(n,e,t,r,i,o,s,a){var ue,oe,ie,pe;var l=(i&gh)!==0,c=(i&(Ma|Oa))!==0,u=n.length,f=e.items,d=e.first,h=d,p,g=null,b,k=[],M=[],D,v,S,T;if(l)for(T=0;T<u;T+=1)D=n[T],v=s(D,T),S=f.get(v),S!==void 0&&((ue=S.a)==null||ue.measure(),(b??(b=new Set)).add(S));for(T=0;T<u;T+=1){if(D=n[T],v=s(D,T),S=f.get(v),S===void 0){var L=h?h.e.nodes_start:t;g=vu(L,e,g,g===null?e.first:g.next,D,v,T,r,i,a),f.set(v,g),k=[],M=[],h=g.next;continue}if(c&&Hh(S,D,T,i),S.e.f&qi&&(pu(S.e),l&&((oe=S.a)==null||oe.unfix(),(b??(b=new Set)).delete(S))),S!==h){if(p!==void 0&&p.has(S)){if(k.length<M.length){var F=M[0],_;g=F.prev;var W=k[0],q=k[k.length-1];for(_=0;_<k.length;_+=1)Tl(k[_],F,t);for(_=0;_<M.length;_+=1)p.delete(M[_]);ln(e,W.prev,q.next),ln(e,g,W),ln(e,q,F),h=F,g=q,T-=1,k=[],M=[]}else p.delete(S),Tl(S,h,t),ln(e,S.prev,S.next),ln(e,S,g===null?e.first:g.next),ln(e,g,S),g=S;continue}for(k=[],M=[];h!==null&&h.k!==v;)(o||!(h.e.f&qi))&&(p??(p=new Set)).add(h),M.push(h),h=h.next;if(h===null)continue;S=h}k.push(S),g=S,h=S.next}if(h!==null||p!==void 0){for(var J=p===void 0?[]:gu(p);h!==null;)(o||!(h.e.f&qi))&&J.push(h),h=h.next;var X=J.length;if(X>0){var fe=i&yu&&u===0?t:null;if(l){for(T=0;T<X;T+=1)(ie=J[T].a)==null||ie.measure();for(T=0;T<X;T+=1)(pe=J[T].a)==null||pe.fix()}zh(e,J,fe,f)}}l&&Ks(()=>{var He;if(b!==void 0)for(S of b)(He=S.a)==null||He.apply()}),qs.first=e.first&&e.first.e,qs.last=g&&g.e}function Hh(n,e,t,r){r&Ma&&xl(n.v,e),r&Oa?xl(n.i,t):n.i=t}function vu(n,e,t,r,i,o,s,a,l,c){var u=(l&Ma)!==0,f=(l&vh)===0,d=u?f?yh(i):Sl(i):i,h=l&Oa?Sl(s):s,p={i:h,v:d,k:o,a:null,e:null,prev:t,next:r};try{return p.e=mu(()=>a(n,d,h,c),Mt),p.e.prev=t&&t.e,p.e.next=r&&r.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function Tl(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,i=e?e.e.nodes_start:t,o=n.e.nodes_start;o!==r;){var s=wh(o);i.before(o),o=s}}function ln(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function $h(n){if(Mt){var e=!1,t=()=>{if(!e){if(e=!0,n.hasAttribute("value")){var r=n.value;ii(n,"value",null),n.value=r}if(n.hasAttribute("checked")){var i=n.checked;ii(n,"checked",null),n.checked=i}}};n.__on_r=t,kh(t),bu()}}function Vh(n,e){var t=n.__attributes??(n.__attributes={});t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function ii(n,e,t,r){var i=n.__attributes??(n.__attributes={});Mt&&(i[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="style"&&"__styles"in n&&(n.__styles={}),e==="loading"&&(n[xh]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Wh(n).includes(e)?n[e]=t:n.setAttribute(e,t))}var Ml=new Map;function Wh(n){var e=Ml.get(n.nodeName);if(e)return e;Ml.set(n.nodeName,e=[]);for(var t,r=n,i=Element.prototype;i!==r;){t=Eh(r);for(var o in t)t[o].set&&e.push(o);r=Sh(r)}return e}const ms=new Set;function jh(n,e,t,r,i=r){var o=t.getAttribute("type")==="checkbox",s=n;let a=!1;if(e!==null)for(var l of e)s=s[l]??(s[l]=[]);s.push(t),_h(t,"change",()=>{var c=t.__value;o&&(c=Ol(s,c,t.checked)),i(c)},()=>i(o?[]:null)),Ch(()=>{var c=r();if(Mt&&t.defaultChecked!==t.checked){a=!0;return}o?(c=c||[],t.checked=c.includes(t.__value)):t.checked=Ah(t.__value,c)}),Th(()=>{var c=s.indexOf(t);c!==-1&&s.splice(c,1)}),ms.has(s)||(ms.add(s),Ks(()=>{s.sort((c,u)=>c.compareDocumentPosition(u)===4?-1:1),ms.delete(s)})),Ks(()=>{if(a){var c;if(o)c=Ol(s,c,t.checked);else{var u=s.find(f=>f.checked);c=u==null?void 0:u.__value}i(c)}})}function Ol(n,e,t){for(var r=new Set,i=0;i<n.length;i+=1)n[i].checked&&r.add(n[i].__value);return t||r.delete(e),Array.from(r)}var Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Di(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wu={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,o){function s(c,u){if(!i[c]){if(!r[c]){var f=typeof Di=="function"&&Di;if(!u&&f)return f(c,!0);if(a)return a(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[c]={exports:{}};r[c][0].call(h.exports,function(p){var g=r[c][1][p];return s(g||p)},h,h.exports,t,r,i,o)}return i[c].exports}for(var a=typeof Di=="function"&&Di,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(t,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,a;if(s){var l=0,c=new s(p),u=o.document.createTextNode("");c.observe(u,{characterData:!0}),a=function(){u.data=l=++l%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var f=new o.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?a=function(){var b=o.document.createElement("script");b.onreadystatechange=function(){p(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},o.document.documentElement.appendChild(b)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var b,k,M=h.length;M;){for(k=h,h=[],b=-1;++b<M;)k[b]();M=h.length}d=!1}r.exports=g;function g(b){h.push(b)===1&&!d&&a()}}).call(this,typeof Ii<"u"?Ii:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,i){var o=t(1);function s(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];r.exports=f;function f(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,S!==s&&g(this,S)}f.prototype.catch=function(S){return this.then(null,S)},f.prototype.then=function(S,T){if(typeof S!="function"&&this.state===c||typeof T!="function"&&this.state===l)return this;var L=new this.constructor(s);if(this.state!==u){var F=this.state===c?S:T;h(L,F,this.outcome)}else this.queue.push(new d(L,S,T));return L};function d(S,T,L){this.promise=S,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof L=="function"&&(this.onRejected=L,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(S){a.resolve(this.promise,S)},d.prototype.otherCallFulfilled=function(S){h(this.promise,this.onFulfilled,S)},d.prototype.callRejected=function(S){a.reject(this.promise,S)},d.prototype.otherCallRejected=function(S){h(this.promise,this.onRejected,S)};function h(S,T,L){o(function(){var F;try{F=T(L)}catch(_){return a.reject(S,_)}F===S?a.reject(S,new TypeError("Cannot resolve promise with itself")):a.resolve(S,F)})}a.resolve=function(S,T){var L=b(p,T);if(L.status==="error")return a.reject(S,L.value);var F=L.value;if(F)g(S,F);else{S.state=c,S.outcome=T;for(var _=-1,W=S.queue.length;++_<W;)S.queue[_].callFulfilled(T)}return S},a.reject=function(S,T){S.state=l,S.outcome=T;for(var L=-1,F=S.queue.length;++L<F;)S.queue[L].callRejected(T);return S};function p(S){var T=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof T=="function")return function(){T.apply(S,arguments)}}function g(S,T){var L=!1;function F(J){L||(L=!0,a.reject(S,J))}function _(J){L||(L=!0,a.resolve(S,J))}function W(){T(_,F)}var q=b(W);q.status==="error"&&F(q.value)}function b(S,T){var L={};try{L.value=S(T),L.status="success"}catch(F){L.status="error",L.value=F}return L}f.resolve=k;function k(S){return S instanceof this?S:a.resolve(new this(s),S)}f.reject=M;function M(S){var T=new this(s);return a.reject(T,S)}f.all=D;function D(S){var T=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=S.length,F=!1;if(!L)return this.resolve([]);for(var _=new Array(L),W=0,q=-1,J=new this(s);++q<L;)X(S[q],q);return J;function X(fe,ue){T.resolve(fe).then(oe,function(ie){F||(F=!0,a.reject(J,ie))});function oe(ie){_[ue]=ie,++W===L&&!F&&(F=!0,a.resolve(J,_))}}}f.race=v;function v(S){var T=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=S.length,F=!1;if(!L)return this.resolve([]);for(var _=-1,W=new this(s);++_<L;)q(S[_]);return W;function q(J){T.resolve(J).then(function(X){F||(F=!0,a.resolve(W,X))},function(X){F||(F=!0,a.reject(W,X))})}}},{1:1}],3:[function(t,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=t(2))}).call(this,typeof Ii<"u"?Ii:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};function s(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function c(){try{if(!l||!l.open)return!1;var m=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),w=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!m||w)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function u(m,w){m=m||[],w=w||{};try{return new Blob(m,w)}catch(x){if(x.name!=="TypeError")throw x;for(var y=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,E=new y,C=0;C<m.length;C+=1)E.append(m[C]);return E.getBlob(w.type)}}typeof Promise>"u"&&t(3);var f=Promise;function d(m,w){w&&m.then(function(y){w(null,y)},function(y){w(y)})}function h(m,w,y){typeof w=="function"&&m.then(w),typeof y=="function"&&m.catch(y)}function p(m){return typeof m!="string"&&(console.warn(m+" used as a key, but it is not a string."),m=String(m)),m}function g(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var b="local-forage-detect-blob-support",k=void 0,M={},D=Object.prototype.toString,v="readonly",S="readwrite";function T(m){for(var w=m.length,y=new ArrayBuffer(w),E=new Uint8Array(y),C=0;C<w;C++)E[C]=m.charCodeAt(C);return y}function L(m){return new f(function(w){var y=m.transaction(b,S),E=u([""]);y.objectStore(b).put(E,"key"),y.onabort=function(C){C.preventDefault(),C.stopPropagation(),w(!1)},y.oncomplete=function(){var C=navigator.userAgent.match(/Chrome\/(\d+)/),x=navigator.userAgent.match(/Edge\//);w(x||!C||parseInt(C[1],10)>=43)}}).catch(function(){return!1})}function F(m){return typeof k=="boolean"?f.resolve(k):L(m).then(function(w){return k=w,k})}function _(m){var w=M[m.name],y={};y.promise=new f(function(E,C){y.resolve=E,y.reject=C}),w.deferredOperations.push(y),w.dbReady?w.dbReady=w.dbReady.then(function(){return y.promise}):w.dbReady=y.promise}function W(m){var w=M[m.name],y=w.deferredOperations.pop();if(y)return y.resolve(),y.promise}function q(m,w){var y=M[m.name],E=y.deferredOperations.pop();if(E)return E.reject(w),E.promise}function J(m,w){return new f(function(y,E){if(M[m.name]=M[m.name]||Ye(),m.db)if(w)_(m),m.db.close();else return y(m.db);var C=[m.name];w&&C.push(m.version);var x=l.open.apply(l,C);w&&(x.onupgradeneeded=function(A){var I=x.result;try{I.createObjectStore(m.storeName),A.oldVersion<=1&&I.createObjectStore(b)}catch(P){if(P.name==="ConstraintError")console.warn('The database "'+m.name+'" has been upgraded from version '+A.oldVersion+" to version "+A.newVersion+', but the storage "'+m.storeName+'" already exists.');else throw P}}),x.onerror=function(A){A.preventDefault(),E(x.error)},x.onsuccess=function(){var A=x.result;A.onversionchange=function(I){I.target.close()},y(A),W(m)}})}function X(m){return J(m,!1)}function fe(m){return J(m,!0)}function ue(m,w){if(!m.db)return!0;var y=!m.db.objectStoreNames.contains(m.storeName),E=m.version<m.db.version,C=m.version>m.db.version;if(E&&(m.version!==w&&console.warn('The database "'+m.name+`" can't be downgraded from version `+m.db.version+" to version "+m.version+"."),m.version=m.db.version),C||y){if(y){var x=m.db.version+1;x>m.version&&(m.version=x)}return!0}return!1}function oe(m){return new f(function(w,y){var E=new FileReader;E.onerror=y,E.onloadend=function(C){var x=btoa(C.target.result||"");w({__local_forage_encoded_blob:!0,data:x,type:m.type})},E.readAsBinaryString(m)})}function ie(m){var w=T(atob(m.data));return u([w],{type:m.type})}function pe(m){return m&&m.__local_forage_encoded_blob}function He(m){var w=this,y=w._initReady().then(function(){var E=M[w._dbInfo.name];if(E&&E.dbReady)return E.dbReady});return h(y,m,m),y}function rt(m){_(m);for(var w=M[m.name],y=w.forages,E=0;E<y.length;E++){var C=y[E];C._dbInfo.db&&(C._dbInfo.db.close(),C._dbInfo.db=null)}return m.db=null,X(m).then(function(x){return m.db=x,ue(m)?fe(m):x}).then(function(x){m.db=w.db=x;for(var A=0;A<y.length;A++)y[A]._dbInfo.db=x}).catch(function(x){throw q(m,x),x})}function Ie(m,w,y,E){E===void 0&&(E=1);try{var C=m.db.transaction(m.storeName,w);y(null,C)}catch(x){if(E>0&&(!m.db||x.name==="InvalidStateError"||x.name==="NotFoundError"))return f.resolve().then(function(){if(!m.db||x.name==="NotFoundError"&&!m.db.objectStoreNames.contains(m.storeName)&&m.version<=m.db.version)return m.db&&(m.version=m.db.version+1),fe(m)}).then(function(){return rt(m).then(function(){Ie(m,w,y,E-1)})}).catch(y);y(x)}}function Ye(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function _t(m){var w=this,y={db:null};if(m)for(var E in m)y[E]=m[E];var C=M[y.name];C||(C=Ye(),M[y.name]=C),C.forages.push(w),w._initReady||(w._initReady=w.ready,w.ready=He);var x=[];function A(){return f.resolve()}for(var I=0;I<C.forages.length;I++){var P=C.forages[I];P!==w&&x.push(P._initReady().catch(A))}var B=C.forages.slice(0);return f.all(x).then(function(){return y.db=C.db,X(y)}).then(function(z){return y.db=z,ue(y,w._defaultConfig.version)?fe(y):z}).then(function(z){y.db=C.db=z,w._dbInfo=y;for(var j=0;j<B.length;j++){var ee=B[j];ee!==w&&(ee._dbInfo.db=y.db,ee._dbInfo.version=y.version)}})}function mt(m,w){var y=this;m=p(m);var E=new f(function(C,x){y.ready().then(function(){Ie(y._dbInfo,v,function(A,I){if(A)return x(A);try{var P=I.objectStore(y._dbInfo.storeName),B=P.get(m);B.onsuccess=function(){var z=B.result;z===void 0&&(z=null),pe(z)&&(z=ie(z)),C(z)},B.onerror=function(){x(B.error)}}catch(z){x(z)}})}).catch(x)});return d(E,w),E}function Xe(m,w){var y=this,E=new f(function(C,x){y.ready().then(function(){Ie(y._dbInfo,v,function(A,I){if(A)return x(A);try{var P=I.objectStore(y._dbInfo.storeName),B=P.openCursor(),z=1;B.onsuccess=function(){var j=B.result;if(j){var ee=j.value;pe(ee)&&(ee=ie(ee));var se=m(ee,j.key,z++);se!==void 0?C(se):j.continue()}else C()},B.onerror=function(){x(B.error)}}catch(j){x(j)}})}).catch(x)});return d(E,w),E}function gt(m,w,y){var E=this;m=p(m);var C=new f(function(x,A){var I;E.ready().then(function(){return I=E._dbInfo,D.call(w)==="[object Blob]"?F(I.db).then(function(P){return P?w:oe(w)}):w}).then(function(P){Ie(E._dbInfo,S,function(B,z){if(B)return A(B);try{var j=z.objectStore(E._dbInfo.storeName);P===null&&(P=void 0);var ee=j.put(P,m);z.oncomplete=function(){P===void 0&&(P=null),x(P)},z.onabort=z.onerror=function(){var se=ee.error?ee.error:ee.transaction.error;A(se)}}catch(se){A(se)}})}).catch(A)});return d(C,y),C}function Yt(m,w){var y=this;m=p(m);var E=new f(function(C,x){y.ready().then(function(){Ie(y._dbInfo,S,function(A,I){if(A)return x(A);try{var P=I.objectStore(y._dbInfo.storeName),B=P.delete(m);I.oncomplete=function(){C()},I.onerror=function(){x(B.error)},I.onabort=function(){var z=B.error?B.error:B.transaction.error;x(z)}}catch(z){x(z)}})}).catch(x)});return d(E,w),E}function yt(m){var w=this,y=new f(function(E,C){w.ready().then(function(){Ie(w._dbInfo,S,function(x,A){if(x)return C(x);try{var I=A.objectStore(w._dbInfo.storeName),P=I.clear();A.oncomplete=function(){E()},A.onabort=A.onerror=function(){var B=P.error?P.error:P.transaction.error;C(B)}}catch(B){C(B)}})}).catch(C)});return d(y,m),y}function Xt(m){var w=this,y=new f(function(E,C){w.ready().then(function(){Ie(w._dbInfo,v,function(x,A){if(x)return C(x);try{var I=A.objectStore(w._dbInfo.storeName),P=I.count();P.onsuccess=function(){E(P.result)},P.onerror=function(){C(P.error)}}catch(B){C(B)}})}).catch(C)});return d(y,m),y}function kt(m,w){var y=this,E=new f(function(C,x){if(m<0){C(null);return}y.ready().then(function(){Ie(y._dbInfo,v,function(A,I){if(A)return x(A);try{var P=I.objectStore(y._dbInfo.storeName),B=!1,z=P.openKeyCursor();z.onsuccess=function(){var j=z.result;if(!j){C(null);return}m===0||B?C(j.key):(B=!0,j.advance(m))},z.onerror=function(){x(z.error)}}catch(j){x(j)}})}).catch(x)});return d(E,w),E}function Qt(m){var w=this,y=new f(function(E,C){w.ready().then(function(){Ie(w._dbInfo,v,function(x,A){if(x)return C(x);try{var I=A.objectStore(w._dbInfo.storeName),P=I.openKeyCursor(),B=[];P.onsuccess=function(){var z=P.result;if(!z){E(B);return}B.push(z.key),z.continue()},P.onerror=function(){C(P.error)}}catch(z){C(z)}})}).catch(C)});return d(y,m),y}function rr(m,w){w=g.apply(this,arguments);var y=this.config();m=typeof m!="function"&&m||{},m.name||(m.name=m.name||y.name,m.storeName=m.storeName||y.storeName);var E=this,C;if(!m.name)C=f.reject("Invalid arguments");else{var x=m.name===y.name&&E._dbInfo.db,A=x?f.resolve(E._dbInfo.db):X(m).then(function(I){var P=M[m.name],B=P.forages;P.db=I;for(var z=0;z<B.length;z++)B[z]._dbInfo.db=I;return I});m.storeName?C=A.then(function(I){if(I.objectStoreNames.contains(m.storeName)){var P=I.version+1;_(m);var B=M[m.name],z=B.forages;I.close();for(var j=0;j<z.length;j++){var ee=z[j];ee._dbInfo.db=null,ee._dbInfo.version=P}var se=new f(function(ae,xe){var ke=l.open(m.name,P);ke.onerror=function(ot){var Br=ke.result;Br.close(),xe(ot)},ke.onupgradeneeded=function(){var ot=ke.result;ot.deleteObjectStore(m.storeName)},ke.onsuccess=function(){var ot=ke.result;ot.close(),ae(ot)}});return se.then(function(ae){B.db=ae;for(var xe=0;xe<z.length;xe++){var ke=z[xe];ke._dbInfo.db=ae,W(ke._dbInfo)}}).catch(function(ae){throw(q(m,ae)||f.resolve()).catch(function(){}),ae})}}):C=A.then(function(I){_(m);var P=M[m.name],B=P.forages;I.close();for(var z=0;z<B.length;z++){var j=B[z];j._dbInfo.db=null}var ee=new f(function(se,ae){var xe=l.deleteDatabase(m.name);xe.onerror=function(){var ke=xe.result;ke&&ke.close(),ae(xe.error)},xe.onblocked=function(){console.warn('dropInstance blocked for database "'+m.name+'" until all open connections are closed')},xe.onsuccess=function(){var ke=xe.result;ke&&ke.close(),se(ke)}});return ee.then(function(se){P.db=se;for(var ae=0;ae<B.length;ae++){var xe=B[ae];W(xe._dbInfo)}}).catch(function(se){throw(q(m,se)||f.resolve()).catch(function(){}),se})})}return d(C,w),C}var In={_driver:"asyncStorage",_initStorage:_t,_support:c(),iterate:Xe,getItem:mt,setItem:gt,removeItem:Yt,clear:yt,length:Xt,key:kt,keys:Qt,dropInstance:rr};function ir(){return typeof openDatabase=="function"}var Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dn="~~local_forage_type~",Zt=/^~~local_forage_type~([^~]+)~/,zt="__lfsc__:",en=zt.length,Ze="arbf",it="blob",tn="si08",xt="ui08",nn="uic8",Rn="si16",Pn="si32",Ln="ur16",Bn="ui32",Ei="fl32",Ci="fl64",Ti=en+Ze.length,Mi=Object.prototype.toString;function Oi(m){var w=m.length*.75,y=m.length,E,C=0,x,A,I,P;m[m.length-1]==="="&&(w--,m[m.length-2]==="="&&w--);var B=new ArrayBuffer(w),z=new Uint8Array(B);for(E=0;E<y;E+=4)x=Qe.indexOf(m[E]),A=Qe.indexOf(m[E+1]),I=Qe.indexOf(m[E+2]),P=Qe.indexOf(m[E+3]),z[C++]=x<<2|A>>4,z[C++]=(A&15)<<4|I>>2,z[C++]=(I&3)<<6|P&63;return B}function O(m){var w=new Uint8Array(m),y="",E;for(E=0;E<w.length;E+=3)y+=Qe[w[E]>>2],y+=Qe[(w[E]&3)<<4|w[E+1]>>4],y+=Qe[(w[E+1]&15)<<2|w[E+2]>>6],y+=Qe[w[E+2]&63];return w.length%3===2?y=y.substring(0,y.length-1)+"=":w.length%3===1&&(y=y.substring(0,y.length-2)+"=="),y}function V(m,w){var y="";if(m&&(y=Mi.call(m)),m&&(y==="[object ArrayBuffer]"||m.buffer&&Mi.call(m.buffer)==="[object ArrayBuffer]")){var E,C=zt;m instanceof ArrayBuffer?(E=m,C+=Ze):(E=m.buffer,y==="[object Int8Array]"?C+=tn:y==="[object Uint8Array]"?C+=xt:y==="[object Uint8ClampedArray]"?C+=nn:y==="[object Int16Array]"?C+=Rn:y==="[object Uint16Array]"?C+=Ln:y==="[object Int32Array]"?C+=Pn:y==="[object Uint32Array]"?C+=Bn:y==="[object Float32Array]"?C+=Ei:y==="[object Float64Array]"?C+=Ci:w(new Error("Failed to get type for BinaryArray"))),w(C+O(E))}else if(y==="[object Blob]"){var x=new FileReader;x.onload=function(){var A=Dn+m.type+"~"+O(this.result);w(zt+it+A)},x.readAsArrayBuffer(m)}else try{w(JSON.stringify(m))}catch(A){console.error("Couldn't convert value into a JSON string: ",m),w(null,A)}}function K(m){if(m.substring(0,en)!==zt)return JSON.parse(m);var w=m.substring(Ti),y=m.substring(en,Ti),E;if(y===it&&Zt.test(w)){var C=w.match(Zt);E=C[1],w=w.substring(C[0].length)}var x=Oi(w);switch(y){case Ze:return x;case it:return u([x],{type:E});case tn:return new Int8Array(x);case xt:return new Uint8Array(x);case nn:return new Uint8ClampedArray(x);case Rn:return new Int16Array(x);case Ln:return new Uint16Array(x);case Pn:return new Int32Array(x);case Bn:return new Uint32Array(x);case Ei:return new Float32Array(x);case Ci:return new Float64Array(x);default:throw new Error("Unkown type: "+y)}}var re={serialize:V,deserialize:K,stringToBuffer:Oi,bufferToString:O};function te(m,w,y,E){m.executeSql("CREATE TABLE IF NOT EXISTS "+w.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],y,E)}function De(m){var w=this,y={db:null};if(m)for(var E in m)y[E]=typeof m[E]!="string"?m[E].toString():m[E];var C=new f(function(x,A){try{y.db=openDatabase(y.name,String(y.version),y.description,y.size)}catch(I){return A(I)}y.db.transaction(function(I){te(I,y,function(){w._dbInfo=y,x()},function(P,B){A(B)})},A)});return y.serializer=re,C}function we(m,w,y,E,C,x){m.executeSql(y,E,C,function(A,I){I.code===I.SYNTAX_ERR?A.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[w.storeName],function(P,B){B.rows.length?x(P,I):te(P,w,function(){P.executeSql(y,E,C,x)},x)},x):x(A,I)},x)}function rn(m,w){var y=this;m=p(m);var E=new f(function(C,x){y.ready().then(function(){var A=y._dbInfo;A.db.transaction(function(I){we(I,A,"SELECT * FROM "+A.storeName+" WHERE key = ? LIMIT 1",[m],function(P,B){var z=B.rows.length?B.rows.item(0).value:null;z&&(z=A.serializer.deserialize(z)),C(z)},function(P,B){x(B)})})}).catch(x)});return d(E,w),E}function Ai(m,w){var y=this,E=new f(function(C,x){y.ready().then(function(){var A=y._dbInfo;A.db.transaction(function(I){we(I,A,"SELECT * FROM "+A.storeName,[],function(P,B){for(var z=B.rows,j=z.length,ee=0;ee<j;ee++){var se=z.item(ee),ae=se.value;if(ae&&(ae=A.serializer.deserialize(ae)),ae=m(ae,se.key,ee+1),ae!==void 0){C(ae);return}}C()},function(P,B){x(B)})})}).catch(x)});return d(E,w),E}function St(m,w,y,E){var C=this;m=p(m);var x=new f(function(A,I){C.ready().then(function(){w===void 0&&(w=null);var P=w,B=C._dbInfo;B.serializer.serialize(w,function(z,j){j?I(j):B.db.transaction(function(ee){we(ee,B,"INSERT OR REPLACE INTO "+B.storeName+" (key, value) VALUES (?, ?)",[m,z],function(){A(P)},function(se,ae){I(ae)})},function(ee){if(ee.code===ee.QUOTA_ERR){if(E>0){A(St.apply(C,[m,P,y,E-1]));return}I(ee)}})})}).catch(I)});return d(x,y),x}function Rr(m,w,y){return St.apply(this,[m,w,y,1])}function or(m,w){var y=this;m=p(m);var E=new f(function(C,x){y.ready().then(function(){var A=y._dbInfo;A.db.transaction(function(I){we(I,A,"DELETE FROM "+A.storeName+" WHERE key = ?",[m],function(){C()},function(P,B){x(B)})})}).catch(x)});return d(E,w),E}function on(m){var w=this,y=new f(function(E,C){w.ready().then(function(){var x=w._dbInfo;x.db.transaction(function(A){we(A,x,"DELETE FROM "+x.storeName,[],function(){E()},function(I,P){C(P)})})}).catch(C)});return d(y,m),y}function ls(m){var w=this,y=new f(function(E,C){w.ready().then(function(){var x=w._dbInfo;x.db.transaction(function(A){we(A,x,"SELECT COUNT(key) as c FROM "+x.storeName,[],function(I,P){var B=P.rows.item(0).c;E(B)},function(I,P){C(P)})})}).catch(C)});return d(y,m),y}function Pr(m,w){var y=this,E=new f(function(C,x){y.ready().then(function(){var A=y._dbInfo;A.db.transaction(function(I){we(I,A,"SELECT key FROM "+A.storeName+" WHERE id = ? LIMIT 1",[m+1],function(P,B){var z=B.rows.length?B.rows.item(0).key:null;C(z)},function(P,B){x(B)})})}).catch(x)});return d(E,w),E}function sr(m){var w=this,y=new f(function(E,C){w.ready().then(function(){var x=w._dbInfo;x.db.transaction(function(A){we(A,x,"SELECT key FROM "+x.storeName,[],function(I,P){for(var B=[],z=0;z<P.rows.length;z++)B.push(P.rows.item(z).key);E(B)},function(I,P){C(P)})})}).catch(C)});return d(y,m),y}function Id(m){return new f(function(w,y){m.transaction(function(E){E.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(C,x){for(var A=[],I=0;I<x.rows.length;I++)A.push(x.rows.item(I).name);w({db:m,storeNames:A})},function(C,x){y(x)})},function(E){y(E)})})}function Dd(m,w){w=g.apply(this,arguments);var y=this.config();m=typeof m!="function"&&m||{},m.name||(m.name=m.name||y.name,m.storeName=m.storeName||y.storeName);var E=this,C;return m.name?C=new f(function(x){var A;m.name===y.name?A=E._dbInfo.db:A=openDatabase(m.name,"","",0),m.storeName?x({db:A,storeNames:[m.storeName]}):x(Id(A))}).then(function(x){return new f(function(A,I){x.db.transaction(function(P){function B(se){return new f(function(ae,xe){P.executeSql("DROP TABLE IF EXISTS "+se,[],function(){ae()},function(ke,ot){xe(ot)})})}for(var z=[],j=0,ee=x.storeNames.length;j<ee;j++)z.push(B(x.storeNames[j]));f.all(z).then(function(){A()}).catch(function(se){I(se)})},function(P){I(P)})})}):C=f.reject("Invalid arguments"),d(C,w),C}var Rd={_driver:"webSQLStorage",_initStorage:De,_support:ir(),iterate:Ai,getItem:rn,setItem:Rr,removeItem:or,clear:on,length:ls,key:Pr,keys:sr,dropInstance:Dd};function Pd(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ml(m,w){var y=m.name+"/";return m.storeName!==w.storeName&&(y+=m.storeName+"/"),y}function Ld(){var m="_localforage_support_test";try{return localStorage.setItem(m,!0),localStorage.removeItem(m),!1}catch{return!0}}function Bd(){return!Ld()||localStorage.length>0}function _d(m){var w=this,y={};if(m)for(var E in m)y[E]=m[E];return y.keyPrefix=ml(m,w._defaultConfig),Bd()?(w._dbInfo=y,y.serializer=re,f.resolve()):f.reject()}function zd(m){var w=this,y=w.ready().then(function(){for(var E=w._dbInfo.keyPrefix,C=localStorage.length-1;C>=0;C--){var x=localStorage.key(C);x.indexOf(E)===0&&localStorage.removeItem(x)}});return d(y,m),y}function Fd(m,w){var y=this;m=p(m);var E=y.ready().then(function(){var C=y._dbInfo,x=localStorage.getItem(C.keyPrefix+m);return x&&(x=C.serializer.deserialize(x)),x});return d(E,w),E}function Hd(m,w){var y=this,E=y.ready().then(function(){for(var C=y._dbInfo,x=C.keyPrefix,A=x.length,I=localStorage.length,P=1,B=0;B<I;B++){var z=localStorage.key(B);if(z.indexOf(x)===0){var j=localStorage.getItem(z);if(j&&(j=C.serializer.deserialize(j)),j=m(j,z.substring(A),P++),j!==void 0)return j}}});return d(E,w),E}function $d(m,w){var y=this,E=y.ready().then(function(){var C=y._dbInfo,x;try{x=localStorage.key(m)}catch{x=null}return x&&(x=x.substring(C.keyPrefix.length)),x});return d(E,w),E}function Vd(m){var w=this,y=w.ready().then(function(){for(var E=w._dbInfo,C=localStorage.length,x=[],A=0;A<C;A++){var I=localStorage.key(A);I.indexOf(E.keyPrefix)===0&&x.push(I.substring(E.keyPrefix.length))}return x});return d(y,m),y}function Wd(m){var w=this,y=w.keys().then(function(E){return E.length});return d(y,m),y}function jd(m,w){var y=this;m=p(m);var E=y.ready().then(function(){var C=y._dbInfo;localStorage.removeItem(C.keyPrefix+m)});return d(E,w),E}function Ud(m,w,y){var E=this;m=p(m);var C=E.ready().then(function(){w===void 0&&(w=null);var x=w;return new f(function(A,I){var P=E._dbInfo;P.serializer.serialize(w,function(B,z){if(z)I(z);else try{localStorage.setItem(P.keyPrefix+m,B),A(x)}catch(j){(j.name==="QuotaExceededError"||j.name==="NS_ERROR_DOM_QUOTA_REACHED")&&I(j),I(j)}})})});return d(C,y),C}function qd(m,w){if(w=g.apply(this,arguments),m=typeof m!="function"&&m||{},!m.name){var y=this.config();m.name=m.name||y.name,m.storeName=m.storeName||y.storeName}var E=this,C;return m.name?C=new f(function(x){m.storeName?x(ml(m,E._defaultConfig)):x(m.name+"/")}).then(function(x){for(var A=localStorage.length-1;A>=0;A--){var I=localStorage.key(A);I.indexOf(x)===0&&localStorage.removeItem(I)}}):C=f.reject("Invalid arguments"),d(C,w),C}var Kd={_driver:"localStorageWrapper",_initStorage:_d,_support:Pd(),iterate:Hd,getItem:Fd,setItem:Ud,removeItem:jd,clear:zd,length:Wd,key:$d,keys:Vd,dropInstance:qd},Jd=function(w,y){return w===y||typeof w=="number"&&typeof y=="number"&&isNaN(w)&&isNaN(y)},Gd=function(w,y){for(var E=w.length,C=0;C<E;){if(Jd(w[C],y))return!0;C++}return!1},gl=Array.isArray||function(m){return Object.prototype.toString.call(m)==="[object Array]"},Lr={},yl={},ar={INDEXEDDB:In,WEBSQL:Rd,LOCALSTORAGE:Kd},Yd=[ar.INDEXEDDB._driver,ar.WEBSQL._driver,ar.LOCALSTORAGE._driver],Ni=["dropInstance"],cs=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ni),Xd={description:"",driver:Yd.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Qd(m,w){m[w]=function(){var y=arguments;return m.ready().then(function(){return m[w].apply(m,y)})}}function us(){for(var m=1;m<arguments.length;m++){var w=arguments[m];if(w)for(var y in w)w.hasOwnProperty(y)&&(gl(w[y])?arguments[0][y]=w[y].slice():arguments[0][y]=w[y])}return arguments[0]}var Zd=function(){function m(w){s(this,m);for(var y in ar)if(ar.hasOwnProperty(y)){var E=ar[y],C=E._driver;this[y]=C,Lr[C]||this.defineDriver(E)}this._defaultConfig=us({},Xd),this._config=us({},this._defaultConfig,w),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return m.prototype.config=function(y){if((typeof y>"u"?"undefined":o(y))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var E in y){if(E==="storeName"&&(y[E]=y[E].replace(/\W/g,"_")),E==="version"&&typeof y[E]!="number")return new Error("Database version must be a number.");this._config[E]=y[E]}return"driver"in y&&y.driver?this.setDriver(this._config.driver):!0}else return typeof y=="string"?this._config[y]:this._config},m.prototype.defineDriver=function(y,E,C){var x=new f(function(A,I){try{var P=y._driver,B=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!y._driver){I(B);return}for(var z=cs.concat("_initStorage"),j=0,ee=z.length;j<ee;j++){var se=z[j],ae=!Gd(Ni,se);if((ae||y[se])&&typeof y[se]!="function"){I(B);return}}var xe=function(){for(var Br=function(nh){return function(){var rh=new Error("Method "+nh+" is not implemented by the current driver"),bl=f.reject(rh);return d(bl,arguments[arguments.length-1]),bl}},fs=0,th=Ni.length;fs<th;fs++){var ds=Ni[fs];y[ds]||(y[ds]=Br(ds))}};xe();var ke=function(Br){Lr[P]&&console.info("Redefining LocalForage driver: "+P),Lr[P]=y,yl[P]=Br,A()};"_support"in y?y._support&&typeof y._support=="function"?y._support().then(ke,I):ke(!!y._support):ke(!0)}catch(ot){I(ot)}});return h(x,E,C),x},m.prototype.driver=function(){return this._driver||null},m.prototype.getDriver=function(y,E,C){var x=Lr[y]?f.resolve(Lr[y]):f.reject(new Error("Driver not found."));return h(x,E,C),x},m.prototype.getSerializer=function(y){var E=f.resolve(re);return h(E,y),E},m.prototype.ready=function(y){var E=this,C=E._driverSet.then(function(){return E._ready===null&&(E._ready=E._initDriver()),E._ready});return h(C,y,y),C},m.prototype.setDriver=function(y,E,C){var x=this;gl(y)||(y=[y]);var A=this._getSupportedDrivers(y);function I(){x._config.driver=x.driver()}function P(j){return x._extend(j),I(),x._ready=x._initStorage(x._config),x._ready}function B(j){return function(){var ee=0;function se(){for(;ee<j.length;){var ae=j[ee];return ee++,x._dbInfo=null,x._ready=null,x.getDriver(ae).then(P).catch(se)}I();var xe=new Error("No available storage method found.");return x._driverSet=f.reject(xe),x._driverSet}return se()}}var z=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=z.then(function(){var j=A[0];return x._dbInfo=null,x._ready=null,x.getDriver(j).then(function(ee){x._driver=ee._driver,I(),x._wrapLibraryMethodsWithReady(),x._initDriver=B(A)})}).catch(function(){I();var j=new Error("No available storage method found.");return x._driverSet=f.reject(j),x._driverSet}),h(this._driverSet,E,C),this._driverSet},m.prototype.supports=function(y){return!!yl[y]},m.prototype._extend=function(y){us(this,y)},m.prototype._getSupportedDrivers=function(y){for(var E=[],C=0,x=y.length;C<x;C++){var A=y[C];this.supports(A)&&E.push(A)}return E},m.prototype._wrapLibraryMethodsWithReady=function(){for(var y=0,E=cs.length;y<E;y++)Qd(this,cs[y])},m.prototype.createInstance=function(y){return new m(y)},m}(),eh=new Zd;r.exports=eh},{3:3}]},{},[4])(4)})})(wu);var qh=wu.exports;const Kh=Uh(qh),Ri=Kh.createInstance({name:"workshop",storeName:"wizard"});function tr(n,e){const{subscribe:t,set:r,update:i}=Dh(e);return Ri.getItem(n).then(o=>{o!==null&&r(o)}).catch(console.error),{subscribe:t,set:o=>{Ri.setItem(n,o).then(()=>r(o)).catch(console.error)},update:o=>{i(s=>{const a=o(s);return Ri.setItem(n,a).catch(console.error),a})},remove:()=>{Ri.removeItem(n).then(()=>r(e)).catch(console.error)}}}function Jh(n,e,t){e.navigate(t()-1)}function Gh(n,e,t){e.navigate(t()+1)}var Yh=ve('<button type="button" class="back">Back</button>'),Xh=ve('<button type="button" class="next">Next</button>'),Qh=ve("<nav><!> <!></nav>");function Zh(n,e){Lt(e,!0);const[t,r]=Cn(),i=()=>Tn(e.currentStep,"$currentStep",t);function o(){return i()===1}function s(){return i()===e.steps.length}var a=Qh(),l=le(a);{var c=d=>{var h=Yh();h.__click=[Jh,e,i],he(d,h)};ri(l,d=>{o()||d(c)})}var u=ge(l,2);{var f=d=>{var h=Xh();h.__click=[Gh,e,i],he(d,h)};ri(u,d=>{s()||d(f)})}ne(a),he(n,a),Bt(),r()}Lh(["click"]);var ep=ve("<progress></progress>");function tp(n,e){Lt(e,!0);const[t,r]=Cn(),i=()=>Tn(e.currentStep,"$currentStep",t);var o=ep();qt(()=>{Vh(o,i()),ii(o,"max",e.steps.length)}),he(n,o),Bt(),r()}function Re(n){this.content=n}Re.prototype={constructor:Re,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new Re(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Re(t)},addToStart:function(n,e){return new Re([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Re(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new Re(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Re.from(n),n.size?new Re(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Re.from(n),n.size?new Re(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Re.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Re.from=function(n){if(n instanceof Re)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Re(e)};function ku(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)t++;return t}if(i.content.size||o.content.size){let s=ku(i.content,o.content,t+1);if(s!=null)return s}t+=i.nodeSize}}function xu(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let s=n.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){t-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:t,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(s.content.size||a.content.size){let c=xu(s.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}class N{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let s=0,a=0;a<t;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",s=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new N(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),r.push(a),i+=a.nodeSize),s=l}return new N(r,i)}cutByIndex(e,t){return e==t?N.empty:e==0&&t==this.content.length?this:new N(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new N(i,o)}addToStart(e){return new N([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new N(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return ku(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return xu(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Pi(0,e);if(e==this.size)return Pi(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||t>0?Pi(r+1,s):Pi(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return N.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new N(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return N.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new N(t||e,r)}static from(e){if(!e)return N.empty;if(e instanceof N)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new N([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}N.empty=new N([],0);const gs={index:0,offset:0};function Pi(n,e){return gs.index=n,gs.offset=e,gs}function eo(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!eo(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!eo(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let ce=class Js{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&eo(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Js.none;if(e instanceof Js)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};ce.none=[];class to extends Error{}class H{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Eu(this.content,e+this.openStart,t);return r&&new H(r,this.openStart,this.openEnd)}removeBetween(e,t){return new H(Su(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return H.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new H(N.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new H(e,r,i)}}H.empty=new H(N.empty,0,0);function Su(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:s,offset:a}=n.findIndex(t);if(i==e||o.isText){if(a!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(Su(o.content,e-i-1,t-i-1)))}function Eu(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),s=n.maybeChild(i);if(o==e||s.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=Eu(s.content,e-o-1,t);return a&&n.replaceChild(i,s.copy(a))}function np(n,e,t){if(t.openStart>n.depth)throw new to("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new to("Inconsistent open depths");return Cu(n,e,t,0)}function Cu(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let s=Cu(n,e,t,r+1);return o.copy(o.content.replaceChild(i,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let s=n.parent,a=s.content;return Un(s,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=rp(t,n);return Un(o,Mu(n,s,a,e,r))}else return Un(o,no(n,e,r))}function Tu(n,e){if(!e.type.compatibleContent(n.type))throw new to("Cannot join "+e.type.name+" onto "+n.type.name)}function Gs(n,e,t){let r=n.node(t);return Tu(r,e.node(t)),r}function jn(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Ur(n,e,t,r){let i=(e||n).node(t),o=0,s=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(jn(n.nodeAfter,r),o++));for(let a=o;a<s;a++)jn(i.child(a),r);e&&e.depth==t&&e.textOffset&&jn(e.nodeBefore,r)}function Un(n,e){return n.type.checkContent(e),n.copy(e)}function Mu(n,e,t,r,i){let o=n.depth>i&&Gs(n,e,i+1),s=r.depth>i&&Gs(t,r,i+1),a=[];return Ur(null,n,i,a),o&&s&&e.index(i)==t.index(i)?(Tu(o,s),jn(Un(o,Mu(n,e,t,r,i+1)),a)):(o&&jn(Un(o,no(n,e,i+1)),a),Ur(e,t,i,a),s&&jn(Un(s,no(t,r,i+1)),a)),Ur(r,null,i,a),new N(a)}function no(n,e,t){let r=[];if(Ur(null,n,t,r),n.depth>t){let i=Gs(n,e,t+1);jn(Un(i,no(n,e,t+1)),r)}return Ur(e,null,t,r),new N(r)}function rp(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(N.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class oi{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return ce.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new ro(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new oi(t,r,o)}static resolveCached(e,t){let r=Al.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==t)return s}else Al.set(e,r=new ip);let i=r.elts[r.i]=oi.resolve(e,t);return r.i=(r.i+1)%op,i}}class ip{constructor(){this.elts=[],this.i=0}}const op=12,Al=new WeakMap;class ro{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const sp=Object.create(null);let vn=class Ys{constructor(e,t,r,i=ce.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||N.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&eo(this.attrs,t||e.defaultAttrs||sp)&&ce.sameSet(this.marks,r||ce.none)}copy(e=null){return e==this.content?this:new Ys(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ys(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return H.empty;let i=this.resolve(e),o=this.resolve(t),s=r?0:i.sharedDepth(t),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new H(c,i.depth-s,o.depth-s)}replace(e,t,r){return np(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return oi.resolveCached(this,e)}resolveNoCache(e){return oi.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Ou(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=N.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ce.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ce.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=N.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};vn.prototype.text=void 0;class io extends vn{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ou(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new io(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new io(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Ou(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Yn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new ap(e,t);if(r.next==null)return Yn.empty;let i=Au(r);r.next&&r.err("Unexpected trailing text");let o=pp(hp(i));return mp(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!t||l.validEnd))return N.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:f}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,a.concat(u));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}Yn.empty=new Yn(!0);class ap{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Au(n){let e=[];do e.push(lp(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function lp(n){let e=[];do e.push(cp(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function cp(n){let e=dp(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=up(n,e);else break;return e}function Nl(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function up(n,e){let t=Nl(n),r=t;return n.eat(",")&&(n.next!="}"?r=Nl(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function fp(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let s=t[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function dp(n){if(n.eat("(")){let e=Au(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=fp(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function hp(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=t())}else if(s.type=="star"){let l=t();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=t();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=t();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=t();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Nu(n,e){return e-n}function Il(n,e){let t=[];return r(e),t.sort(Nu);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&t.indexOf(l)==-1&&r(l)}}}function pp(n){let e=Object.create(null);return t(Il(n,0));function t(r){let i=[];r.forEach(s=>{n[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);Il(n,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new Yn(r.indexOf(n.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(Nu);o.next.push({type:i[s][0],next:e[a.join(",")]||t(a)})}return o}}function mp(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Iu(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Du(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function Ru(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(e[i])}}function Pu(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new yp(n,r,e[r]);return t}let Dl=class Lu{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Pu(e,r.attrs),this.defaultAttrs=Iu(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Yn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Du(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new vn(this,this.computeAttrs(e),N.from(t),ce.setFrom(r))}createChecked(e=null,t,r){return t=N.from(t),this.checkContent(t),new vn(this,this.computeAttrs(e),t,ce.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=N.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(N.empty,!0);return o?new vn(this,e,t.append(o),ce.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Ru(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:ce.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,s)=>r[o]=new Lu(o,t,s));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function gp(n,e,t){let r=t.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class yp{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?gp(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Wo{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=Pu(e,i.attrs),this.excluded=null;let o=Iu(this.attrs);this.instance=o?new ce(this,o):null}create(e=null){return!e&&this.instance?this.instance:new ce(this,Du(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Wo(o,i++,t,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Ru(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Bu{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Re.from(e.nodes),t.marks=Re.from(e.marks||{}),this.nodes=Dl.compile(this.spec.nodes,this),this.marks=Wo.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=Yn.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?Rl(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Rl(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Dl){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new io(r,r.defaultAttrs,e,ce.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return vn.fromJSON(this,e)}markFromJSON(e){return ce.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Rl(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],s=o;if(o)t.push(o);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function bp(n){return n.tag!=null}function vp(n){return n.style!=null}class wn{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(bp(i))this.tags.push(i);else if(vp(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new Ll(this,t,!1);return r.addAll(e,ce.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Ll(this,t,!0);return r.addAll(e,ce.none,t.from,t.to),H.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(xp(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(s.getAttrs){let l=s.getAttrs(t);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<t.length;s++){let a=t[s];if((a.priority==null?50:a.priority)<o)break}t.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Bl(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Bl(s)),s.node||s.ignore||s.mark||(s.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new wn(e,wn.schemaRules(e)))}}const _u={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wp={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},zu={ol:!0,ul:!0},si=1,Xs=2,Ki=4;function Pl(n,e,t){return e!=null?(e?si:0)|(e==="full"?Xs:0):n&&n.whitespace=="pre"?si|Xs:t&-5}class Li{constructor(e,t,r,i,o,s){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=ce.none,this.match=o||(s&Ki?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(N.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&si)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=N.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(N.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!_u.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ll{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,o,s=Pl(null,t.preserveWhitespace,0)|(r?Ki:0);i?o=new Li(i.type,i.attrs,ce.none,!0,t.topMatch||i.type.contentMatch,s):r?o=new Li(null,null,ce.none,!0,null,s):o=new Li(e.schema.topNodeType,null,ce.none,!0,null,s),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,o=i.options&Xs?"full":this.localPreserveWS||(i.options&si)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;zu.hasOwnProperty(s)&&this.parser.normalizeLists&&kp(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:wp.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(_u.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let f=l&&l.skip?t:this.readStyles(e,t);f&&this.addAll(e,f),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,t);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,r,i){let o,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(s,t.attrs||null,r,t.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[t.mark];r=r.concat(l.create(t.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}o&&this.sync(a)&&this.open--}addAll(e,t,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,t);this.findAtPoint(e,o)}findPlace(e,t){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],a=s.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,i=s,!a.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)t=this.enterInner(r[o],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=ce.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):_l(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let o=this.findPlace(e.create(t),r);return o&&(o=this.enterInner(e,t,r,!0,i)),o}enterInner(e,t,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=Pl(e,o,s.options);s.options&Ki&&s.content.length==0&&(a|=Ki);let l=ce.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):_l(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Li(e,t,l,i,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=si)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function kp(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&zu.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function xp(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Bl(n){let e={};for(let t in n)e[t]=n[t];return e}function _l(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class nr{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=ys(t).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,t);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Ji(ys(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Ji(ys(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Ji(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new nr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=zl(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return zl(e.marks)}}function zl(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function ys(n){return n.document||window.document}const Fl=new WeakMap;function Sp(n){let e=Fl.get(n);return e===void 0&&Fl.set(n,e=Ep(n)),e}function Ep(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Ji(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=Sp(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(t=i.slice(0,s),i=i.slice(s+1));let a,l=t?n.createElementNS(t,i):n.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let d=f.indexOf(" ");d>0?l.setAttributeNS(f.slice(0,d),f.slice(d+1),c[f]):l.setAttribute(f,c[f])}}for(let f=u;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=Ji(n,d,t,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const Fu=65535,Hu=Math.pow(2,16);function Cp(n,e){return n+e*Hu}function Hl(n){return n&Fu}function Tp(n){return(n-(n&Fu))/Hu}const $u=1,Vu=2,Gi=4,Wu=8;class Qs{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Wu)>0}get deletedBefore(){return(this.delInfo&($u|Gi))>0}get deletedAfter(){return(this.delInfo&(Vu|Gi))>0}get deletedAcross(){return(this.delInfo&Gi)>0}}class et{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&et.empty)return et.empty}recover(e){let t=0,r=Hl(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Tp(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+s],f=l+c;if(e<=f){let d=c?e==l?-1:e==f?1:t:t,h=l+i+(d<0?0:u);if(r)return h;let p=e==(t<0?l:f)?null:Cp(a/3,e-l),g=e==l?Vu:e==f?$u:Gi;return(t<0?e!=l:e!=f)&&(g|=Wu),new Qs(h,g,p)}i+=u-c}return r?e+i:new Qs(e+i,0,null)}touches(e,t){let r=0,i=Hl(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+t],u=this.ranges[i+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new et(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?et.empty:new et(e<0?[0,-e,0]:[0,0,e])}}et.empty=new et([]);class gr{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new gr(this.maps,this.mirror,e,t)}copy(){return new gr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new gr;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Qs(e,i,null)}}const bs=Object.create(null);class Fe{getMap(){return et.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=bs[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in bs)throw new RangeError("Duplicate use of step JSON ID "+e);return bs[e]=t,t.prototype.jsonID=e,t}}class Ee{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Ee(e,null)}static fail(e){return new Ee(null,e)}static fromReplace(e,t,r,i){try{return Ee.ok(e.replace(t,r,i))}catch(o){if(o instanceof to)return Ee.fail(o.message);throw o}}}function Aa(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(Aa(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return N.fromArray(r)}class pn extends Fe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new H(Aa(t.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return Ee.fromReplace(e,this.from,this.to,o)}invert(){return new At(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new pn(t.pos,r.pos,this.mark)}merge(e){return e instanceof pn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new pn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new pn(t.from,t.to,e.markFromJSON(t.mark))}}Fe.jsonID("addMark",pn);class At extends Fe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new H(Aa(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Ee.fromReplace(e,this.from,this.to,r)}invert(){return new pn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new At(t.pos,r.pos,this.mark)}merge(e){return e instanceof At&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new At(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new At(t.from,t.to,e.markFromJSON(t.mark))}}Fe.jsonID("removeMark",At);class mn extends Fe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ee.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Ee.fromReplace(e,this.pos,this.pos+1,new H(N.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new mn(this.pos,t.marks[i]);return new mn(this.pos,this.mark)}}return new wr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new mn(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new mn(t.pos,e.markFromJSON(t.mark))}}Fe.jsonID("addNodeMark",mn);class wr extends Fe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ee.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Ee.fromReplace(e,this.pos,this.pos+1,new H(N.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new mn(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new wr(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new wr(t.pos,e.markFromJSON(t.mark))}}Fe.jsonID("removeNodeMark",wr);class Te extends Fe{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Zs(e,this.from,this.to)?Ee.fail("Structure replace would overwrite content"):Ee.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new et([this.from,this.to-this.from,this.slice.size])}invert(e){return new Te(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Te(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Te)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?H.empty:new H(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Te(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?H.empty:new H(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Te(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Te(t.from,t.to,H.fromJSON(e,t.slice),!!t.structure)}}Fe.jsonID("replace",Te);class Me extends Fe{constructor(e,t,r,i,o,s,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(Zs(e,this.from,this.gapFrom)||Zs(e,this.gapTo,this.to)))return Ee.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Ee.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Ee.fromReplace(e,this.from,this.to,r):Ee.fail("Content does not fit in gap")}getMap(){return new et([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Me(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new Me(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Me(t.from,t.to,t.gapFrom,t.gapTo,H.fromJSON(e,t.slice),t.insert,!!t.structure)}}Fe.jsonID("replaceAround",Me);function Zs(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Mp(n,e,t,r){let i=[],o=[],s,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),h=Math.min(c+l.nodeSize,t),p=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(p)||(s&&s.to==d&&s.mark.eq(f[g])?s.to=h:i.push(s=new At(d,h,f[g])));a&&a.to==d?a.to=h:o.push(a=new pn(d,h,r))}}),i.forEach(l=>n.step(l)),o.forEach(l=>n.step(l))}function Op(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof Wo){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,t);for(let u=0;u<l.length;u++){let f=l[u],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=c,d.step=o):i.push({style:f,from:Math.max(a,e),to:c,step:o})}}}),i.forEach(s=>n.step(new At(s.from,s.to,s.style)))}function Na(n,e,t,r=t.contentMatch,i=!0){let o=n.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,f=r.matchType(c.type);if(!f)s.push(new Te(a,u,H.empty));else{r=f;for(let d=0;d<c.marks.length;d++)t.allowsMarkType(c.marks[d].type)||n.step(new At(a,u,c.marks[d]));if(i&&c.isText&&t.whitespace!="pre"){let d,h=/\r?\n|\r/g,p;for(;d=h.exec(c.text);)p||(p=new H(N.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),s.push(new Te(a+d.index,a+d.index+d[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(N.empty,!0);n.replace(a,a,new H(l,0,0))}for(let l=s.length-1;l>=0;l--)n.step(s[l])}function Ap(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Dr(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,s,t))return r;if(r==0||i.type.spec.isolating||!Ap(i,o,s))break}return null}function Np(n,e,t){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=N.empty,f=0;for(let p=o,g=!1;p>t;p--)g||r.index(p)>0?(g=!0,u=N.from(r.node(p).copy(u)),f++):l--;let d=N.empty,h=0;for(let p=o,g=!1;p>t;p--)g||i.after(p+1)<i.end(p)?(g=!0,d=N.from(i.node(p).copy(d)),h++):c++;n.step(new Me(l,c,s,a,new H(u.append(d),f,h),u.size-f,!0))}function Ia(n,e,t=null,r=n){let i=Ip(n,e),o=i&&Dp(r,e);return o?i.map($l).concat({type:e,attrs:t}).concat(o.map($l)):null}function $l(n){return{type:n,attrs:null}}function Ip(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return t.canReplaceWith(r,i,s)?o:null}function Dp(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:s}function Rp(n,e,t){let r=N.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let a=t[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=N.from(t[s].type.create(t[s].attrs,r))}let i=e.start,o=e.end;n.step(new Me(i,o,i,o,new H(r,0,0),t.length,!0))}function Pp(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(s,a)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,l)&&Lp(n.doc,n.mapping.slice(o).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?c=!1:!h&&p&&(c=!0)}c===!1&&Uu(n,s,a,o),Na(n,n.mapping.slice(o).map(a,1),r,void 0,c===null);let u=n.mapping.slice(o),f=u.map(a,1),d=u.map(a+s.nodeSize,1);return n.step(new Me(f,d,f+1,d-1,new H(N.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&ju(n,s,a,o),!1}})}function ju(n,e,t,r){e.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let l=n.mapping.slice(r).map(t+1+o+s.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Uu(n,e,t,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=n.mapping.slice(r).map(t+1+o);n.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function Lp(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function Bp(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let s=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Me(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new H(N.from(s),0,0),1,!0))}function yr(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=t-2;c>o;c--,u--){let f=i.node(c),d=i.index(c);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[u]||f;if(!f.canReplace(d+1,f.childCount)||!g.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function _p(n,e,t=1,r){let i=n.doc.resolve(e),o=N.empty,s=N.empty;for(let a=i.depth,l=i.depth-t,c=t-1;a>l;a--,c--){o=N.from(i.node(a).copy(o));let u=r&&r[c];s=N.from(u?u.type.create(u.attrs,s):i.node(a).copy(s))}n.step(new Te(e,e,new H(o.append(s),t,t),!0))}function Mn(n,e){let t=n.resolve(e),r=t.index();return qu(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function zp(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(s),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function qu(n,e){return!!(n&&e&&!n.isLeaf&&zp(n,e))}function jo(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):t>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&qu(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function Fp(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,o=n.doc.resolve(e-t),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);u&&!f?r=!1:!u&&f&&(r=!0)}let a=n.steps.length;if(r===!1){let u=n.doc.resolve(e+t);Uu(n,u.node(),u.before(),a)}s.inlineContent&&Na(n,e+t-1,s,o.node().contentMatchAt(o.index()),r==null);let l=n.mapping.slice(a),c=l.map(e-t);if(n.step(new Te(c,l.map(e+t,-1),H.empty,!0)),r===!0){let u=n.doc.resolve(c);ju(n,u.node(),u.before(),n.steps.length)}return n}function Hp(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Ku(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let f=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function Uo(n,e,t=e,r=H.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return Ju(i,o,r)?new Te(e,t,r):new $p(i,o,r).fit()}function Ju(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class $p{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=N.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=N.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new H(o,s,a);return e>-1?new Me(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new Te(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=vs(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(t==1&&(s?c.matchType(s.type)||(f=c.fillBefore(N.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:f};if(t==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=vs(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new H(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=vs(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new H($r(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new H($r(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:f,type:d}=this.frontier[t];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));f=f.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let g=a.child(c),b=f.matchType(g.type);if(!b)break;c++,(c>1||l==0||g.content.size)&&(f=b,u.push(Gu(g.mark(d.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=Vr(this.placed,t,N.from(u)),this.frontier[t].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,b=a;g<h;g++){let k=b.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),b=k.content}this.unplaced=p?e==0?H.empty:new H($r(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new H($r(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!ws(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=ws(e,t,i,r,o);if(s){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=ws(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Vr(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Vr(this.placed,this.depth,N.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(N.empty,!0);t.childCount&&(this.placed=Vr(this.placed,this.frontier.length,t))}}function $r(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy($r(n.firstChild.content,e-1,t)))}function Vr(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Vr(n.lastChild.content,e-1,t)))}function vs(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Gu(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Gu(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(N.empty,!0)))),n.copy(r)}function ws(n,e,t,r,i){let o=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!Vp(t,o.content,s)?a:null}function Vp(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function Wp(n){return n.spec.defining||n.spec.definingForContent}function jp(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(Ju(i,o,r))return n.step(new Te(e,t,r));let s=Xu(i,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(d)>-1?a=d:i.before(d)==h&&s.splice(1,0,-d)}let l=s.indexOf(a),c=[],u=r.openStart;for(let d=r.content,h=0;;h++){let p=d.firstChild;if(c.push(p),h==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let h=c[d],p=Wp(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))u=d;else if(p||!h.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+u+1)%(r.openStart+1),p=c[h];if(p)for(let g=0;g<s.length;g++){let b=s[(g+l)%s.length],k=!0;b<0&&(k=!1,b=-b);let M=i.node(b-1),D=i.index(b-1);if(M.canReplaceWith(D,D,p.type,p.marks))return n.replace(i.before(b),k?o.after(b):t,new H(Yu(r.content,0,r.openStart,h),h,r.openEnd))}}let f=n.steps.length;for(let d=s.length-1;d>=0&&(n.replace(e,t,r),!(n.steps.length>f));d--){let h=s[d];h<0||(e=i.before(h),t=o.after(h))}}function Yu(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(Yu(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(n).append(n);n=s.append(o.matchFragment(s).fillBefore(N.empty,!0))}return n}function Up(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=Hp(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new H(N.from(r),0,0))}function qp(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=Xu(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&i.end(s)-t!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return n.delete(r.before(s),t);n.delete(e,t)}function Xu(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class br extends Fe{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ee.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Ee.fromReplace(e,this.pos,this.pos+1,new H(N.from(i),0,t.isLeaf?0:1))}getMap(){return et.empty}invert(e){return new br(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new br(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new br(t.pos,t.attr,t.value)}}Fe.jsonID("attr",br);class ai extends Fe{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Ee.ok(r)}getMap(){return et.empty}invert(e){return new ai(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ai(t.attr,t.value)}}Fe.jsonID("docAttr",ai);let kr=class extends Error{};kr=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};kr.prototype=Object.create(Error.prototype);kr.prototype.constructor=kr;kr.prototype.name="TransformError";class Qu{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new gr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new kr(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=H.empty){let i=Uo(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new H(N.from(r),0,0))}delete(e,t){return this.replace(e,t,H.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return jp(this,e,t,r),this}replaceRangeWith(e,t,r){return Up(this,e,t,r),this}deleteRange(e,t){return qp(this,e,t),this}lift(e,t){return Np(this,e,t),this}join(e,t=1){return Fp(this,e,t),this}wrap(e,t){return Rp(this,e,t),this}setBlockType(e,t=e,r,i=null){return Pp(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return Bp(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new br(e,t,r)),this}setDocAttribute(e,t){return this.step(new ai(e,t)),this}addNodeMark(e,t){return this.step(new mn(e,t)),this}removeNodeMark(e,t){if(!(t instanceof ce)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new wr(e,t)),this}split(e,t=1,r){return _p(this,e,t,r),this}addMark(e,t,r){return Mp(this,e,t,r),this}removeMark(e,t,r){return Op(this,e,t,r),this}clearIncompatible(e,t,r){return Na(this,e,t,r),this}}const ks=Object.create(null);class Y{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Kp(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=H.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?H.empty:t),a==0&&jl(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),jl(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new G(e):ur(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=t<0?ur(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):ur(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new ut(e.node(0))}static atStart(e){return ur(e,e,0,0,1)||new ut(e)}static atEnd(e){return ur(e,e,e.content.size,e.childCount,-1)||new ut(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=ks[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ks)throw new RangeError("Duplicate use of selection JSON ID "+e);return ks[e]=t,t.prototype.jsonID=e,t}getBookmark(){return G.between(this.$anchor,this.$head).getBookmark()}}Y.prototype.visible=!0;class Kp{constructor(e,t){this.$from=e,this.$to=t}}let Vl=!1;function Wl(n){!Vl&&!n.parent.inlineContent&&(Vl=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class G extends Y{constructor(e,t=e){Wl(e),Wl(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Y.near(r);let i=e.resolve(t.map(this.anchor));return new G(i.parent.inlineContent?i:r,r)}replace(e,t=H.empty){if(super.replace(e,t),t==H.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof G&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new qo(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new G(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=Y.findFrom(t,r,!0)||Y.findFrom(t,-r,!0);if(o)t=o.$head;else return Y.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(Y.findFrom(e,-r,!0)||Y.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new G(e,t)}}Y.jsonID("text",G);class qo{constructor(e,t){this.anchor=e,this.head=t}map(e){return new qo(e.map(this.anchor),e.map(this.head))}resolve(e){return G.between(e.resolve(this.anchor),e.resolve(this.head))}}class U extends Y{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?Y.near(o):new U(o)}content(){return new H(N.from(this.node),0,0)}eq(e){return e instanceof U&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Da(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new U(e.resolve(t.anchor))}static create(e,t){return new U(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}U.prototype.visible=!1;Y.jsonID("node",U);class Da{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new qo(r,r):new Da(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&U.isSelectable(r)?new U(t):Y.near(t)}}class ut extends Y{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=H.empty){if(t==H.empty){e.delete(0,e.doc.content.size);let r=Y.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new ut(e)}map(e){return new ut(e)}eq(e){return e instanceof ut}getBookmark(){return Jp}}Y.jsonID("all",ut);const Jp={map(){return this},resolve(n){return new ut(n)}};function ur(n,e,t,r,i,o=!1){if(e.inlineContent)return G.create(n,t);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&U.isSelectable(a))return U.create(n,t-(i<0?a.nodeSize:0))}else{let l=ur(n,a,t+i,i<0?a.childCount:0,i,o);if(l)return l}t+=a.nodeSize*i}return null}function jl(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Te||i instanceof Me))return;let o=n.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),n.setSelection(Y.near(n.doc.resolve(s),t))}const Ul=1,ql=2,Kl=4;class Gp extends Qu{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ul)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ul)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ql,this}ensureMarks(e){return ce.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ql)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ce.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(t);o=r==t?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(Y.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Kl,this}get scrolledIntoView(){return(this.updated&Kl)>0}}function Jl(n,e){return!e||!n?n:n.bind(e)}class Wr{constructor(e,t,r){this.name=e,this.init=Jl(t.init,r),this.apply=Jl(t.apply,r)}}const Yp=[new Wr("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Wr("selection",{init(n,e){return n.selection||Y.atStart(e.doc)},apply(n){return n.selection}}),new Wr("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Wr("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class xs{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Yp.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Wr(r.key,r.spec.state,r))})}}class pr{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:t.length}:{state:this,n:0})}t.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new pr(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new Gp(this)}static create(e){let t=new xs(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new pr(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new xs(this.schema,e.plugins),r=t.fields,i=new pr(t);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new xs(e.schema,e.plugins),o=new pr(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=vn.fromJSON(e.schema,t.doc);else if(s.name=="selection")o.selection=Y.fromJSON(o.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){o[s.name]=c.fromJSON.call(l,e,t[a],o);return}}o[s.name]=s.init(e,o)}}),o}}function Zu(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Zu(i,e,{})),t[r]=i}return t}class Ce{constructor(e){this.spec=e,this.props={},e.props&&Zu(e.props,this,this.props),this.key=e.key?e.key.key:ef("plugin")}getState(e){return e[this.key]}}const Ss=Object.create(null);function ef(n){return n in Ss?n+"$"+ ++Ss[n]:(Ss[n]=0,n+"$")}class je{constructor(e="key"){this.key=ef(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Pe=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},li=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let ea=null;const Wt=function(n,e,t){let r=ea||(ea=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Xp=function(){ea=null},Xn=function(n,e,t,r){return t&&(Gl(n,e,t,r,-1)||Gl(n,e,t,r,1))},Qp=/^(img|br|input|textarea|hr)$/i;function Gl(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:ct(n))){let o=n.parentNode;if(!o||o.nodeType!=1||bi(n)||Qp.test(n.nodeName)||n.contentEditable=="false")return!1;e=Pe(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?ct(n):0}else return!1}}function ct(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Zp(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=ct(n)}else if(n.parentNode&&!bi(n))e=Pe(n),n=n.parentNode;else return null}}function em(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!bi(n))e=Pe(n)+1,n=n.parentNode;else return null}}function tm(n,e,t){for(let r=e==0,i=e==ct(n);r||i;){if(n==t)return!0;let o=Pe(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==ct(n)}}function bi(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Ko=function(n){return n.focusNode&&Xn(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Fn(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function nm(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function rm(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(ct(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(ct(r.startContainer),r.startOffset)}}}const It=typeof navigator<"u"?navigator:null,Yl=typeof document<"u"?document:null,On=It&&It.userAgent||"",ta=/Edge\/(\d+)/.exec(On),tf=/MSIE \d/.exec(On),na=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(On),qe=!!(tf||na||ta),kn=tf?document.documentMode:na?+na[1]:ta?+ta[1]:0,wt=!qe&&/gecko\/(\d+)/i.test(On);wt&&+(/Firefox\/(\d+)/.exec(On)||[0,0])[1];const ra=!qe&&/Chrome\/(\d+)/.exec(On),ze=!!ra,nf=ra?+ra[1]:0,$e=!qe&&!!It&&/Apple Computer/.test(It.vendor),xr=$e&&(/Mobile\/\w+/.test(On)||!!It&&It.maxTouchPoints>2),lt=xr||(It?/Mac/.test(It.platform):!1),im=It?/Win/.test(It.platform):!1,jt=/Android \d/.test(On),vi=!!Yl&&"webkitFontSmoothing"in Yl.documentElement.style,om=vi?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function sm(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Ft(n,e){return typeof n=="number"?n:n[e]}function am(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Xl(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let s=t||n.dom;s;s=li(s)){if(s.nodeType!=1)continue;let a=s,l=a==o.body,c=l?sm(o):am(a),u=0,f=0;if(e.top<c.top+Ft(r,"top")?f=-(c.top-e.top+Ft(i,"top")):e.bottom>c.bottom-Ft(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+Ft(i,"top")-c.top:e.bottom-c.bottom+Ft(i,"bottom")),e.left<c.left+Ft(r,"left")?u=-(c.left-e.left+Ft(i,"left")):e.right>c.right-Ft(r,"right")&&(u=e.right-c.right+Ft(i,"right")),u||f)if(l)o.defaultView.scrollBy(u,f);else{let d=a.scrollLeft,h=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let p=a.scrollLeft-d,g=a.scrollTop-h;e={left:e.left-p,top:e.top-g,right:e.right-p,bottom:e.bottom-g}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function lm(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=n.root.elementFromPoint(o,s);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:rf(n.dom)}}function rf(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=li(r));return e}function cm({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;of(t,r==0?0:r-e)}function of(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let lr=null;function um(n){if(n.setActive)return n.setActive();if(lr)return n.focus(lr);let e=rf(n);n.focus(lr==null?{get preventScroll(){return lr={preventScroll:!0},!0}}:void 0),lr||(lr=!1,of(e,0))}function sf(n,e){let t,r=2e8,i,o=0,s=e.top,a=e.top,l,c;for(let u=n.firstChild,f=0;u;u=u.nextSibling,f++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Wt(u).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){t=u,r=g,i=g&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&g&&(o=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=f+1)}}return!t&&l&&(t=l,i=c,r=0),t&&t.nodeType==3?fm(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:sf(t,i)}function fm(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=an(r,1);if(o.top!=o.bottom&&Ra(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function Ra(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function dm(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function hm(n,e,t){let{node:r,offset:i}=sf(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function pm(n,e,t,r){let i=-1;for(let o=e,s=!1;o!=n.dom;){let a=n.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!s&&l.left>r.left||l.top>r.top?i=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function af(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let s=n.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Ra(e,c))return af(s,e,c)}}if((o=(o+1)%r)==i)break}return n}function mm(n,e){let t=n.dom.ownerDocument,r,i=0,o=rm(t,e.left,e.top);o&&({node:r,offset:i}=o);let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=n.dom.getBoundingClientRect();if(!Ra(e,c)||(s=af(n.dom,e,c),!s))return null}if($e)for(let c=s;r&&c;c=li(c))c.draggable&&(r=void 0);if(s=dm(s,e),r){if(wt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let c;vi&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=pm(n,r,i,e))}a==null&&(a=hm(n,s,e));let l=n.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Ql(n){return n.top<n.bottom||n.left<n.right}function an(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Ql(r))return r}return Array.prototype.find.call(t,Ql)||n.getBoundingClientRect()}const gm=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function lf(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),s=vi||wt;if(r.nodeType==3)if(s&&(gm.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let l=an(Wt(r,i,i),t);if(wt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=an(Wt(r,i-1,i-1),-1);if(c.top==l.top){let u=an(Wt(r,i,i+1),-1);if(u.top!=l.top)return zr(u,u.left<c.left)}}return l}else{let l=i,c=i,u=t<0?1:-1;return t<0&&!i?(c++,u=-1):t>=0&&i==r.nodeValue.length?(l--,u=1):t<0?l--:c++,zr(an(Wt(r,l,c),u),u<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==ct(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Es(l.getBoundingClientRect(),!1)}if(o==null&&i<ct(r)){let l=r.childNodes[i];if(l.nodeType==1)return Es(l.getBoundingClientRect(),!0)}return Es(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==ct(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Wt(l,ct(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return zr(an(c,1),!1)}if(o==null&&i<ct(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Wt(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return zr(an(c,-1),!0)}return zr(an(r.nodeType==3?Wt(r):r,-t),t>=0)}function zr(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Es(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function cf(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function ym(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return cf(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=lf(n,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Wt(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const bm=/[\u0590-\u08ac]/;function vm(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=n.domSelection();return a?!bm.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?o:s:cf(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=n.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",t,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:g}=n.domSelectionRange(),b=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),b}):r.pos==r.start()||r.pos==r.end()}let Zl=null,ec=null,tc=!1;function wm(n,e,t){return Zl==e&&ec==t?tc:(Zl=e,ec=t,tc=t=="up"||t=="down"?ym(n,e,t):vm(n,e,t))}const ft=0,nc=1,$n=2,Dt=3;class wi{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=ft,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Pe(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!t||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let a=i.children[s];if(a.size){i=a;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof ff){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof uf&&o.side>=0;r--);if(t<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&t&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Pe(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Pe(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(i==-1&&e<=c){let u=s+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=s;for(let f=a;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Pe(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Pe(f.dom);break}t+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),s=Math.max(e,t);for(let h=0,p=0;h<this.children.length;h++){let g=this.children[h],b=p+g.size;if(o>p&&s<b)return g.setSelection(e-p-g.border,t-p-g.border,r,i);p=b}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((wt||$e)&&e==t){let{node:h,offset:p}=a;if(h.nodeType==3){if(f=!!(p&&h.nodeValue[p-1]==`
`),f&&p==h.nodeValue.length)for(let g=h,b;g;g=g.parentNode){if(b=g.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:Pe(b)+1});break}let k=g.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let g=h.childNodes[p-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(wt&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&$e)&&Xn(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Xn(l.node,l.offset,u.focusNode,u.focusOffset))return;let d=!1;if((c.extend||e==t)&&!f){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>t){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let a=r+o.border,l=s-o.border;if(e>=a&&t<=l){this.dirty=e==r||t==s?$n:nc,e==a&&t==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Dt:o.markDirty(e-a,t-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?$n:Dt}r=s}this.dirty=$n}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?$n:nc;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class uf extends wi{constructor(e,t,r,i){let o,s=t.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==ft&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class km extends wi{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Qn extends wi{constructor(e,t,r,i,o){super(e,[],r,i),this.mark=t,this.spec=o}static create(e,t,r,i){let o=i.nodeViews[t.type.name],s=o&&o(t,i,r);return(!s||!s.dom)&&(s=nr.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Qn(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Dt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Dt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=ft){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ft}}slice(e,t,r){let i=Qn.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;t<s&&(o=oa(o,t,s,r)),e>0&&(o=oa(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class xn extends wi{constructor(e,t,r,i,o,s,a,l,c){super(e,[],o,s),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,t,r,i,o,s){let a=o.nodeViews[t.type.name],l,c=a&&a(t,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,f=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=nr.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!f&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let d=u;return u=pf(u,r,t),c?l=new xm(e,t,r,i,u,f||null,d,c,o,s+1):t.isText?new Jo(e,t,r,i,u,d,o):new xn(e,t,r,i,u,f||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>N.empty)}return e}matchesNode(e,t,r){return this.dirty==ft&&e.eq(this.node)&&oo(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new Em(this,s&&s.node,e);Mm(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?ce.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,f,d)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,f,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,f,h,e)||l.updateNextNode(c,u,f,e,d,i)||l.addNode(c,u,f,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==$n)&&(s&&this.protectLocalComposition(e,s),df(this.contentDOM,this.children,e),xr&&Om(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof G)||r<t||i>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=Am(this.node.content,s,r-t,i-t);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new km(this,o,t,i);e.input.compositionNodes.push(s),this.children=oa(this.children,r,r+i.length,e,s)}update(e,t,r,i){return this.dirty==Dt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ft}updateOuterDeco(e){if(oo(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=hf(this.dom,this.nodeDOM,ia(this.outerDeco,this.node,t),ia(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function rc(n,e,t,r,i){pf(r,e,n);let o=new xn(void 0,n,e,t,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Jo extends xn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==Dt||this.dirty!=ft&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=ft||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ft,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new Jo(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Dt)}get domAtom(){return!1}isText(e){return this.node.text==e}}class ff extends wi{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ft&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class xm extends xn{constructor(e,t,r,i,o,s,a,l,c,u){super(e,t,r,i,o,s,a,c,u),this.spec=l}update(e,t,r,i){if(this.dirty==Dt)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function df(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==n){for(;a!=r;)r=ic(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(s instanceof Qn){let l=r?r.previousSibling:n.lastChild;df(s.contentDOM,s.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=ic(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const qr=function(n){n&&(this.nodeName=n)};qr.prototype=Object.create(null);const Vn=[new qr];function ia(n,e,t){if(n.length==0)return Vn;let r=t?Vn[0]:new qr,i=[r];for(let o=0;o<n.length;o++){let s=n[o].type.attrs;if(s){s.nodeName&&i.push(r=new qr(s.nodeName));for(let a in s){let l=s[a];l!=null&&(t&&i.length==1&&i.push(r=new qr(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function hf(n,e,t,r){if(t==Vn&&r==Vn)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Vn[0]),i=l}Sm(i,a||Vn[0],s)}return i}function Sm(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function pf(n,e,t){return hf(n,n,Vn,ia(e,t,n.nodeType!=1))}function oo(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function ic(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Em{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Cm(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=ft,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Qn.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let s=this.top.children[i];return s.dirty==Dt&&s.dom==s.contentDOM&&(s.dirty=$n),s.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof xn){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,f,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Dt&&oo(t,l.outerDeco));if(!d&&l.update(e,t,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(l,e,t,r,i,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=$n,f.updateChildren(i,s+1),f.dirty=ft),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,o,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!oo(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=xn.create(this.top,t,r,i,o,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,i,o){let s=xn.create(this.top,e,t,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new uf(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Qn;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Jo)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&(($e||ze)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new ff(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Cm(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof Qn)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function Tm(n,e){return n.type.side-e.type.side}function Mm(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,f;for(;s<i.length&&i[s].to==o;){let b=i[s++];b.widget&&(u?(f||(f=[u])).push(b):u=b)}if(u)if(f){f.sort(Tm);for(let b=0;b<f.length;b++)t(f[b],c,!!l)}else t(u,c,!!l);let d,h;if(l)h=-1,d=l,l=null;else if(c<n.childCount)h=c,d=n.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=o&&a.splice(b--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let p=o+d.nodeSize;if(d.isText){let b=p;s<i.length&&i[s].from<b&&(b=i[s].from);for(let k=0;k<a.length;k++)a[k].to<b&&(b=a[k].to);b<p&&(l=d.cut(b-o),d=d.cut(0,b-o),p=b,h=-1)}else for(;s<i.length&&i[s].to<p;)s++;let g=d.isInline&&!d.isLeaf?a.filter(b=>!b.inline):a.slice();r(d,g,e.forChild(o,d),h),o=p}}function Om(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Am(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let s=n.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<n.childCount;){let c=n.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=t){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function oa(n,e,t,r,i){let o=[];for(let s=0,a=0;s<n.length;s++){let l=n[s],c=a,u=a+=l.size;c>=t||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>t&&o.push(l.slice(t-c,l.size,r)))}return o}function Pa(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(Ko(t)){for(l=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&U.isSelectable(f)&&i.parent&&!(f.isInline&&tm(t.focusNode,t.focusOffset,i.dom))){let d=i.posBefore;c=new U(s==d?a:r.resolve(d))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let f=s,d=s;for(let h=0;h<t.rangeCount;h++){let p=t.getRangeAt(h);f=Math.min(f,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),d=Math.max(d,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(f<0)return null;[l,s]=d==n.state.selection.anchor?[d,f]:[f,d],a=r.resolve(s)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let f=e=="pointer"||n.state.selection.head<a.pos&&!o?1:-1;c=La(n,u,a,f)}return c}function mf(n){return n.editable?n.hasFocus():yf(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Jt(n,e=!1){let t=n.state.selection;if(gf(n,t),!!mf(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&ze){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Xn(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Im(n);else{let{anchor:r,head:i}=t,o,s;oc&&!(t instanceof G)&&(t.$from.parent.inlineContent||(o=sc(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=sc(n,t.to))),n.docView.setSelection(r,i,n,e),oc&&(o&&ac(o),s&&ac(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Nm(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const oc=$e||ze&&nf<63;function sc(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if($e&&i&&i.contentEditable=="false")return Cs(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Cs(i);if(o)return Cs(o)}}function Cs(n){return n.contentEditable="true",$e&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function ac(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Nm(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!mf(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Im(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,Pe(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&qe&&kn<=11&&(r.disabled=!0,r.disabled=!1)}function gf(n,e){if(e instanceof U){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(lc(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else lc(n)}function lc(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function La(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||G.between(e,t,r)}function cc(n){return n.editable&&!n.hasFocus()?!1:yf(n)}function yf(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Dm(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Xn(e.node,e.offset,t.anchorNode,t.anchorOffset)}function sa(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&Y.findFrom(o,e)}function cn(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function uc(n,e,t){let r=n.state.selection;if(r instanceof G)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return cn(n,new G(r.$anchor,s))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=sa(n.state,e);return i&&i instanceof U?cn(n,i):!1}else if(!(lt&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=n.docView.descAt(a))&&!s.contentDOM?U.isSelectable(o)?cn(n,new U(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):vi?cn(n,new G(n.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof U&&r.node.isInline)return cn(n,new G(e>0?r.$to:r.$from));{let i=sa(n.state,e);return i?cn(n,i):!1}}}function so(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Kr(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function cr(n,e){return e<0?Rm(n):Pm(n)}function Rm(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,s=!1;for(wt&&t.nodeType==1&&r<so(t)&&Kr(t.childNodes[r],-1)&&(s=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Kr(a,-1))i=t,o=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(bf(t))break;{let a=t.previousSibling;for(;a&&Kr(a,-1);)i=t.parentNode,o=Pe(a),a=a.previousSibling;if(a)t=a,r=so(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}s?aa(n,t,r):i&&aa(n,i,o)}function Pm(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=so(t),o,s;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Kr(a,1))o=t,s=++r;else break}else{if(bf(t))break;{let a=t.nextSibling;for(;a&&Kr(a,1);)o=a.parentNode,s=Pe(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=so(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&aa(n,o,s)}function bf(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Lm(n,e){for(;n&&e==n.childNodes.length&&!bi(n);)e=Pe(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function Bm(n,e){for(;n&&!e&&!bi(n);)e=Pe(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function aa(n,e,t){if(e.nodeType!=3){let o,s;(s=Lm(e,t))?(e=s,t=0):(o=Bm(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Ko(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Jt(n)},50)}function fc(n,e){let t=n.state.doc.resolve(e);if(!(ze||im)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function dc(n,e,t){let r=n.state.selection;if(r instanceof G&&!r.empty||t.indexOf("s")>-1||lt&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=sa(n.state,e);if(s&&s instanceof U)return cn(n,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof ut?Y.near(s,e):Y.findFrom(s,e);return a?cn(n,a):!1}return!1}function hc(n,e){if(!(n.state.selection instanceof G))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let s=n.state.tr;return e<0?s.delete(t.pos-o.nodeSize,t.pos):s.delete(t.pos,t.pos+o.nodeSize),n.dispatch(s),!0}return!1}function pc(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function _m(n){if(!$e||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;pc(n,r,"true"),setTimeout(()=>pc(n,r,"false"),20)}return!1}function zm(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Fm(n,e){let t=e.keyCode,r=zm(e);if(t==8||lt&&t==72&&r=="c")return hc(n,-1)||cr(n,-1);if(t==46&&!e.shiftKey||lt&&t==68&&r=="c")return hc(n,1)||cr(n,1);if(t==13||t==27)return!0;if(t==37||lt&&t==66&&r=="c"){let i=t==37?fc(n,n.state.selection.from)=="ltr"?-1:1:-1;return uc(n,i,r)||cr(n,i)}else if(t==39||lt&&t==70&&r=="c"){let i=t==39?fc(n,n.state.selection.from)=="ltr"?1:-1:1;return uc(n,i,r)||cr(n,i)}else{if(t==38||lt&&t==80&&r=="c")return dc(n,-1,r)||cr(n,-1);if(t==40||lt&&t==78&&r=="c")return _m(n)||dc(n,1,r)||cr(n,1);if(r==(lt?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function vf(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=n.someProp("clipboardSerializer")||nr.fromSchema(n.state.schema),a=Cf(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=Ef[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(t)}`);let d=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d,slice:e}}function wf(n,e,t,r,i){let o=i.parent.type.spec.code,s,a;if(!t&&!e)return null;let l=e&&(r||o||!t);if(l){if(n.someProp("transformPastedText",d=>{e=d(e,o||r,n)}),o)return e?new H(N.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):H.empty;let f=n.someProp("clipboardTextParser",d=>d(e,i,r,n));if(f)a=f;else{let d=i.marks(),{schema:h}=n.state,p=nr.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let b=s.appendChild(document.createElement("p"));g&&b.appendChild(p.serializeNode(h.text(g,d)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),s=Wm(t),vi&&jm(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let d=s.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;s=d}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||wn.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Hm.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Um(mc(a,+u[1],+u[2]),u[4]);else if(a=H.maxOpen($m(a.content,i),!0),a.openStart||a.openEnd){let f=0,d=0;for(let h=a.content.firstChild;f<a.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=a.content.lastChild;d<a.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);a=mc(a,f,d)}return n.someProp("transformPasted",f=>{a=f(a,n)}),a}const Hm=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $m(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,s=[];if(n.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&xf(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=Sf(s[s.length-1],o.length));let u=kf(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return N.from(s)}return n}function kf(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,N.from(n));return n}function xf(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=xf(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(N.from(kf(t,n,i+1))))}}function Sf(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Sf(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(N.empty,!0);return n.copy(t.append(r))}function la(n,e,t,r,i,o){let s=e<0?n.firstChild:n.lastChild,a=s.content;return n.childCount>1&&(o=0),i<r-1&&(a=la(a,e,t,r,i+1,o)),i>=t&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(N.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(a))}function mc(n,e,t){return e<n.openStart&&(n=new H(la(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new H(la(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Ef={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let gc=null;function Cf(){return gc||(gc=document.implementation.createHTMLDocument("title"))}let Ts=null;function Vm(n){let e=window.trustedTypes;return e?(Ts||(Ts=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Ts.createHTML(n)):n}function Wm(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Cf().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&Ef[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=Vm(n),i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function jm(n){let e=n.querySelectorAll(ze?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Um(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:s}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=N.from(l.create(r[a+1],i)),o++,s++}return new H(i,o,s)}const Ve={},We={},qm={touchstart:!0,touchmove:!0};class Km{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Jm(n){for(let e in Ve){let t=Ve[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{Ym(n,r)&&!Ba(n,r)&&(n.editable||!(r.type in We))&&t(n,r)},qm[e]?{passive:!0}:void 0)}$e&&n.dom.addEventListener("input",()=>null),ca(n)}function gn(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Gm(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function ca(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Ba(n,r))})}function Ba(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function Ym(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Xm(n,e){!Ba(n,e)&&Ve[e.type]&&(n.editable||!(e.type in We))&&Ve[e.type](n,e)}We.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Mf(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(jt&&ze&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),xr&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Fn(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Fm(n,t)?t.preventDefault():gn(n,"key")};We.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};We.keypress=(n,e)=>{let t=e;if(Mf(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||lt&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof G)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function Go(n){return{left:n.clientX,top:n.clientY}}function Qm(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function _a(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(n.someProp(e,a=>s>o.depth?a(n,t,o.nodeAfter,o.before(s),i,!0):a(n,t,o.node(s),o.before(s),i,!1)))return!0;return!1}function vr(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function Zm(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&U.isSelectable(r)?(vr(n,new U(t)),!0):!1}function eg(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof U&&(r=t.node);let o=n.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(U.isSelectable(a)){r&&t.$from.depth>0&&s>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(s);break}}return i!=null?(vr(n,U.create(n.state.doc,i)),!0):!1}function tg(n,e,t,r,i){return _a(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?eg(n,t):Zm(n,t))}function ng(n,e,t,r){return _a(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function rg(n,e,t,r){return _a(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||ig(n,t,r)}function ig(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(vr(n,G.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)vr(n,G.create(r,a+1,a+1+s.content.size));else if(U.isSelectable(s))vr(n,U.create(r,a));else continue;return!0}}function za(n){return ao(n)}const Tf=lt?"metaKey":"ctrlKey";Ve.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=za(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&Qm(t,n.input.lastClick)&&!t[Tf]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let s=n.posAtCoords(Go(t));s&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new og(n,s,t,!!r)):(o=="doubleClick"?ng:rg)(n,s.pos,s.inside,t)?t.preventDefault():gn(n,"pointer"))};class og{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Tf],this.allowDefault=r.shiftKey;let o,s;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),s=t.inside;else{let u=e.state.doc.resolve(t.pos);o=u.parent,s=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof U&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&wt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),gn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Jt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Go(e))),this.updateAllowDefault(e),this.allowDefault||!t?gn(this.view,"pointer"):tg(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||$e&&this.mightDrag&&!this.mightDrag.node.isAtom||ze&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(vr(this.view,Y.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):gn(this.view,"pointer")}move(e){this.updateAllowDefault(e),gn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ve.touchstart=n=>{n.input.lastTouch=Date.now(),za(n),gn(n,"pointer")};Ve.touchmove=n=>{n.input.lastTouch=Date.now(),gn(n,"pointer")};Ve.contextmenu=n=>za(n);function Mf(n,e){return n.composing?!0:$e&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const sg=jt?5e3:-1;We.compositionstart=We.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof G&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),ao(n,!0),n.markCursor=null;else if(ao(n,!e.selection.empty),wt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=n.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}n.input.composing=!0}Of(n,sg)};We.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Of(n,20))};function Of(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>ao(n),e))}function Af(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=lg());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function ag(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=Zp(e.focusNode,e.focusOffset),r=em(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let s=t.pmViewDesc;if(!(!s||!s.isText(t.nodeValue)))return r}}return t||r}function lg(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function ao(n,e=!1){if(!(jt&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Af(n),e||n.docView&&n.docView.dirty){let t=Pa(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function cg(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const ci=qe&&kn<15||xr&&om<604;Ve.copy=We.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=ci?null:t.clipboardData,s=r.content(),{dom:a,text:l}=vf(n,s);o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):cg(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ug(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function fg(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?ui(n,r.value,null,i,e):ui(n,r.textContent,r.innerHTML,i,e)},50)}function ui(n,e,t,r,i){let o=wf(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,o||H.empty)))return!0;if(!o)return!1;let s=ug(o),a=s?n.state.tr.replaceSelectionWith(s,r):n.state.tr.replaceSelection(o);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Nf(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}We.paste=(n,e)=>{let t=e;if(n.composing&&!jt)return;let r=ci?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&ui(n,Nf(r),r.getData("text/html"),i,t)?t.preventDefault():fg(n,t)};class If{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const Df=lt?"altKey":"ctrlKey";Ve.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(Go(t)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof U?i.to-1:i.to))){if(r&&r.mightDrag)s=U.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=n.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=n.docView&&(s=U.create(n.state.doc,f.posBefore))}}let a=(s||n.state.selection).content(),{dom:l,text:c,slice:u}=vf(n,a);(!t.dataTransfer.files.length||!ze||nf>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(ci?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",ci||t.dataTransfer.setData("text/plain",c),n.dragging=new If(u,!t[Df],s)};Ve.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};We.dragover=We.dragenter=(n,e)=>e.preventDefault();We.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Go(t));if(!i)return;let o=n.state.doc.resolve(i.pos),s=r&&r.slice;s?n.someProp("transformPasted",p=>{s=p(s,n)}):s=wf(n,Nf(t.dataTransfer),ci?null:t.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!t[Df]);if(n.someProp("handleDrop",p=>p(n,t,s||H.empty,a))){t.preventDefault();return}if(!s)return;t.preventDefault();let l=s?Ku(n.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=n.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=c.doc;if(f?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(d))return;let h=c.doc.resolve(u);if(f&&U.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new U(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,b,k,M)=>p=M),c.setSelection(La(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Ve.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Jt(n)},20))};Ve.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Ve.beforeinput=(n,e)=>{if(ze&&jt&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Fn(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in We)Ve[n]=We[n];function fi(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class lo{constructor(e,t){this.toDOM=e,this.spec=t||qn,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:s}=e.mapResult(t.from+i,this.side<0?-1:1);return s?null:new tt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof lo&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&fi(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Sn{constructor(e,t){this.attrs=e,this.spec=t||qn}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new tt(o,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Sn&&fi(this.attrs,e.attrs)&&fi(this.spec,e.spec)}static is(e){return e.type instanceof Sn}destroy(){}}class Fa{constructor(e,t){this.attrs=e,this.spec=t||qn}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let s=e.mapResult(t.to+i,-1);return s.deleted||s.pos<=o.pos?null:new tt(o.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof Fa&&fi(this.attrs,e.attrs)&&fi(this.spec,e.spec)}destroy(){}}class tt{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new tt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new tt(e,e,new lo(t,r))}static inline(e,t,r,i){return new tt(e,t,new Sn(r,i))}static node(e,t,r,i){return new tt(e,t,new Fa(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Sn}get widget(){return this.type instanceof lo}}const fr=[],qn={};class Se{constructor(e,t){this.local=e.length?e:fr,this.children=t.length?t:fr}static create(e,t){return t.length?co(t,e,0,qn):_e}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,t-a,r,i+a,o)}}map(e,t,r){return this==_e||e.maps.length==0?this:this.mapInner(e,t,0,0,r||qn)}mapInner(e,t,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?dg(this.children,s||[],e,t,r,i,o):s?new Se(s.sort(Kn),fr):_e}add(e,t){return t.length?this==_e?Se.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=Pf(t,a,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,co(u,a,c+1,qn)),o+=3}});let s=Rf(o?Lf(t):t,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new Se(s.length?this.local.concat(s).sort(Kn):this.local,i||this.children)}remove(e){return e.length==0||this==_e?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+t,l=r[o+1]+t;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>a&&f.to<l&&(e[u]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=_e?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Se(i,r):_e}forChild(e,t){if(this==_e)return this;if(t.isLeaf)return Se.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof Sn){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Se(i.sort(Kn),fr);return r?new dn([a,r]):a}return r||_e}eq(e){if(this==e)return!0;if(!(e instanceof Se)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Ha(this.localsInner(e))}localsInner(e){if(this==_e)return fr;if(e.inlineContent||!this.local.some(Sn.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Sn||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Se.empty=new Se([],[]);Se.removeOverlap=Ha;const _e=Se.empty;class dn{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,qn));return dn.from(r)}forChild(e,t){if(t.isLeaf)return Se.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=_e&&(o instanceof dn?r=r.concat(o.members):r.push(o))}return dn.from(r)}eq(e){if(!(e instanceof dn)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let s=0;s<o.length;s++)t.push(o[s])}}return t?Ha(r?t:t.sort(Kn)):fr}static from(e){switch(e.length){case 0:return _e;case 1:return e[0];default:return new dn(e.every(t=>t instanceof Se)?e:e.reduce((t,r)=>t.concat(r instanceof Se?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function dg(n,e,t,r,i,o,s){let a=n.slice();for(let c=0,u=o;c<t.maps.length;c++){let f=0;t.maps[c].forEach((d,h,p,g)=>{let b=g-p-(h-d);for(let k=0;k<a.length;k+=3){let M=a[k+1];if(M<0||d>M+u-f)continue;let D=a[k]+u-f;h>=D?a[k+1]=d<=D?-2:-1:d>=u&&b&&(a[k]+=b,a[k+1]+=b)}f+=b}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+o),f=u-i;if(f<0||f>=r.content.size){l=!0;continue}let d=t.map(n[c+1]+o,-1),h=d-i,{index:p,offset:g}=r.content.findIndex(f),b=r.maybeChild(p);if(b&&g==f&&g+b.nodeSize==h){let k=a[c+2].mapInner(t,b,u+1,n[c]+o+1,s);k!=_e?(a[c]=f,a[c+1]=h,a[c+2]=k):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=hg(a,n,e,t,i,o,s),u=co(c,r,0,s);e=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,d=0;f<u.children.length;f+=3){let h=u.children[f];for(;d<a.length&&a[d]<h;)d+=3;a.splice(d,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Se(e.sort(Kn),a)}function Rf(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new tt(i.from+e,i.to+e,i.type))}return t}function hg(n,e,t,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,i,c);f?t.push(f):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+o+1);return t}function Pf(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,s;o<n.length;o++)(s=n[o])&&s.from>t&&s.to<r&&((i||(i=[])).push(s),n[o]=null);return i}function Lf(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function co(n,e,t,r){let i=[],o=!1;e.forEach((a,l)=>{let c=Pf(n,a,l+t);if(c){o=!0;let u=co(c,a,t+l+1,r);u!=_e&&i.push(l,l+a.nodeSize,u)}});let s=Rf(o?Lf(n):n,-t).sort(Kn);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Se(s,i):_e}function Kn(n,e){return n.from-e.from||n.to-e.to}function Ha(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),yc(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),yc(e,i,r.copy(o.from,r.to)));break}}}return e}function yc(n,e,t){for(;e<n.length&&Kn(t,n[e])>0;)e++;n.splice(e,0,t)}function Ms(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=_e&&e.push(r)}),n.cursorWrapper&&e.push(Se.create(n.state.doc,[n.cursorWrapper.deco])),dn.from(e)}const pg={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},mg=qe&&kn<=11;class gg{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class yg{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gg,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);qe&&kn<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),mg&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,pg)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(cc(this.view)){if(this.suppressingSelectionUpdates)return Jt(this.view);if(qe&&kn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Xn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=li(o))t.add(o);for(let o=e.anchorNode;o;o=li(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&cc(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let f=this.registerMutation(t[u],l);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(a=!0))}if(wt&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,d]=u;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of u){let h=d.parentNode;h&&h.nodeName=="LI"&&(!f||wg(e,f)!=h)&&d.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ko(r)&&(c=Pa(e))&&c.eq(Y.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Jt(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),bg(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Jt(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];t.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(qe&&kn<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:d}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d)}let s=i&&i.parentNode==e.target?Pe(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?Pe(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let bc=new WeakMap,vc=!1;function bg(n){if(!bc.has(n)&&(bc.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=wt,vc)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),vc=!0}}function wc(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=n.domAtPos(n.state.selection.anchor);return Xn(s.node,s.offset,i,o)&&([t,r,i,o]=[i,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}}function vg(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return wc(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?wc(n,t):null}function wg(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function kg(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Ko(l)||c.push({node:l.focusNode,offset:l.focusOffset})),ze&&n.input.lastKeyCode===8)for(let b=o;b>i;b--){let k=r.childNodes[b-1],M=k.pmViewDesc;if(k.nodeName=="BR"&&!M){o=b;break}if(!M||M.size)break}let f=n.state.doc,d=n.someProp("domParser")||wn.fromSchema(n.state.schema),h=f.resolve(s),p=null,g=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:xg,context:h});if(c&&c[0].pos!=null){let b=c[0].pos,k=c[1]&&c[1].pos;k==null&&(k=b),p={anchor:b+s,head:k+s}}return{doc:g,sel:p,from:s,to:a}}function xg(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if($e&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||$e&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Sg=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Eg(n,e,t,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let _=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,W=Pa(n,_);if(W&&!n.state.selection.eq(W)){if(ze&&jt&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",J=>J(n,Fn(13,"Enter"))))return;let q=n.state.tr.setSelection(W);_=="pointer"?q.setMeta("pointer",!0):_=="key"&&q.scrollIntoView(),o&&q.setMeta("composition",o),n.dispatch(q)}return}let s=n.state.doc.resolve(e),a=s.sharedDepth(t);e=s.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=kg(n,e,t),u=n.state.doc,f=u.slice(c.from,c.to),d,h;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(d=n.state.selection.to,h="end"):(d=n.state.selection.from,h="start"),n.input.lastKeyCode=null;let p=Mg(f.content,c.doc.content,c.from,d,h);if(p&&n.input.domChangeCount++,(xr&&n.input.lastIOSEnter>Date.now()-225||jt)&&i.some(_=>_.nodeType==1&&!Sg.test(_.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",_=>_(n,Fn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof G&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let _=kc(n,n.state.doc,c.sel);if(_&&!_.eq(n.state.selection)){let W=n.state.tr.setSelection(_);o&&W.setMeta("composition",o),n.dispatch(W)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof G&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),qe&&kn<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),b=c.doc.resolveNoCache(p.endB-c.from),k=u.resolve(p.start),M=g.sameParent(b)&&g.parent.inlineContent&&k.end()>=p.endA,D;if((xr&&n.input.lastIOSEnter>Date.now()-225&&(!M||i.some(_=>_.nodeName=="DIV"||_.nodeName=="P"))||!M&&g.pos<c.doc.content.size&&!g.sameParent(b)&&(D=Y.findFrom(c.doc.resolve(g.pos+1),1,!0))&&D.head==b.pos)&&n.someProp("handleKeyDown",_=>_(n,Fn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&Tg(u,p.start,p.endA,g,b)&&n.someProp("handleKeyDown",_=>_(n,Fn(8,"Backspace")))){jt&&ze&&n.domObserver.suppressSelectionUpdates();return}ze&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),jt&&!M&&g.start()!=b.start()&&b.parentOffset==0&&g.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,b=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(_){return _(n,Fn(13,"Enter"))})},20));let v=p.start,S=p.endA,T,L,F;if(M){if(g.pos==b.pos)qe&&kn<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Jt(n),20)),T=n.state.tr.delete(v,S),L=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(F=Cg(g.parent.content.cut(g.parentOffset,b.parentOffset),k.parent.content.cut(k.parentOffset,p.endA-k.start()))))T=n.state.tr,F.type=="add"?T.addMark(v,S,F.mark):T.removeMark(v,S,F.mark);else if(g.parent.child(g.index()).isText&&g.index()==b.index()-(b.textOffset?0:1)){let _=g.parent.textBetween(g.parentOffset,b.parentOffset);if(n.someProp("handleTextInput",W=>W(n,v,S,_)))return;T=n.state.tr.insertText(_,v,S)}}if(T||(T=n.state.tr.replace(v,S,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let _=kc(n,T.doc,c.sel);_&&!(ze&&n.composing&&_.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(_.head==v||_.head==T.mapping.map(S)-1)||qe&&_.empty&&_.head==v)&&T.setSelection(_)}L&&T.ensureMarks(L),o&&T.setMeta("composition",o),n.dispatch(T.scrollIntoView())}function kc(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:La(n,e.resolve(t.anchor),e.resolve(t.head))}function Cg(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,s,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<t.length;u++)o=t[u].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(N.from(c).eq(n))return{mark:a,type:s}}function Tg(n,e,t,r,i){if(t-e<=i.pos-r.pos||Os(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&t==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=n.resolve(Os(o,!0,!0));return!s.parent.isTextblock||s.pos>t||Os(s,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Os(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Mg(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:s,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&n.size<e.size){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<e.size&&xc(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<n.size&&xc(n.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function xc(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class Og{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Km,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Mc),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Cc(this),Ec(this),this.nodeViews=Tc(this),this.docView=rc(this.state.doc,Sc(this),Ms(this),this.dom,this),this.domObserver=new yg(this,(r,i,o,s)=>Eg(this,r,i,o,s)),this.domObserver.start(),Jm(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ca(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Mc),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(Af(this),s=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=Tc(this);Ng(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&ca(this),this.editable=Cc(this),Ec(this);let l=Ms(this),c=Sc(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,c,l);(f||!e.selection.eq(i.selection))&&(s=!0);let d=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&lm(this);if(s){this.domObserver.stop();let h=f&&(qe||ze)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Ag(i.selection,e.selection);if(f){let p=ze?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ag(this)),(o||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=rc(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Dm(this))?Jt(this,h):(gf(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&cm(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof U){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Xl(this,t.getBoundingClientRect(),e)}else Xl(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new If(e.slice,e.move,i<0?void 0:U.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=t?t(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(qe){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&um(this.dom),Jt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return mm(this,e)}coordsAtPos(e,t=1){return lf(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return wm(this,t||this.state,e)}pasteHTML(e,t){return ui(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ui(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(Gm(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ms(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Xp())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Xm(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?$e&&this.root.nodeType===11&&nm(this.dom.ownerDocument)==this.dom&&vg(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Sc(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[tt.node(0,n.state.doc.content.size,e)]}function Ec(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:tt.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Cc(n){return!n.someProp("editable",e=>e(n.state)===!1)}function Ag(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Tc(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Ng(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function Mc(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var En={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},uo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ig=typeof navigator<"u"&&/Mac/.test(navigator.platform),Dg=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Le=0;Le<10;Le++)En[48+Le]=En[96+Le]=String(Le);for(var Le=1;Le<=24;Le++)En[Le+111]="F"+Le;for(var Le=65;Le<=90;Le++)En[Le]=String.fromCharCode(Le+32),uo[Le]=String.fromCharCode(Le);for(var As in En)uo.hasOwnProperty(As)||(uo[As]=En[As]);function Rg(n){var e=Ig&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Dg&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?uo:En)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Pg=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Lg(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))Pg?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function Bg(n){let e=Object.create(null);for(let t in n)e[Lg(t)]=n[t];return e}function Ns(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function _g(n){return new Ce({props:{handleKeyDown:Bf(n)}})}function Bf(n){let e=Bg(n);return function(t,r){let i=Rg(r),o,s=e[Ns(i,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Ns(i,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=En[r.keyCode])&&o!=i){let a=e[Ns(o,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const zg=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function _f(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Fg=(n,e,t)=>{let r=_f(n,t);if(!r)return!1;let i=$a(r);if(!i){let s=r.blockRange(),a=s&&Dr(s);return a==null?!1:(e&&e(n.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if($f(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Sr(o,"end")||U.isSelectable(o)))for(let s=r.depth;;s--){let a=Uo(n.doc,r.before(s),r.after(s),H.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(Sr(o,"end")?Y.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):U.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},Hg=(n,e,t)=>{let r=_f(n,t);if(!r)return!1;let i=$a(r);return i?zf(n,i,e):!1},$g=(n,e,t)=>{let r=Ff(n,t);if(!r)return!1;let i=Va(r);return i?zf(n,i,e):!1};function zf(n,e,t){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Uo(n.doc,o,l,H.empty);if(!c||c.from!=o||c instanceof Te&&c.slice.size>=l-o)return!1;if(t){let u=n.tr.step(c);u.setSelection(G.create(u.doc,o)),t(u.scrollIntoView())}return!0}function Sr(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const Vg=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=$a(r)}let s=o&&o.nodeBefore;return!s||!U.isSelectable(s)?!1:(e&&e(n.tr.setSelection(U.create(n.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function $a(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Ff(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Wg=(n,e,t)=>{let r=Ff(n,t);if(!r)return!1;let i=Va(r);if(!i)return!1;let o=i.nodeAfter;if($f(n,i,e,1))return!0;if(r.parent.content.size==0&&(Sr(o,"start")||U.isSelectable(o))){let s=Uo(n.doc,r.before(),r.after(),H.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=n.tr.step(s);a.setSelection(Sr(o,"start")?Y.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):U.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},jg=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=Va(r)}let s=o&&o.nodeAfter;return!s||!U.isSelectable(s)?!1:(e&&e(n.tr.setSelection(U.create(n.doc,o.pos)).scrollIntoView()),!0)};function Va(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Ug=(n,e)=>{let t=n.selection,r=t instanceof U,i;if(r){if(t.node.isTextblock||!Mn(n.doc,t.from))return!1;i=t.from}else if(i=jo(n.doc,t.from,-1),i==null)return!1;if(e){let o=n.tr.join(i);r&&o.setSelection(U.create(o.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},qg=(n,e)=>{let t=n.selection,r;if(t instanceof U){if(t.node.isTextblock||!Mn(n.doc,t.to))return!1;r=t.to}else if(r=jo(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},Kg=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),o=i&&Dr(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)},Jg=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Hf(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Gg=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),s=Hf(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,s.createAndFill());l.setSelection(Y.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Yg=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof ut||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Hf(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(s,o.createAndFill());a.setSelection(G.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},Xg=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(yr(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Dr(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},Qg=(n,e)=>{let{$from:t,to:r}=n.selection,i,o=t.sharedDepth(r);return o==0?!1:(i=t.before(o),e&&e(n.tr.setSelection(U.create(n.doc,i))),!0)};function Zg(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Mn(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function $f(n,e,t,r){let i=e.nodeBefore,o=e.nodeAfter,s,a,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&Zg(n,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(t){let h=e.pos+o.nodeSize,p=N.empty;for(let k=s.length-1;k>=0;k--)p=N.from(s[k].create(null,p));p=N.from(i.copy(p));let g=n.tr.step(new Me(e.pos-1,h,e.pos,h,new H(p,1,0),s.length,!0)),b=g.doc.resolve(h+2*s.length);b.nodeAfter&&b.nodeAfter.type==i.type&&Mn(g.doc,b.pos)&&g.join(b.pos),t(g.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:Y.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),d=f&&Dr(f);if(d!=null&&d>=e.depth)return t&&t(n.tr.lift(f,d).scrollIntoView()),!0;if(c&&Sr(o,"start",!0)&&Sr(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let g=o,b=1;for(;!g.isTextblock;g=g.firstChild)b++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(t){let k=N.empty;for(let D=p.length-1;D>=0;D--)k=N.from(p[D].copy(k));let M=n.tr.step(new Me(e.pos-p.length,e.pos+o.nodeSize,e.pos+b,e.pos+o.nodeSize-b,new H(k,p.length,0),0,!0));t(M.scrollIntoView())}return!0}}return!1}function Vf(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(G.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const ey=Vf(-1),ty=Vf(1);function ny(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,s=i.blockRange(o),a=s&&Ia(s,n,e);return a?(r&&r(t.tr.wrap(s,a).scrollIntoView()),!0):!1}}function Oc(n,e=null){return function(t,r){let i=!1;for(let o=0;o<t.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=t.selection.ranges[o];t.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)i=!0;else{let u=t.doc.resolve(c),f=u.index();i=u.parent.canReplaceWith(f,f+1,n)}})}if(!i)return!1;if(r){let o=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[s];o.setBlockType(a,l,n,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function ry(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,s=i.blockRange(o);if(!s)return!1;let a=r?t.tr:null;return iy(a,s,n,e)?(r&&r(a.scrollIntoView()),!0):!1}}function iy(n,e,t,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);o=new ro(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new ro(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=Ia(o,t,r,e);return a?(n&&oy(n,e,a,i,t),!0):!1}function oy(n,e,t,r,i){let o=N.empty;for(let u=t.length-1;u>=0;u--)o=N.from(t[u].type.create(t[u].attrs,o));n.step(new Me(e.start-(r?2:0),e.end,e.start,e.end,new H(o,0,0),t.length,!0));let s=0;for(let u=0;u<t.length;u++)t[u].type==i&&(s=u+1);let a=t.length-s,l=e.start+t.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,d=!0;u<f;u++,d=!1)!d&&yr(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function sy(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?ay(e,t,n,o):ly(e,t,o):!0:!1}}function ay(n,e,t,r){let i=n.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Me(o-1,s,o,s,new H(N.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new ro(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=Dr(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;return Mn(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function ly(n,e,t){let r=n.tr,i=t.parent;for(let h=t.end,p=t.endIndex-1,g=t.startIndex;p>g;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(t.start),s=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?N.empty:N.from(i))))return!1;let f=o.pos,d=f+s.nodeSize;return r.step(new Me(f-(a?1:0),d+(l?1:0),f+1,d-1,new H((a?N.empty:N.from(i.copy(N.empty))).append(l?N.empty:N.from(i.copy(N.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function cy(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=N.from(c?n.create():null),f=new H(N.from(n.create(null,N.from(a.type.create(null,u)))),c?3:1,0),d=o.start,h=o.end;t(e.tr.step(new Me(d-(c?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}function Yo(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,o=t.storedMarks,t}}}class Xo{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const f=l(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,c=e||o.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...g)=>{const b=this.buildProps(c,t),k=h(...g)(b);return a.push(k),f}])),run:u};return f}createCan(e){const{rawCommands:t,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a={tr:e,editor:i,view:s,state:Yo({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class uy{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function $(n,e,t){return n.config[e]===void 0&&n.parent?$(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?$(n.parent,e,t):null}):n.config[e]}function Qo(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Wf(n){const e=[],{nodeExtensions:t,markExtensions:r}=Qo(n),i=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:i},l=$(s,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...o,...h}})})})})}),i.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=$(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const d={...o,...f};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:s.name,name:u,attribute:d})})}),e}function Ae(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Ne(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?String(o).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[f,d]=u.split(":").map(h=>h.trim());c.set(f,d)}),a.forEach(u=>{const[f,d]=u.split(":").map(h=>h.trim());c.set(f,d)}),r[i]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[i]=o}),r},{})}function ua(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Ne(t,r),{})}function jf(n){return typeof n=="function"}function Z(n,e=void 0,...t){return jf(n)?e?n.bind(e)(...t):n(...t):n}function fy(n={}){return Object.keys(n).length===0&&n.constructor===Object}function dy(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Ac(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(t):dy(t.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...r,...i}}}}function Nc(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&fy(t)?!1:t!=null))}function hy(n,e){var t;const r=Wf(n),{nodeExtensions:i,markExtensions:o}=Qo(n),s=(t=i.find(c=>$(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(k=>k.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=n.reduce((k,M)=>{const D=$(M,"extendNodeSchema",f);return{...k,...D?D(c):{}}},{}),h=Nc({...d,content:Z($(c,"content",f)),marks:Z($(c,"marks",f)),group:Z($(c,"group",f)),inline:Z($(c,"inline",f)),atom:Z($(c,"atom",f)),selectable:Z($(c,"selectable",f)),draggable:Z($(c,"draggable",f)),code:Z($(c,"code",f)),whitespace:Z($(c,"whitespace",f)),linebreakReplacement:Z($(c,"linebreakReplacement",f)),defining:Z($(c,"defining",f)),isolating:Z($(c,"isolating",f)),attrs:Object.fromEntries(u.map(k=>{var M;return[k.name,{default:(M=k==null?void 0:k.attribute)===null||M===void 0?void 0:M.default}]}))}),p=Z($(c,"parseHTML",f));p&&(h.parseDOM=p.map(k=>Ac(k,u)));const g=$(c,"renderHTML",f);g&&(h.toDOM=k=>g({node:k,HTMLAttributes:ua(k,u)}));const b=$(c,"renderText",f);return b&&(h.toText=b),[c.name,h]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(b=>b.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=n.reduce((b,k)=>{const M=$(k,"extendMarkSchema",f);return{...b,...M?M(c):{}}},{}),h=Nc({...d,inclusive:Z($(c,"inclusive",f)),excludes:Z($(c,"excludes",f)),group:Z($(c,"group",f)),spanning:Z($(c,"spanning",f)),code:Z($(c,"code",f)),attrs:Object.fromEntries(u.map(b=>{var k;return[b.name,{default:(k=b==null?void 0:b.attribute)===null||k===void 0?void 0:k.default}]}))}),p=Z($(c,"parseHTML",f));p&&(h.parseDOM=p.map(b=>Ac(b,u)));const g=$(c,"renderHTML",f);return g&&(h.toDOM=b=>g({mark:b,HTMLAttributes:ua(b,u)})),[c.name,h]}));return new Bu({topNode:s,nodes:a,marks:l})}function Is(n,e){return e.nodes[n]||e.marks[n]||null}function Ic(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Wa(n,e){const t=nr.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const py=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-o))}),t};function ja(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Zo{constructor(e){this.find=e.find,this.handler=e.handler}}const my=(n,e)=>{if(ja(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Bi(n){var e;const{editor:t,from:r,to:i,text:o,rules:s,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const f=py(c)+o;return s.forEach(d=>{if(u)return;const h=my(f,d.find);if(!h)return;const p=l.state.tr,g=Yo({state:l.state,transaction:p}),b={from:r-(h[0].length-o.length),to:i},{commands:k,chain:M,can:D}=new Xo({editor:t,state:g});d.handler({state:g,range:b,match:h,commands:k,chain:M,can:D})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:o}),l.dispatch(p),u=!0)}),u}function gy(n){const{editor:e,rules:t}=n,r=new Ce({state:{init(){return null},apply(i,o,s){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=Wa(N.from(u),s.schema);const{from:f}=l,d=f+u.length;Bi({editor:e,from:f,to:d,text:u,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,a){return Bi({editor:e,from:o,to:s,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Bi({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Bi({editor:e,from:s.pos,to:s.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function yy(n){return Object.prototype.toString.call(n).slice(8,-1)}function _i(n){return yy(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function es(n,e){const t={...n};return _i(n)&&_i(e)&&Object.keys(e).forEach(r=>{_i(e[r])&&_i(n[r])?t[r]=es(n[r],e[r]):t[r]=e[r]}),t}class Rt{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Z($(this,"addOptions",{name:this.name}))),this.storage=Z($(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Rt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>es(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Rt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Z($(t,"addOptions",{name:t.name})),t.storage=Z($(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function by(n){return typeof n=="number"}class vy{constructor(e){this.find=e.find,this.handler=e.handler}}const wy=(n,e,t)=>{if(ja(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=n,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function ky(n){const{editor:e,state:t,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=n,{commands:l,chain:c,can:u}=new Xo({editor:e,state:t}),f=[];return t.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,p),b=Math.min(i,p+h.content.size),k=h.textBetween(g-p,b-p,void 0,"");wy(k,o.find,s).forEach(D=>{if(D.index===void 0)return;const v=g+D.index+1,S=v+D[0].length,T={from:t.tr.mapping.map(v),to:t.tr.mapping.map(S)},L=o.handler({state:t,range:T,match:D,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});f.push(L)})}),f.every(h=>h!==null)}let zi=null;const xy=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function Sy(n){const{editor:e,rules:t}=n;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:f,to:d,rule:h,pasteEvt:p})=>{const g=u.tr,b=Yo({state:u,transaction:g});if(!(!ky({editor:e,state:b,from:Math.max(f-1,0),to:d.b-1,rule:h,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return t.map(u=>new Ce({view(f){const d=p=>{var g;r=!((g=f.dom.parentElement)===null||g===void 0)&&g.contains(p.target)?f.dom.parentElement:null,r&&(zi=e)},h=()=>{zi&&(zi=null)};return window.addEventListener("dragstart",d),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",d),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,d)=>{if(o=r===f.dom.parentElement,a=d,!o){const h=zi;h&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(f,d)=>{var h;const p=(h=d.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=d,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(f,d,h)=>{const p=f[0],g=p.getMeta("uiEvent")==="paste"&&!i,b=p.getMeta("uiEvent")==="drop"&&!o,k=p.getMeta("applyPasteRules"),M=!!k;if(!g&&!b&&!M)return;if(M){let{text:S}=k;typeof S=="string"?S=S:S=Wa(N.from(S),h.schema);const{from:T}=k,L=T+S.length,F=xy(S);return l({rule:u,state:h,from:T,to:{b:L},pasteEvt:F})}const D=d.doc.content.findDiffStart(h.doc.content),v=d.doc.content.findDiffEnd(h.doc.content);if(!(!by(D)||!v||D===v.b))return l({rule:u,state:h,from:D,to:v,pasteEvt:s})}}))}function Ey(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class mr{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=mr.resolve(e),this.schema=hy(this.extensions,t),this.setupExtensions()}static resolve(e){const t=mr.sort(mr.flatten(e)),r=Ey(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=$(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=$(r,"priority")||100,s=$(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Is(t.name,this.schema)},i=$(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=mr.sort([...this.extensions].reverse()),r=[],i=[],o=t.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:Is(s.name,this.schema)},l=[],c=$(s,"addKeyboardShortcuts",a);let u={};if(s.type==="mark"&&$(s,"exitable",a)&&(u.ArrowRight=()=>Rt.handleExit({editor:e,mark:s})),c){const g=Object.fromEntries(Object.entries(c()).map(([b,k])=>[b,()=>k({editor:e})]));u={...u,...g}}const f=_g(u);l.push(f);const d=$(s,"addInputRules",a);Ic(s,e.options.enableInputRules)&&d&&r.push(...d());const h=$(s,"addPasteRules",a);Ic(s,e.options.enablePasteRules)&&h&&i.push(...h());const p=$(s,"addProseMirrorPlugins",a);if(p){const g=p();l.push(...g)}return l}).flat();return[gy({editor:e,rules:r}),...Sy({editor:e,rules:i}),...o]}get attributes(){return Wf(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Qo(this.extensions);return Object.fromEntries(t.filter(r=>!!$(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Ae(r.name,this.schema)},s=$(r,"addNodeView",o);if(!s)return[];const a=(l,c,u,f,d)=>{const h=ua(l,i);return s()({node:l,view:c,getPos:u,decorations:f,innerDecorations:d,editor:e,extension:r,HTMLAttributes:h})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Is(e.name,this.schema)};e.type==="mark"&&(!((t=Z($(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=$(e,"onBeforeCreate",r),o=$(e,"onCreate",r),s=$(e,"onUpdate",r),a=$(e,"onSelectionUpdate",r),l=$(e,"onTransaction",r),c=$(e,"onFocus",r),u=$(e,"onBlur",r),f=$(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}class Be{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Z($(this,"addOptions",{name:this.name}))),this.storage=Z($(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Be(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>es(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Be({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Z($(t,"addOptions",{name:t.name})),t.storage=Z($(t,"addStorage",{name:t.name,options:t.options})),t}}function Uf(n,e,t){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=t||{};let a="";return n.nodesBetween(r,i,(l,c,u,f)=>{var d;l.isBlock&&c>r&&(a+=o);const h=s==null?void 0:s[l.type.name];if(h)return u&&(a+=h({node:l,pos:c,parent:u,index:f,range:e})),!1;l.isText&&(a+=(d=l==null?void 0:l.text)===null||d===void 0?void 0:d.slice(Math.max(r,c)-c,i-c))}),a}function qf(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const Cy=Be.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ce({key:new je("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=qf(t);return Uf(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Ty=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),My=(n=!1)=>({commands:e})=>e.setContent("",n),Oy=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:o,$to:s})=>{n.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(l)),d=c.resolve(u.map(l+a.nodeSize)),h=f.blockRange(d);if(!h)return;const p=Dr(h);if(a.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,g)}(p||p===0)&&e.lift(h,p)})}),!0},Ay=n=>e=>n(e),Ny=()=>({state:n,dispatch:e})=>Yg(n,e),Iy=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,o=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new G(r.doc.resolve(s-1))),!0},Dy=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),l=i.after(o);n.delete(a,l).scrollIntoView()}return!0}return!1},Ry=n=>({tr:e,state:t,dispatch:r})=>{const i=Ae(n,t.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const l=o.before(s),c=o.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},Py=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},Ly=()=>({state:n,dispatch:e})=>zg(n,e),By=()=>({commands:n})=>n.keyboardShortcut("Enter"),_y=()=>({state:n,dispatch:e})=>Gg(n,e);function fo(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:ja(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function Kf(n,e,t={}){return n.find(r=>r.type===e&&fo(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function Dc(n,e,t={}){return!!Kf(n,e,t)}function Ua(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!Kf([...i.node.marks],e,t)))return;let s=i.index,a=n.start()+i.offset,l=s+1,c=a+i.node.nodeSize;for(;s>0&&Dc([...n.parent.child(s-1).marks],e,t);)s-=1,a-=n.parent.child(s).nodeSize;for(;l<n.parent.childCount&&Dc([...n.parent.child(l).marks],e,t);)c+=n.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function An(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const zy=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const o=An(n,r.schema),{doc:s,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const f=Ua(l,o,e);if(f&&f.from<=c&&f.to>=u){const d=G.create(s,f.from,f.to);t.setSelection(d)}}return!0},Fy=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function qa(n){return n instanceof G}function Ut(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Jf(n,e=null){if(!e)return null;const t=Y.atStart(n),r=Y.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,o=r.to;return e==="all"?G.create(n,Ut(0,i,o),Ut(n.content.size,i,o)):G.create(n,Ut(e,i,o),Ut(e,i,o))}function Hy(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Ka(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const $y=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(Ka()||Hy())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!qa(t.state.selection))return s(),!0;const a=Jf(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},Vy=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Wy=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Gf=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Gf(r)}return n};function Fi(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Gf(t)}function ho(n,e,t){if(n instanceof vn||n instanceof N)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return N.fromArray(n.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(n);return t.errorOnInvalidContent&&s.check(),s}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),ho("",e,t)}if(i){if(t.errorOnInvalidContent){let s=!1,a="";const l=new Bu({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?wn.fromSchema(l).parseSlice(Fi(n),t.parseOptions):wn.fromSchema(l).parse(Fi(n),t.parseOptions),t.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=wn.fromSchema(e);return t.slice?o.parseSlice(Fi(n),t.parseOptions).content:o.parse(Fi(n),t.parseOptions)}return ho("",e,t)}function jy(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Te||i instanceof Me))return;const o=n.mapping.maps[r];let s=0;o.forEach((a,l,c,u)=>{s===0&&(s=u)}),n.setSelection(Y.near(n.doc.resolve(s),t))}const Uy=n=>!("type"in n),qy=(n,e,t)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=ho(e,o.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(s=t.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(p){return o.emit("contentError",{editor:o,error:p,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},u=!0,f=!0;if((Uy(a)?a:[a]).forEach(p=>{p.check(),u=u?p.isText&&p.marks.length===0:!1,f=f?p.isBlock:!1}),l===c&&f){const{parent:p}=r.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,c+=1)}let h;if(u){if(Array.isArray(e))h=e.map(p=>p.text||"").join("");else if(e instanceof N){let p="";e.forEach(g=>{g.text&&(p+=g.text)}),h=p}else typeof e=="object"&&e&&e.text?h=e.text:h=e;r.insertText(h,l,c)}else h=a,r.replaceWith(l,c,h);t.updateSelection&&jy(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:h}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:h})}return!0},Ky=()=>({state:n,dispatch:e})=>Ug(n,e),Jy=()=>({state:n,dispatch:e})=>qg(n,e),Gy=()=>({state:n,dispatch:e})=>Fg(n,e),Yy=()=>({state:n,dispatch:e})=>Wg(n,e),Xy=()=>({state:n,dispatch:e,tr:t})=>{try{const r=jo(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Qy=()=>({state:n,dispatch:e,tr:t})=>{try{const r=jo(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Zy=()=>({state:n,dispatch:e})=>Hg(n,e),eb=()=>({state:n,dispatch:e})=>$g(n,e);function Yf(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function tb(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))Ka()||Yf()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),s&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const nb=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const o=tb(n).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function di(n,e,t={}){const{from:r,to:i,empty:o}=n.selection,s=e?Ae(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),p=Math.min(i,d+f.nodeSize);a.push({node:f,from:h,to:p})});const l=i-r,c=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>fo(f.node.attrs,t,{strict:!1}));return o?!!c.length:c.reduce((f,d)=>f+d.to-d.from,0)>=l}const rb=(n,e={})=>({state:t,dispatch:r})=>{const i=Ae(n,t.schema);return di(t,i,e)?Kg(t,r):!1},ib=()=>({state:n,dispatch:e})=>Xg(n,e),ob=n=>({state:e,dispatch:t})=>{const r=Ae(n,e.schema);return sy(r)(e,t)},sb=()=>({state:n,dispatch:e})=>Jg(n,e);function ts(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Rc(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const ab=(n,e)=>({tr:t,state:r,dispatch:i})=>{let o=null,s=null;const a=ts(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(o=Ae(n,r.schema)),a==="mark"&&(s=An(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&t.setNodeMarkup(u,void 0,Rc(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(f=>{s===f.type&&t.addMark(u,u+c.nodeSize,s.create(Rc(f.attrs,e)))})})}),!0):!1},lb=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),cb=()=>({tr:n,dispatch:e})=>{if(e){const t=new ut(n.doc);n.setSelection(t)}return!0},ub=()=>({state:n,dispatch:e})=>Vg(n,e),fb=()=>({state:n,dispatch:e})=>jg(n,e),db=()=>({state:n,dispatch:e})=>Qg(n,e),hb=()=>({state:n,dispatch:e})=>ty(n,e),pb=()=>({state:n,dispatch:e})=>ey(n,e);function fa(n,e,t={},r={}){return ho(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const mb=(n,e=!1,t={},r={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{var l,c;const{doc:u}=o;if(t.preserveWhitespace!=="full"){const f=fa(n,i.schema,t,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return s&&o.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},n,{parseOptions:t,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function Xf(n,e){const t=An(e,n.schema),{from:r,to:i,empty:o}=n.selection,s=[];o?(n.storedMarks&&s.push(...n.storedMarks),s.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function gb(n,e){const t=new Qu(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function yb(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function bb(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,o)=>{t(i)&&r.push({node:i,pos:o})}),r}function vb(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Ja(n){return e=>vb(e.$from,n)}function wb(n,e){const t={from:0,to:n.content.size};return Uf(n,t,e)}function kb(n,e){const t=Ae(e,n.schema),{from:r,to:i}=n.selection,o=[];n.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===t.name);return s?{...s.attrs}:{}}function Qf(n,e){const t=ts(typeof e=="string"?e:e.name,n.schema);return t==="node"?kb(n,e):t==="mark"?Xf(n,e):{}}function xb(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function Sb(n){const e=xb(n);return e.length===1?e:e.filter((t,r)=>!e.filter((o,s)=>s!==r).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function Eb(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=t[o];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const c=e.slice(o).map(a,-1),u=e.slice(o).map(l),f=e.invert().map(c,-1),d=e.invert().map(u);r.push({oldRange:{from:f,to:d},newRange:{from:c,to:u}})})}),Sb(r)}function Ga(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const o=t.resolve(n),s=Ua(o,i.type);s&&r.push({mark:i,...s})}):t.nodesBetween(n,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function Yi(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function da(n,e,t={}){const{empty:r,ranges:i}=n.selection,o=e?An(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>fo(f.attrs,t,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;n.doc.nodesBetween(h,p,(g,b)=>{if(!g.isText&&!g.marks.length)return;const k=Math.max(h,b),M=Math.min(p,b+g.nodeSize),D=M-k;s+=D,a.push(...g.marks.map(v=>({mark:v,from:k,to:M})))})}),s===0)return!1;const l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>fo(f.mark.attrs,t,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),c=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+c:l)>=s}function Cb(n,e,t={}){if(!e)return di(n,null,t)||da(n,null,t);const r=ts(e,n.schema);return r==="node"?di(n,e,t):r==="mark"?da(n,e,t):!1}function Pc(n,e){const{nodeExtensions:t}=Qo(e),r=t.find(s=>s.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Z($(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function ns(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(o=>{i!==!1&&(ns(o,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function Zf(n){return n instanceof U}function Tb(n,e,t){const i=n.state.doc.content.size,o=Ut(e,0,i),s=Ut(t,0,i),a=n.coordsAtPos(o),l=n.coordsAtPos(s,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),d=Math.max(a.right,l.right),h=d-f,p=u-c,k={top:c,bottom:u,left:f,right:d,width:h,height:p,x:f,y:c};return{...k,toJSON:()=>k}}function Mb(n,e,t){var r;const{selection:i}=e;let o=null;if(qa(i)&&(o=i.$cursor),o){const a=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,f,d)=>{if(c)return!1;if(u.isInline){const h=!d||d.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(t));c=h&&p}return!c}),c})}const Ob=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:o}=t,{empty:s,ranges:a}=o,l=An(n,r.schema);if(i)if(s){const c=Xf(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(d,h)=>{const p=Math.max(h,u),g=Math.min(h+d.nodeSize,f);d.marks.find(k=>k.type===l)?d.marks.forEach(k=>{l===k.type&&t.addMark(p,g,l.create({...k.attrs,...e}))}):t.addMark(p,g,l.create(e))})});return Mb(r,t,l)},Ab=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Nb=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const o=Ae(n,t.schema);let s;return t.selection.$anchor.sameParent(t.selection.$head)&&(s=t.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:a})=>Oc(o,{...s,...e})(t)?!0:a.clearNodes()).command(({state:a})=>Oc(o,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Ib=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Ut(n,0,r.content.size),o=U.create(r,i);e.setSelection(o)}return!0},Db=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:o}=typeof n=="number"?{from:n,to:n}:n,s=G.atStart(r).from,a=G.atEnd(r).to,l=Ut(i,s,a),c=Ut(o,s,a),u=G.create(r,l,c);e.setSelection(u)}return!0},Rb=n=>({state:e,dispatch:t})=>{const r=Ae(n,e.schema);return cy(r)(e,t)};function Lc(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Pb=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:l}=o,c=i.extensionManager.attributes,u=Yi(c,a.node().type.name,a.node().attrs);if(o instanceof U&&o.node.isBlock)return!a.parentOffset||!yr(s,a.pos)?!1:(r&&(n&&Lc(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,d=a.depth===0?void 0:yb(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&d?[{type:d,attrs:u}]:void 0,p=yr(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&yr(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:u}]:void 0),r){if(p&&(o instanceof G&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),d&&!f&&!a.parentOffset&&a.parent.type!==d)){const g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}n&&Lc(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},Lb=(n,e={})=>({tr:t,state:r,dispatch:i,editor:o})=>{var s;const a=Ae(n,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const d=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let k=N.empty;const M=l.index(-1)?1:l.index(-2)?2:3;for(let F=l.depth-M;F>=l.depth-3;F-=1)k=N.from(l.node(F).copy(k));const D=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,v={...Yi(d,l.node().type.name,l.node().attrs),...e},S=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(v))||void 0;k=k.append(N.from(a.createAndFill(null,S)||void 0));const T=l.before(l.depth-(M-1));t.replace(T,l.after(-D),new H(k,4-M,0));let L=-1;t.doc.nodesBetween(T,t.doc.content.size,(F,_)=>{if(L>-1)return!1;F.isTextblock&&F.content.size===0&&(L=_+1)}),L>-1&&t.setSelection(G.near(t.doc.resolve(L))),t.scrollIntoView()}return!0}const h=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,p={...Yi(d,f.type.name,f.attrs),...e},g={...Yi(d,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,c.pos);const b=h?[{type:a,attrs:p},{type:h,attrs:g}]:[{type:a,attrs:p}];if(!yr(t.doc,l.pos,2))return!1;if(i){const{selection:k,storedMarks:M}=r,{splittableMarks:D}=o.extensionManager,v=M||k.$to.parentOffset&&k.$from.marks();if(t.split(l.pos,2,b).scrollIntoView(),!v||!i)return!0;const S=v.filter(T=>D.includes(T.type.name));t.ensureMarks(S)}return!0},Ds=(n,e)=>{const t=Ja(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Mn(n.doc,t.pos)&&n.join(t.pos),!0},Rs=(n,e)=>{const t=Ja(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Mn(n.doc,r)&&n.join(r),!0},Bb=(n,e,t,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,h=Ae(n,s.schema),p=Ae(e,s.schema),{selection:g,storedMarks:b}=s,{$from:k,$to:M}=g,D=k.blockRange(M),v=b||g.$to.parentOffset&&g.$from.marks();if(!D)return!1;const S=Ja(T=>Pc(T.type.name,f))(g);if(D.depth>=1&&S&&D.depth-S.depth<=1){if(S.node.type===h)return c.liftListItem(p);if(Pc(S.node.type.name,f)&&h.validContent(S.node.content)&&a)return l().command(()=>(o.setNodeMarkup(S.pos,h),!0)).command(()=>Ds(o,h)).command(()=>Rs(o,h)).run()}return!t||!v||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Ds(o,h)).command(()=>Rs(o,h)).run():l().command(()=>{const T=u().wrapInList(h,r),L=v.filter(F=>d.includes(F.type.name));return o.ensureMarks(L),T?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Ds(o,h)).command(()=>Rs(o,h)).run()},_b=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=t,s=An(n,r.schema);return da(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},zb=(n,e,t={})=>({state:r,commands:i})=>{const o=Ae(n,r.schema),s=Ae(e,r.schema),a=di(r,o,t);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(s,l):i.setNode(o,{...l,...t})},Fb=(n,e={})=>({state:t,commands:r})=>{const i=Ae(n,t.schema);return di(t,i,e)?r.lift(i):r.wrapIn(i,e)},Hb=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){const s=n.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,n.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},$b=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},Vb=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=t,l=An(n,r.schema),{$from:c,empty:u,ranges:f}=a;if(!i)return!0;if(u&&s){let{from:d,to:h}=a;const p=(o=c.marks().find(b=>b.type===l))===null||o===void 0?void 0:o.attrs,g=Ua(c,l,p);g&&(d=g.from,h=g.to),t.removeMark(d,h,l)}else f.forEach(d=>{t.removeMark(d.$from.pos,d.$to.pos,l)});return t.removeStoredMark(l),!0},Wb=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let o=null,s=null;const a=ts(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(o=Ae(n,r.schema)),a==="mark"&&(s=An(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let f,d,h,p;t.selection.empty?r.doc.nodesBetween(c,u,(g,b)=>{o&&o===g.type&&(h=Math.max(b,c),p=Math.min(b+g.nodeSize,u),f=b,d=g)}):r.doc.nodesBetween(c,u,(g,b)=>{b<c&&o&&o===g.type&&(h=Math.max(b,c),p=Math.min(b+g.nodeSize,u),f=b,d=g),b>=c&&b<=u&&(o&&o===g.type&&t.setNodeMarkup(b,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(k=>{if(s===k.type){const M=Math.max(b,c),D=Math.min(b+g.nodeSize,u);t.addMark(M,D,s.create({...k.attrs,...e}))}}))}),d&&(f!==void 0&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),s&&d.marks.length&&d.marks.forEach(g=>{s===g.type&&t.addMark(h,p,s.create({...g.attrs,...e}))}))}),!0):!1},jb=(n,e={})=>({state:t,dispatch:r})=>{const i=Ae(n,t.schema);return ny(i,e)(t,r)},Ub=(n,e={})=>({state:t,dispatch:r})=>{const i=Ae(n,t.schema);return ry(i,e)(t,r)};var qb=Object.freeze({__proto__:null,blur:Ty,clearContent:My,clearNodes:Oy,command:Ay,createParagraphNear:Ny,cut:Iy,deleteCurrentNode:Dy,deleteNode:Ry,deleteRange:Py,deleteSelection:Ly,enter:By,exitCode:_y,extendMarkRange:zy,first:Fy,focus:$y,forEach:Vy,insertContent:Wy,insertContentAt:qy,joinBackward:Gy,joinDown:Jy,joinForward:Yy,joinItemBackward:Xy,joinItemForward:Qy,joinTextblockBackward:Zy,joinTextblockForward:eb,joinUp:Ky,keyboardShortcut:nb,lift:rb,liftEmptyBlock:ib,liftListItem:ob,newlineInCode:sb,resetAttributes:ab,scrollIntoView:lb,selectAll:cb,selectNodeBackward:ub,selectNodeForward:fb,selectParentNode:db,selectTextblockEnd:hb,selectTextblockStart:pb,setContent:mb,setMark:Ob,setMeta:Ab,setNode:Nb,setNodeSelection:Ib,setTextSelection:Db,sinkListItem:Rb,splitBlock:Pb,splitListItem:Lb,toggleList:Bb,toggleMark:_b,toggleNode:zb,toggleWrap:Fb,undoInputRule:Hb,unsetAllMarks:$b,unsetMark:Vb,updateAttributes:Wb,wrapIn:jb,wrapInList:Ub});const Kb=Be.create({name:"commands",addCommands(){return{...qb}}}),Jb=Be.create({name:"drop",addProseMirrorPlugins(){return[new Ce({key:new je("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),Gb=Be.create({name:"editable",addProseMirrorPlugins(){return[new Ce({key:new je("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Yb=Be.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Ce({key:new je("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Xb=Be.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:d,parent:h}=f,p=f.parent.isTextblock&&d>0?a.doc.resolve(d-1):f,g=p.parent.type.spec.isolating,b=f.pos-f.parentOffset,k=g&&p.parent.childCount===1?b===f.pos:Y.atStart(c).from===d;return!u||!h.type.isTextblock||h.textContent.length||!k||k&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Ka()||Yf()?o:i},addProseMirrorPlugins(){return[new Ce({key:new je("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(g=>g.getMeta("composition")))return;const r=n.some(g=>g.docChanged)&&!e.doc.eq(t.doc),i=n.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:a}=e.selection,l=Y.atStart(e.doc).from,c=Y.atEnd(e.doc).to;if(o||!(s===l&&a===c)||!ns(t.doc))return;const d=t.tr,h=Yo({state:t,transaction:d}),{commands:p}=new Xo({editor:this.editor,state:h});if(p.clearNodes(),!!d.steps.length)return d}})]}}),Qb=Be.create({name:"paste",addProseMirrorPlugins(){return[new Ce({key:new je("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),Zb=Be.create({name:"tabindex",addProseMirrorPlugins(){return[new Ce({key:new je("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Hn{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Hn(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Hn(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Hn(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,s=this.pos+r+(o?0:1),a=this.resolvedPos.doc.resolve(s);if(!i&&a.depth<=this.depth)return;const l=new Hn(a,this.editor,i,i?t:null);i&&(l.actualDepth=this.depth+1),e.push(new Hn(a,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const o=i.node.attrs,s=Object.keys(t);for(let a=0;a<s.length;a+=1){const l=s[a];if(o[l]!==t[l])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(t);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(l=>t[l]===s.node.attrs[l])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const ev=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function tv(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class nv extends uy{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=tv(ev,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=jf(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=t.filter(a=>!a.key.startsWith(s))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[Gb,Cy.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),Kb,Yb,Xb,Zb,Jb,Qb].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new mr(i,this)}createCommandManager(){this.commandManager=new Xo({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=fa(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),t=fa(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Jf(t,this.options.autofocus);this.view=new Og(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:pr.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Qf(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return Cb(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Wa(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return wb(this.state.doc,{blockSeparator:t,textSerializers:{...qf(this.schema),...r}})}get isEmpty(){return ns(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Hn(t,this)}get $doc(){return this.$pos(0)}}function Er(n){return new Zo({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Z(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=t.from+a.indexOf(s),u=c+s.length;if(Ga(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===n.type&&g!==h.mark.type)).filter(h=>h.to>c).length)return null;u<t.to&&o.delete(u,t.to),c>t.from&&o.delete(t.from+l,c);const d=t.from+l+s.length;o.addMark(t.from+l,d,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}function rv(n){return new Zo({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Z(n.getAttributes,void 0,r)||{},{tr:o}=e,s=t.from;let a=t.to;const l=n.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>a?u=a:a=u+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,s+r[0].length-1),o.replaceWith(u,a,l)}else if(r[0]){const c=n.type.isInline?s:s-1;o.insert(c,n.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a))}o.scrollIntoView()}})}function ha(n){return new Zo({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),o=Z(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function hi(n){return new Zo({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const o=Z(n.getAttributes,void 0,r)||{},s=e.tr.delete(t.from,t.to),l=s.doc.resolve(t.from).blockRange(),c=l&&Ia(l,n.type,o);if(!c)return null;if(s.wrap(l,c),n.keepMarks&&n.editor){const{selection:f,storedMarks:d}=e,{splittableMarks:h}=n.editor.extensionManager,p=d||f.$to.parentOffset&&f.$from.marks();if(p){const g=p.filter(b=>h.includes(b.type.name));s.ensureMarks(g)}}if(n.keepAttributes){const f=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,o).run()}const u=s.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&Mn(s.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&s.join(t.from-1)}})}class Ge{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Z($(this,"addOptions",{name:this.name}))),this.storage=Z($(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ge(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>es(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ge(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Z($(t,"addOptions",{name:t.name})),t.storage=Z($(t,"addStorage",{name:t.name,options:t.options})),t}}function Zn(n){return new vy({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const o=Z(n.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),f=t.from+l.indexOf(a),d=f+a.length;if(Ga(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(b=>b===n.type&&b!==p.mark.type)).filter(p=>p.to>f).length)return null;d<t.to&&s.delete(d,t.to),f>t.from&&s.delete(t.from+u,f),c=t.from+u+a.length,s.addMark(t.from+u,c,n.type.create(o||{})),s.removeStoredMark(n.type)}}})}const iv=/^\s*>\s$/,ov=Ge.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Ne(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[hi({find:iv,type:this.type})]}}),sv=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,av=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,lv=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,cv=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,uv=Rt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Ne(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Er({find:sv,type:this.type}),Er({find:lv,type:this.type})]},addPasteRules(){return[Zn({find:av,type:this.type}),Zn({find:cv,type:this.type})]}}),fv="listItem",Bc="textStyle",_c=/^\s*([-+*])\s$/,dv=Ge.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Ne(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fv,this.editor.getAttributes(Bc)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=hi({find:_c,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=hi({find:_c,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Bc),editor:this.editor})),[n]}}),hv=/(^|[^`])`([^`]+)`(?!`)/,pv=/(^|[^`])`([^`]+)`(?!`)/g,mv=Rt.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Ne(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Er({find:hv,type:this.type})]},addPasteRules(){return[Zn({find:pv,type:this.type})]}}),gv=/^```([a-z]+)?[\s\n]$/,yv=/^~~~([a-z]+)?[\s\n]$/,bv=Ge.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(t)).map(s=>s.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Ne(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:o}=t;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?n.commands.command(({tr:c})=>(c.setSelection(Y.near(r.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[ha({find:gv,type:this.type,getAttributes:n=>({language:n[1]})}),ha({find:yv,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Ce({key:new je("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!t||!o)return!1;const{tr:s,schema:a}=n.state,l=a.text(t.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(G.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),n.dispatch(s),!0}}})]}}),vv=Ge.create({name:"doc",topNode:!0,content:"block+"});function wv(n={}){return new Ce({view(e){return new kv(e,n)}})}class kv{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),f=a?u.bottom:u.top;a&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let a=i.getBoundingClientRect();o=a.left-i.scrollLeft,s=a.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!o){let s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Ku(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const xv=Be.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[wv(this.options)]}});class be extends Y{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return be.valid(r)?new be(r):Y.near(r)}content(){return H.empty}eq(e){return e instanceof be&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new be(e.resolve(t.pos))}getBookmark(){return new Ya(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Sv(e)||!Ev(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&be.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(t>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=t;let l=e.doc.resolve(i);if(be.valid(l))return l}for(;;){let s=t>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!U.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue e}break}o=s,i+=t;let a=e.doc.resolve(i);if(be.valid(a))return a}return null}}}be.prototype.visible=!1;be.findFrom=be.findGapCursorFrom;Y.jsonID("gapcursor",be);class Ya{constructor(e){this.pos=e}map(e){return new Ya(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return be.valid(t)?new be(t):Y.near(t)}}function Sv(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Ev(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Cv(){return new Ce({props:{decorations:Av,createSelectionBetween(n,e,t){return e.pos==t.pos&&be.valid(t)?new be(t):null},handleClick:Mv,handleKeyDown:Tv,handleDOMEvents:{beforeinput:Ov}}})}const Tv=Bf({ArrowLeft:Hi("horiz",-1),ArrowRight:Hi("horiz",1),ArrowUp:Hi("vert",-1),ArrowDown:Hi("vert",1)});function Hi(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof G){if(!o.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=be.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new be(c))),!0):!1}}function Mv(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!be.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&U.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new be(r))),!0)}function Ov(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof be))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=N.empty;for(let s=r.length-1;s>=0;s--)i=N.from(r[s].createAndFill(null,i));let o=n.state.tr.replace(t.pos,t.pos,new H(i,0,0));return o.setSelection(G.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function Av(n){if(!(n.selection instanceof be))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Se.create(n.doc,[tt.widget(n.selection.head,e,{key:"gapcursor"})])}const Nv=Be.create({name:"gapCursor",addProseMirrorPlugins(){return[Cv()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Z($(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),Iv=Ge.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Ne(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:o}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){const f=l.filter(d=>a.includes(d.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Dv=Ge.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Ne(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>ha({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var po=200,Oe=function(){};Oe.prototype.append=function(e){return e.length?(e=Oe.from(e),!this.length&&e||e.length<po&&this.leafAppend(e)||this.length<po&&e.leafPrepend(this)||this.appendInner(e)):this};Oe.prototype.prepend=function(e){return e.length?Oe.from(e).append(this):this};Oe.prototype.appendInner=function(e){return new Rv(this,e)};Oe.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Oe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Oe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Oe.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Oe.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},t,r),i};Oe.from=function(e){return e instanceof Oe?e:e&&e.length?new ed(e):Oe.empty};var ed=function(n){function e(r){n.call(this),this.values=r}e.__proto__=n,e.prototype=Object.create(n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=po)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=po)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Oe);Oe.empty=new ed([]);var Rv=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return e.__proto__=n,e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Oe);const Pv=500;class bt{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;t&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),o=i.maps.length),o--,u.push(f);return}if(i){u.push(new Et(f.map));let h=f.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new Et(p,void 0,void 0,c.length+u.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(f.step);if(f.selection)return a=i?f.selection.map(i.slice(o)):f.selection,l=new bt(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,t,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),d=new Et(e.mapping.maps[u],f,t),h;(h=l&&l.merge(d))&&(d=h,u?o.pop():a=a.slice(0,a.length-1)),o.push(d),t&&(s++,t=void 0),i||(l=d)}let c=s-r.depth;return c>Bv&&(a=Lv(a,c),s-=c),new bt(a.append(o),s)}remapping(e,t){let r=new gr;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,t),r}addMaps(e){return this.eventCount==0?this:new bt(this.items.append(e.map(t=>new Et(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=t;this.items.forEach(d=>{let h=o.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(d.step){let g=e.steps[h].invert(e.docs[h]),b=d.selection&&d.selection.map(o.slice(l+1,h));b&&a++,r.push(new Et(p,g,b))}else r.push(new Et(p))},i);let c=[];for(let d=t;d<s;d++)c.push(new Et(o.maps[d]));let u=this.items.slice(0,i).append(c).append(r),f=new bt(u,a);return f.emptyItemCount()>Pv&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(t.slice(r)),c=l&&l.getMap();if(r--,c&&t.appendMap(c,r),l){let u=s.selection&&s.selection.map(t.slice(r));u&&o++;let f=new Et(c.invert(),l,u),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else s.map&&r--},this.items.length,0),new bt(Oe.from(i.reverse()),o)}}bt.empty=new bt(Oe.empty,0);function Lv(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Et{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Et(t.getMap().invert(),t,this.selection)}}}class un{constructor(e,t,r,i,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const Bv=20;function _v(n,e,t,r){let i=t.getMeta(Jn),o;if(i)return i.historyState;t.getMeta(Hv)&&(n=new un(n.done,n.undone,null,0,-1));let s=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(s&&s.getMeta(Jn))return s.getMeta(Jn).redo?new un(n.done.addTransform(t,void 0,r,Xi(e)),n.undone,zc(t.mapping.maps),n.prevTime,n.prevComposition):new un(n.done,n.undone.addTransform(t,void 0,r,Xi(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!s&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!zv(t,n.prevRanges)),c=s?Ps(n.prevRanges,t.mapping):zc(t.mapping.maps);return new un(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,Xi(e)),bt.empty,c,t.time,a??n.prevComposition)}else return(o=t.getMeta("rebased"))?new un(n.done.rebased(t,o),n.undone.rebased(t,o),Ps(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new un(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Ps(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function zv(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function zc(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,o,s)=>e.push(o,s));return e}function Ps(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function Fv(n,e,t){let r=Xi(e),i=Jn.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),l=new un(t?a:o.remaining,t?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(Jn,{redo:t,historyState:l})}let Ls=!1,Fc=null;function Xi(n){let e=n.plugins;if(Fc!=e){Ls=!1,Fc=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Ls=!0;break}}return Ls}const Jn=new je("history"),Hv=new je("closeHistory");function $v(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Ce({key:Jn,state:{init(){return new un(bt.empty,bt.empty,null,0,-1)},apply(e,t,r){return _v(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?nd:r=="historyRedo"?rd:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function td(n,e){return(t,r)=>{let i=Jn.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let o=Fv(i,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const nd=td(!1,!0),rd=td(!0,!0),Vv=Be.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>nd(n,e),redo:()=>({state:n,dispatch:e})=>rd(n,e)}},addProseMirrorPlugins(){return[$v(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Wv=Ge.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Ne(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,o=n();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):Zf(t)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:a})=>{var l;if(a){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(G.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(U.create(s.doc,c.pos)):s.setSelection(G.create(s.doc,c.pos));else{const f=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();f&&(s.insert(u,f),s.setSelection(G.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[rv({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),jv=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Uv=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,qv=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Kv=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Jv=Rt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Ne(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Er({find:jv,type:this.type}),Er({find:qv,type:this.type})]},addPasteRules(){return[Zn({find:Uv,type:this.type}),Zn({find:Kv,type:this.type})]}}),Gv=Ge.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Ne(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Yv="listItem",Hc="textStyle",$c=/^(\d+)\.\s$/,Xv=Ge.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Ne(this.options.HTMLAttributes,t),0]:["ol",Ne(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Yv,this.editor.getAttributes(Hc)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=hi({find:$c,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=hi({find:$c,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Hc)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),Qv=Ge.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Ne(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Zv=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,e0=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,t0=Rt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Ne(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Er({find:Zv,type:this.type})]},addPasteRules(){return[Zn({find:e0,type:this.type})]}}),n0=Ge.create({name:"text",group:"inline"}),r0=Be.create({name:"starterKit",addExtensions(){var n,e,t,r,i,o,s,a,l,c,u,f,d,h,p,g,b,k;const M=[];return this.options.bold!==!1&&M.push(uv.configure((n=this.options)===null||n===void 0?void 0:n.bold)),this.options.blockquote!==!1&&M.push(ov.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&M.push(dv.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&M.push(mv.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&M.push(bv.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&M.push(vv.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&M.push(xv.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&M.push(Nv.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&M.push(Iv.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&M.push(Dv.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&M.push(Vv.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&M.push(Wv.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&M.push(Jv.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&M.push(Gv.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&M.push(Xv.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&M.push(Qv.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&M.push(t0.configure((b=this.options)===null||b===void 0?void 0:b.strike)),this.options.text!==!1&&M.push(n0.configure((k=this.options)===null||k===void 0?void 0:k.text)),M}}),i0=Rt.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Ne(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),o0="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",s0="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Cr=(n,e)=>{for(const t in e)n[t]=e[t];return n},pa="numeric",ma="ascii",ga="alpha",Jr="asciinumeric",jr="alphanumeric",ya="domain",id="emoji",a0="scheme",l0="slashscheme",Bs="whitespace";function c0(n,e){return n in e||(e[n]=[]),e[n]}function Wn(n,e,t){e[pa]&&(e[Jr]=!0,e[jr]=!0),e[ma]&&(e[Jr]=!0,e[ga]=!0),e[Jr]&&(e[jr]=!0),e[ga]&&(e[jr]=!0),e[jr]&&(e[ya]=!0),e[id]&&(e[ya]=!0);for(const r in e){const i=c0(r,t);i.indexOf(n)<0&&i.push(n)}}function u0(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function Ue(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Ue.groups={};Ue.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||Ue.groups;let i;return e&&e.j?i=e:(i=new Ue(e),t&&r&&Wn(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const o=n.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(n[s]);return i.tt(n[o-1],e,t,r)},tt(n,e,t,r){r=r||Ue.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const o=e;let s,a=i.go(n);if(a?(s=new Ue,Cr(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new Ue,o){if(r)if(s.t&&typeof s.t=="string"){const l=Cr(u0(s.t,r),t);Wn(o,l,r)}else t&&Wn(o,t,r);s.t=o}return i.j[n]=s,s}};const Q=(n,e,t,r,i)=>n.ta(e,t,r,i),ye=(n,e,t,r,i)=>n.tr(e,t,r,i),Vc=(n,e,t,r,i)=>n.ts(e,t,r,i),R=(n,e,t,r,i)=>n.tt(e,t,r,i),Vt="WORD",ba="UWORD",od="ASCIINUMERICAL",sd="ALPHANUMERICAL",pi="LOCALHOST",va="TLD",wa="UTLD",Qi="SCHEME",dr="SLASH_SCHEME",Xa="NUM",ka="WS",Qa="NL",Gr="OPENBRACE",Yr="CLOSEBRACE",mo="OPENBRACKET",go="CLOSEBRACKET",yo="OPENPAREN",bo="CLOSEPAREN",vo="OPENANGLEBRACKET",wo="CLOSEANGLEBRACKET",ko="FULLWIDTHLEFTPAREN",xo="FULLWIDTHRIGHTPAREN",So="LEFTCORNERBRACKET",Eo="RIGHTCORNERBRACKET",Co="LEFTWHITECORNERBRACKET",To="RIGHTWHITECORNERBRACKET",Mo="FULLWIDTHLESSTHAN",Oo="FULLWIDTHGREATERTHAN",Ao="AMPERSAND",Za="APOSTROPHE",No="ASTERISK",fn="AT",Io="BACKSLASH",Do="BACKTICK",Ro="CARET",hn="COLON",el="COMMA",Po="DOLLAR",Ct="DOT",Lo="EQUALS",tl="EXCLAMATION",at="HYPHEN",Xr="PERCENT",Bo="PIPE",_o="PLUS",zo="POUND",Qr="QUERY",nl="QUOTE",ad="FULLWIDTHMIDDLEDOT",rl="SEMI",Tt="SLASH",Zr="TILDE",Fo="UNDERSCORE",ld="EMOJI",Ho="SYM";var cd=Object.freeze({__proto__:null,WORD:Vt,UWORD:ba,ASCIINUMERICAL:od,ALPHANUMERICAL:sd,LOCALHOST:pi,TLD:va,UTLD:wa,SCHEME:Qi,SLASH_SCHEME:dr,NUM:Xa,WS:ka,NL:Qa,OPENBRACE:Gr,CLOSEBRACE:Yr,OPENBRACKET:mo,CLOSEBRACKET:go,OPENPAREN:yo,CLOSEPAREN:bo,OPENANGLEBRACKET:vo,CLOSEANGLEBRACKET:wo,FULLWIDTHLEFTPAREN:ko,FULLWIDTHRIGHTPAREN:xo,LEFTCORNERBRACKET:So,RIGHTCORNERBRACKET:Eo,LEFTWHITECORNERBRACKET:Co,RIGHTWHITECORNERBRACKET:To,FULLWIDTHLESSTHAN:Mo,FULLWIDTHGREATERTHAN:Oo,AMPERSAND:Ao,APOSTROPHE:Za,ASTERISK:No,AT:fn,BACKSLASH:Io,BACKTICK:Do,CARET:Ro,COLON:hn,COMMA:el,DOLLAR:Po,DOT:Ct,EQUALS:Lo,EXCLAMATION:tl,HYPHEN:at,PERCENT:Xr,PIPE:Bo,PLUS:_o,POUND:zo,QUERY:Qr,QUOTE:nl,FULLWIDTHMIDDLEDOT:ad,SEMI:rl,SLASH:Tt,TILDE:Zr,UNDERSCORE:Fo,EMOJI:ld,SYM:Ho});const Ht=/[a-z]/,Fr=new RegExp("\\p{L}","u"),_s=new RegExp("\\p{Emoji}","u"),$t=/\d/,zs=/\s/,Wc="\r",Fs=`
`,f0="",d0="",Hs="";let $i=null,Vi=null;function h0(n=[]){const e={};Ue.groups=e;const t=new Ue;$i==null&&($i=jc(o0)),Vi==null&&(Vi=jc(s0)),R(t,"'",Za),R(t,"{",Gr),R(t,"}",Yr),R(t,"[",mo),R(t,"]",go),R(t,"(",yo),R(t,")",bo),R(t,"<",vo),R(t,">",wo),R(t,"",ko),R(t,"",xo),R(t,"",So),R(t,"",Eo),R(t,"",Co),R(t,"",To),R(t,"",Mo),R(t,"",Oo),R(t,"&",Ao),R(t,"*",No),R(t,"@",fn),R(t,"`",Do),R(t,"^",Ro),R(t,":",hn),R(t,",",el),R(t,"$",Po),R(t,".",Ct),R(t,"=",Lo),R(t,"!",tl),R(t,"-",at),R(t,"%",Xr),R(t,"|",Bo),R(t,"+",_o),R(t,"#",zo),R(t,"?",Qr),R(t,'"',nl),R(t,"/",Tt),R(t,";",rl),R(t,"~",Zr),R(t,"_",Fo),R(t,"\\",Io),R(t,"",ad);const r=ye(t,$t,Xa,{[pa]:!0});ye(r,$t,r);const i=ye(r,Ht,od,{[Jr]:!0}),o=ye(r,Fr,sd,{[jr]:!0}),s=ye(t,Ht,Vt,{[ma]:!0});ye(s,$t,i),ye(s,Ht,s),ye(i,$t,i),ye(i,Ht,i);const a=ye(t,Fr,ba,{[ga]:!0});ye(a,Ht),ye(a,$t,o),ye(a,Fr,a),ye(o,$t,o),ye(o,Ht),ye(o,Fr,o);const l=R(t,Fs,Qa,{[Bs]:!0}),c=R(t,Wc,ka,{[Bs]:!0}),u=ye(t,zs,ka,{[Bs]:!0});R(t,Hs,u),R(c,Fs,l),R(c,Hs,u),ye(c,zs,u),R(u,Wc),R(u,Fs),ye(u,zs,u),R(u,Hs,u);const f=ye(t,_s,ld,{[id]:!0});R(f,"#"),ye(f,_s,f),R(f,f0,f);const d=R(f,d0);R(d,"#"),ye(d,_s,f);const h=[[Ht,s],[$t,i]],p=[[Ht,null],[Fr,a],[$t,o]];for(let g=0;g<$i.length;g++)sn(t,$i[g],va,Vt,h);for(let g=0;g<Vi.length;g++)sn(t,Vi[g],wa,ba,p);Wn(va,{tld:!0,ascii:!0},e),Wn(wa,{utld:!0,alpha:!0},e),sn(t,"file",Qi,Vt,h),sn(t,"mailto",Qi,Vt,h),sn(t,"http",dr,Vt,h),sn(t,"https",dr,Vt,h),sn(t,"ftp",dr,Vt,h),sn(t,"ftps",dr,Vt,h),Wn(Qi,{scheme:!0,ascii:!0},e),Wn(dr,{slashscheme:!0,ascii:!0},e),n=n.sort((g,b)=>g[0]>b[0]?1:-1);for(let g=0;g<n.length;g++){const b=n[g][0],M=n[g][1]?{[a0]:!0}:{[l0]:!0};b.indexOf("-")>=0?M[ya]=!0:Ht.test(b)?$t.test(b)?M[Jr]=!0:M[ma]=!0:M[pa]=!0,Vc(t,b,b,M)}return Vc(t,"localhost",pi,{ascii:!0}),t.jd=new Ue(Ho),{start:t,tokens:Cr({groups:e},cd)}}function ud(n,e){const t=p0(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=t.length,i=[];let o=0,s=0;for(;s<r;){let a=n,l=null,c=0,u=null,f=-1,d=-1;for(;s<r&&(l=a.go(t[s]));)a=l,a.accepts()?(f=0,d=0,u=a):f>=0&&(f+=t[s].length,d++),c+=t[s].length,o+=t[s].length,s++;o-=f,s-=d,c-=f,i.push({t:u.t,v:e.slice(o-c,o),s:o-c,e:o})}return i}function p0(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),o,s=i<55296||i>56319||r+1===t||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);e.push(s),r+=s.length}return e}function sn(n,e,t,r,i){let o;const s=e.length;for(let a=0;a<s-1;a++){const l=e[a];n.j[l]?o=n.j[l]:(o=new Ue(r),o.jr=i.slice(),n.j[l]=o),n=o}return o=new Ue(t),o.jr=i.slice(),n.j[e[s-1]]=o,o}function jc(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let o=0;for(;i.indexOf(n[r+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let s=parseInt(n.substring(r,r+o),10);s>0;s--)t.pop();r+=o}else t.push(n[r]),r++}return e}const mi={defaultProtocol:"http",events:null,format:Uc,formatHref:Uc,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function il(n,e=null){let t=Cr({},mi);n&&(t=Cr(t,n instanceof il?n.o:n));const r=t.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}il.prototype={o:mi,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:mi[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Uc(n){return n}function fd(n,e){this.t="token",this.v=n,this.tk=e}fd.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=mi.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),o=this.toFormattedString(n),s={},a=n.get("className",t,e),l=n.get("target",t,e),c=n.get("rel",t,e),u=n.getObj("attributes",t,e),f=n.getObj("events",t,e);return s.href=r,a&&(s.class=a),l&&(s.target=l),c&&(s.rel=c),u&&Cr(s,u),{tagName:i,attributes:s,content:o,eventListeners:f}}};function rs(n,e){class t extends fd{constructor(i,o){super(i,o),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const qc=rs("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Kc=rs("text"),m0=rs("nl"),Wi=rs("url",{isLink:!0,toHref(n=mi.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==pi&&n[1].t===hn}}),st=n=>new Ue(n);function g0({groups:n}){const e=n.domain.concat([Ao,No,fn,Io,Do,Ro,Po,Lo,at,Xa,Xr,Bo,_o,zo,Tt,Ho,Zr,Fo]),t=[hn,el,Ct,tl,Xr,Qr,nl,rl,vo,wo,Gr,Yr,go,mo,yo,bo,ko,xo,So,Eo,Co,To,Mo,Oo],r=[Ao,Za,No,Io,Do,Ro,Po,Lo,at,Gr,Yr,Xr,Bo,_o,zo,Qr,Tt,Ho,Zr,Fo],i=st(),o=R(i,Zr);Q(o,r,o),Q(o,n.domain,o);const s=st(),a=st(),l=st();Q(i,n.domain,s),Q(i,n.scheme,a),Q(i,n.slashscheme,l),Q(s,r,o),Q(s,n.domain,s);const c=R(s,fn);R(o,fn,c),R(a,fn,c),R(l,fn,c);const u=R(o,Ct);Q(u,r,o),Q(u,n.domain,o);const f=st();Q(c,n.domain,f),Q(f,n.domain,f);const d=R(f,Ct);Q(d,n.domain,f);const h=st(qc);Q(d,n.tld,h),Q(d,n.utld,h),R(c,pi,h);const p=R(f,at);R(p,at,p),Q(p,n.domain,f),Q(h,n.domain,f),R(h,Ct,d),R(h,at,p);const g=R(h,hn);Q(g,n.numeric,qc);const b=R(s,at),k=R(s,Ct);R(b,at,b),Q(b,n.domain,s),Q(k,r,o),Q(k,n.domain,s);const M=st(Wi);Q(k,n.tld,M),Q(k,n.utld,M),Q(M,n.domain,s),Q(M,r,o),R(M,Ct,k),R(M,at,b),R(M,fn,c);const D=R(M,hn),v=st(Wi);Q(D,n.numeric,v);const S=st(Wi),T=st();Q(S,e,S),Q(S,t,T),Q(T,e,S),Q(T,t,T),R(M,Tt,S),R(v,Tt,S);const L=R(a,hn),F=R(l,hn),_=R(F,Tt),W=R(_,Tt);Q(a,n.domain,s),R(a,Ct,k),R(a,at,b),Q(l,n.domain,s),R(l,Ct,k),R(l,at,b),Q(L,n.domain,S),R(L,Tt,S),R(L,Qr,S),Q(W,n.domain,S),Q(W,e,S),R(W,Tt,S);const q=[[Gr,Yr],[mo,go],[yo,bo],[vo,wo],[ko,xo],[So,Eo],[Co,To],[Mo,Oo]];for(let J=0;J<q.length;J++){const[X,fe]=q[J],ue=R(S,X);R(T,X,ue),R(ue,fe,S);const oe=st(Wi);Q(ue,e,oe);const ie=st();Q(ue,t),Q(oe,e,oe),Q(oe,t,ie),Q(ie,e,oe),Q(ie,t,ie),R(oe,fe,S),R(ie,fe,S)}return R(i,pi,M),R(i,Qa,m0),{start:i,tokens:cd}}function y0(n,e,t){let r=t.length,i=0,o=[],s=[];for(;i<r;){let a=n,l=null,c=null,u=0,f=null,d=-1;for(;i<r&&!(l=a.go(t[i].t));)s.push(t[i++]);for(;i<r&&(c=l||a.go(t[i].t));)l=null,a=c,a.accepts()?(d=0,f=a):d>=0&&d++,i++,u++;if(d<0)i-=u,i<r&&(s.push(t[i]),i++);else{s.length>0&&(o.push($s(Kc,e,s)),s=[]),i-=d,u-=d;const h=f.t,p=t.slice(i-u,i);o.push($s(h,e,p))}}return s.length>0&&o.push($s(Kc,e,s)),o}function $s(n,e,t){const r=t[0].s,i=t[t.length-1].e,o=e.slice(r,i);return new n(o,t)}const b0=typeof console<"u"&&console&&console.warn||(()=>{}),v0="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",de={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function w0(){return Ue.groups={},de.scanner=null,de.parser=null,de.tokenQueue=[],de.pluginQueue=[],de.customSchemes=[],de.initialized=!1,de}function Jc(n,e=!1){if(de.initialized&&b0(`linkifyjs: already initialized - will not register custom scheme "${n}" ${v0}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);de.customSchemes.push([n,e])}function k0(){de.scanner=h0(de.customSchemes);for(let n=0;n<de.tokenQueue.length;n++)de.tokenQueue[n][1]({scanner:de.scanner});de.parser=g0(de.scanner.tokens);for(let n=0;n<de.pluginQueue.length;n++)de.pluginQueue[n][1]({scanner:de.scanner,parser:de.parser});return de.initialized=!0,de}function ol(n){return de.initialized||k0(),y0(de.parser.start,n,ud(de.scanner.start,n))}ol.scan=ud;function dd(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new il(t),i=ol(n),o=[];for(let s=0;s<i.length;s++){const a=i[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}function x0(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function S0(n){return new Ce({key:new je("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(c=>c.docChanged)&&!t.doc.eq(r.doc),o=e.some(c=>c.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,a=gb(t.doc,[...e]);if(Eb(a).forEach(({newRange:c})=>{const u=bb(r.doc,c,h=>h.isTextblock);let f,d;if(u.length>1?(f=u[0],d=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(f=u[0],d=r.doc.textBetween(f.pos,c.to,void 0," ")),f&&d){const h=d.split(" ").filter(k=>k!=="");if(h.length<=0)return!1;const p=h[h.length-1],g=f.pos+d.lastIndexOf(p);if(!p)return!1;const b=ol(p).map(k=>k.toObject(n.defaultProtocol));if(!x0(b))return!1;b.filter(k=>k.isLink).map(k=>({...k,from:g+k.start+1,to:g+k.end+1})).filter(k=>r.schema.marks.code?!r.doc.rangeHasMark(k.from,k.to,r.schema.marks.code):!0).filter(k=>n.validate(k.value)).filter(k=>n.shouldAutoLink(k.value)).forEach(k=>{Ga(k.from,k.to,r.doc).some(M=>M.mark.type===n.type)||s.addMark(k.from,k.to,n.type.create({href:k.href}))})}}),!!s.steps.length)return s}})}function E0(n){return new Ce({key:new je("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let s=r.target;const a=[];for(;s.nodeName!=="DIV";)a.push(s),s=s.parentNode;if(!a.find(d=>d.nodeName==="A"))return!1;const l=Qf(e.state,n.type.name),c=r.target,u=(i=c==null?void 0:c.href)!==null&&i!==void 0?i:l.href,f=(o=c==null?void 0:c.target)!==null&&o!==void 0?o:l.target;return c&&u?(window.open(u,f),!0):!1}}})}function C0(n){return new Ce({key:new je("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:o}=i,{empty:s}=o;if(s)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=dd(a,{defaultProtocol:n.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:n.editor.commands.setMark(n.type,{href:l.href})}}})}const T0=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function _n(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(T0,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const M0=Rt.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){Jc(n);return}Jc(n.scheme,n.optionalSlashes)})},onDestroy(){w0()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!_n(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!_n(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!_n(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ne(this.options.HTMLAttributes,n),0]:["a",Ne(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!_n(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!_n(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Zn({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=dd(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:s=>!!_n(s,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(S0({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!_n(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(E0({type:this.type})),this.options.linkOnPaste&&n.push(C0({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),O0=Be.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ce({key:new je("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!t)return null;const o=this.editor.isEmpty;return n.descendants((s,a)=>{const l=r>=a&&r<=a+s.nodeSize,c=!s.isLeaf&&ns(s);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];o&&u.push(this.options.emptyEditorClass);const f=tt.node(a,a+s.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:a,hasAnchor:l}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),Se.create(n,i)}}})]}});var Ke="top",ht="bottom",pt="right",Je="left",sl="auto",ki=[Ke,ht,pt,Je],Tr="start",gi="end",A0="clippingParents",hd="viewport",Hr="popper",N0="reference",Gc=ki.reduce(function(n,e){return n.concat([e+"-"+Tr,e+"-"+gi])},[]),pd=[].concat(ki,[sl]).reduce(function(n,e){return n.concat([e,e+"-"+Tr,e+"-"+gi])},[]),I0="beforeRead",D0="read",R0="afterRead",P0="beforeMain",L0="main",B0="afterMain",_0="beforeWrite",z0="write",F0="afterWrite",H0=[I0,D0,R0,P0,L0,B0,_0,z0,F0];function Pt(n){return n?(n.nodeName||"").toLowerCase():null}function nt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function er(n){var e=nt(n).Element;return n instanceof e||n instanceof Element}function dt(n){var e=nt(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function al(n){if(typeof ShadowRoot>"u")return!1;var e=nt(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function $0(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];!dt(o)||!Pt(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function V0(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!dt(i)||!Pt(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const md={name:"applyStyles",enabled:!0,phase:"write",fn:$0,effect:V0,requires:["computeStyles"]};function Nt(n){return n.split("-")[0]}var Gn=Math.max,$o=Math.min,Mr=Math.round;function xa(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function gd(){return!/^((?!chrome|android).)*safari/i.test(xa())}function Or(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),i=1,o=1;e&&dt(n)&&(i=n.offsetWidth>0&&Mr(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&Mr(r.height)/n.offsetHeight||1);var s=er(n)?nt(n):window,a=s.visualViewport,l=!gd()&&t,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/o,f=r.width/i,d=r.height/o;return{width:f,height:d,top:u,right:c+f,bottom:u+d,left:c,x:c,y:u}}function ll(n){var e=Or(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function yd(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&al(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Gt(n){return nt(n).getComputedStyle(n)}function W0(n){return["table","td","th"].indexOf(Pt(n))>=0}function Nn(n){return((er(n)?n.ownerDocument:n.document)||window.document).documentElement}function is(n){return Pt(n)==="html"?n:n.assignedSlot||n.parentNode||(al(n)?n.host:null)||Nn(n)}function Yc(n){return!dt(n)||Gt(n).position==="fixed"?null:n.offsetParent}function j0(n){var e=/firefox/i.test(xa()),t=/Trident/i.test(xa());if(t&&dt(n)){var r=Gt(n);if(r.position==="fixed")return null}var i=is(n);for(al(i)&&(i=i.host);dt(i)&&["html","body"].indexOf(Pt(i))<0;){var o=Gt(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function xi(n){for(var e=nt(n),t=Yc(n);t&&W0(t)&&Gt(t).position==="static";)t=Yc(t);return t&&(Pt(t)==="html"||Pt(t)==="body"&&Gt(t).position==="static")?e:t||j0(n)||e}function cl(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ei(n,e,t){return Gn(n,$o(e,t))}function U0(n,e,t){var r=ei(n,e,t);return r>t?t:r}function bd(){return{top:0,right:0,bottom:0,left:0}}function vd(n){return Object.assign({},bd(),n)}function wd(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var q0=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,vd(typeof e!="number"?e:wd(e,ki))};function K0(n){var e,t=n.state,r=n.name,i=n.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,a=Nt(t.placement),l=cl(a),c=[Je,pt].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var f=q0(i.padding,t),d=ll(o),h=l==="y"?Ke:Je,p=l==="y"?ht:pt,g=t.rects.reference[u]+t.rects.reference[l]-s[l]-t.rects.popper[u],b=s[l]-t.rects.reference[l],k=xi(o),M=k?l==="y"?k.clientHeight||0:k.clientWidth||0:0,D=g/2-b/2,v=f[h],S=M-d[u]-f[p],T=M/2-d[u]/2+D,L=ei(v,T,S),F=l;t.modifiersData[r]=(e={},e[F]=L,e.centerOffset=L-T,e)}}function J0(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||yd(e.elements.popper,i)&&(e.elements.arrow=i))}const G0={name:"arrow",enabled:!0,phase:"main",fn:K0,effect:J0,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ar(n){return n.split("-")[1]}var Y0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function X0(n,e){var t=n.x,r=n.y,i=e.devicePixelRatio||1;return{x:Mr(t*i)/i||0,y:Mr(r*i)/i||0}}function Xc(n){var e,t=n.popper,r=n.popperRect,i=n.placement,o=n.variation,s=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,f=n.isFixed,d=s.x,h=d===void 0?0:d,p=s.y,g=p===void 0?0:p,b=typeof u=="function"?u({x:h,y:g}):{x:h,y:g};h=b.x,g=b.y;var k=s.hasOwnProperty("x"),M=s.hasOwnProperty("y"),D=Je,v=Ke,S=window;if(c){var T=xi(t),L="clientHeight",F="clientWidth";if(T===nt(t)&&(T=Nn(t),Gt(T).position!=="static"&&a==="absolute"&&(L="scrollHeight",F="scrollWidth")),T=T,i===Ke||(i===Je||i===pt)&&o===gi){v=ht;var _=f&&T===S&&S.visualViewport?S.visualViewport.height:T[L];g-=_-r.height,g*=l?1:-1}if(i===Je||(i===Ke||i===ht)&&o===gi){D=pt;var W=f&&T===S&&S.visualViewport?S.visualViewport.width:T[F];h-=W-r.width,h*=l?1:-1}}var q=Object.assign({position:a},c&&Y0),J=u===!0?X0({x:h,y:g},nt(t)):{x:h,y:g};if(h=J.x,g=J.y,l){var X;return Object.assign({},q,(X={},X[v]=M?"0":"",X[D]=k?"0":"",X.transform=(S.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",X))}return Object.assign({},q,(e={},e[v]=M?g+"px":"",e[D]=k?h+"px":"",e.transform="",e))}function Q0(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,o=t.adaptive,s=o===void 0?!0:o,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:Nt(e.placement),variation:Ar(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Xc(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Xc(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Z0={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Q0,data:{}};var ji={passive:!0};function ew(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=nt(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",t.update,ji)}),a&&l.addEventListener("resize",t.update,ji),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",t.update,ji)}),a&&l.removeEventListener("resize",t.update,ji)}}const tw={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ew,data:{}};var nw={left:"right",right:"left",bottom:"top",top:"bottom"};function Zi(n){return n.replace(/left|right|bottom|top/g,function(e){return nw[e]})}var rw={start:"end",end:"start"};function Qc(n){return n.replace(/start|end/g,function(e){return rw[e]})}function ul(n){var e=nt(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function fl(n){return Or(Nn(n)).left+ul(n).scrollLeft}function iw(n,e){var t=nt(n),r=Nn(n),i=t.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=gd();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+fl(n),y:l}}function ow(n){var e,t=Nn(n),r=ul(n),i=(e=n.ownerDocument)==null?void 0:e.body,o=Gn(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Gn(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+fl(n),l=-r.scrollTop;return Gt(i||t).direction==="rtl"&&(a+=Gn(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function dl(n){var e=Gt(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function kd(n){return["html","body","#document"].indexOf(Pt(n))>=0?n.ownerDocument.body:dt(n)&&dl(n)?n:kd(is(n))}function ti(n,e){var t;e===void 0&&(e=[]);var r=kd(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),o=nt(r),s=i?[o].concat(o.visualViewport||[],dl(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(ti(is(s)))}function Sa(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function sw(n,e){var t=Or(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function Zc(n,e,t){return e===hd?Sa(iw(n,t)):er(e)?sw(e,t):Sa(ow(Nn(n)))}function aw(n){var e=ti(is(n)),t=["absolute","fixed"].indexOf(Gt(n).position)>=0,r=t&&dt(n)?xi(n):n;return er(r)?e.filter(function(i){return er(i)&&yd(i,r)&&Pt(i)!=="body"}):[]}function lw(n,e,t,r){var i=e==="clippingParents"?aw(n):[].concat(e),o=[].concat(i,[t]),s=o[0],a=o.reduce(function(l,c){var u=Zc(n,c,r);return l.top=Gn(u.top,l.top),l.right=$o(u.right,l.right),l.bottom=$o(u.bottom,l.bottom),l.left=Gn(u.left,l.left),l},Zc(n,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function xd(n){var e=n.reference,t=n.element,r=n.placement,i=r?Nt(r):null,o=r?Ar(r):null,s=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(i){case Ke:l={x:s,y:e.y-t.height};break;case ht:l={x:s,y:e.y+e.height};break;case pt:l={x:e.x+e.width,y:a};break;case Je:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?cl(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case Tr:l[c]=l[c]-(e[u]/2-t[u]/2);break;case gi:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function yi(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,o=t.strategy,s=o===void 0?n.strategy:o,a=t.boundary,l=a===void 0?A0:a,c=t.rootBoundary,u=c===void 0?hd:c,f=t.elementContext,d=f===void 0?Hr:f,h=t.altBoundary,p=h===void 0?!1:h,g=t.padding,b=g===void 0?0:g,k=vd(typeof b!="number"?b:wd(b,ki)),M=d===Hr?N0:Hr,D=n.rects.popper,v=n.elements[p?M:d],S=lw(er(v)?v:v.contextElement||Nn(n.elements.popper),l,u,s),T=Or(n.elements.reference),L=xd({reference:T,element:D,strategy:"absolute",placement:i}),F=Sa(Object.assign({},D,L)),_=d===Hr?F:T,W={top:S.top-_.top+k.top,bottom:_.bottom-S.bottom+k.bottom,left:S.left-_.left+k.left,right:_.right-S.right+k.right},q=n.modifiersData.offset;if(d===Hr&&q){var J=q[i];Object.keys(W).forEach(function(X){var fe=[pt,ht].indexOf(X)>=0?1:-1,ue=[Ke,ht].indexOf(X)>=0?"y":"x";W[X]+=J[ue]*fe})}return W}function cw(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,o=t.rootBoundary,s=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?pd:l,u=Ar(r),f=u?a?Gc:Gc.filter(function(p){return Ar(p)===u}):ki,d=f.filter(function(p){return c.indexOf(p)>=0});d.length===0&&(d=f);var h=d.reduce(function(p,g){return p[g]=yi(n,{placement:g,boundary:i,rootBoundary:o,padding:s})[Nt(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}function uw(n){if(Nt(n)===sl)return[];var e=Zi(n);return[Qc(n),e,Qc(e)]}function fw(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,o=i===void 0?!0:i,s=t.altAxis,a=s===void 0?!0:s,l=t.fallbackPlacements,c=t.padding,u=t.boundary,f=t.rootBoundary,d=t.altBoundary,h=t.flipVariations,p=h===void 0?!0:h,g=t.allowedAutoPlacements,b=e.options.placement,k=Nt(b),M=k===b,D=l||(M||!p?[Zi(b)]:uw(b)),v=[b].concat(D).reduce(function(mt,Xe){return mt.concat(Nt(Xe)===sl?cw(e,{placement:Xe,boundary:u,rootBoundary:f,padding:c,flipVariations:p,allowedAutoPlacements:g}):Xe)},[]),S=e.rects.reference,T=e.rects.popper,L=new Map,F=!0,_=v[0],W=0;W<v.length;W++){var q=v[W],J=Nt(q),X=Ar(q)===Tr,fe=[Ke,ht].indexOf(J)>=0,ue=fe?"width":"height",oe=yi(e,{placement:q,boundary:u,rootBoundary:f,altBoundary:d,padding:c}),ie=fe?X?pt:Je:X?ht:Ke;S[ue]>T[ue]&&(ie=Zi(ie));var pe=Zi(ie),He=[];if(o&&He.push(oe[J]<=0),a&&He.push(oe[ie]<=0,oe[pe]<=0),He.every(function(mt){return mt})){_=q,F=!1;break}L.set(q,He)}if(F)for(var rt=p?3:1,Ie=function(Xe){var gt=v.find(function(Yt){var yt=L.get(Yt);if(yt)return yt.slice(0,Xe).every(function(Xt){return Xt})});if(gt)return _=gt,"break"},Ye=rt;Ye>0;Ye--){var _t=Ie(Ye);if(_t==="break")break}e.placement!==_&&(e.modifiersData[r]._skip=!0,e.placement=_,e.reset=!0)}}const dw={name:"flip",enabled:!0,phase:"main",fn:fw,requiresIfExists:["offset"],data:{_skip:!1}};function eu(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function tu(n){return[Ke,pt,ht,Je].some(function(e){return n[e]>=0})}function hw(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=yi(e,{elementContext:"reference"}),a=yi(e,{altBoundary:!0}),l=eu(s,r),c=eu(a,i,o),u=tu(l),f=tu(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const pw={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hw};function mw(n,e,t){var r=Nt(n),i=[Je,Ke].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Je,pt].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function gw(n){var e=n.state,t=n.options,r=n.name,i=t.offset,o=i===void 0?[0,0]:i,s=pd.reduce(function(u,f){return u[f]=mw(f,e.rects,o),u},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}const yw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:gw};function bw(n){var e=n.state,t=n.name;e.modifiersData[t]=xd({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const vw={name:"popperOffsets",enabled:!0,phase:"read",fn:bw,data:{}};function ww(n){return n==="x"?"y":"x"}function kw(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,o=i===void 0?!0:i,s=t.altAxis,a=s===void 0?!1:s,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,f=t.padding,d=t.tether,h=d===void 0?!0:d,p=t.tetherOffset,g=p===void 0?0:p,b=yi(e,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),k=Nt(e.placement),M=Ar(e.placement),D=!M,v=cl(k),S=ww(v),T=e.modifiersData.popperOffsets,L=e.rects.reference,F=e.rects.popper,_=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,W=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),q=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,J={x:0,y:0};if(T){if(o){var X,fe=v==="y"?Ke:Je,ue=v==="y"?ht:pt,oe=v==="y"?"height":"width",ie=T[v],pe=ie+b[fe],He=ie-b[ue],rt=h?-F[oe]/2:0,Ie=M===Tr?L[oe]:F[oe],Ye=M===Tr?-F[oe]:-L[oe],_t=e.elements.arrow,mt=h&&_t?ll(_t):{width:0,height:0},Xe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:bd(),gt=Xe[fe],Yt=Xe[ue],yt=ei(0,L[oe],mt[oe]),Xt=D?L[oe]/2-rt-yt-gt-W.mainAxis:Ie-yt-gt-W.mainAxis,kt=D?-L[oe]/2+rt+yt+Yt+W.mainAxis:Ye+yt+Yt+W.mainAxis,Qt=e.elements.arrow&&xi(e.elements.arrow),rr=Qt?v==="y"?Qt.clientTop||0:Qt.clientLeft||0:0,In=(X=q==null?void 0:q[v])!=null?X:0,ir=ie+Xt-In-rr,Qe=ie+kt-In,Dn=ei(h?$o(pe,ir):pe,ie,h?Gn(He,Qe):He);T[v]=Dn,J[v]=Dn-ie}if(a){var Zt,zt=v==="x"?Ke:Je,en=v==="x"?ht:pt,Ze=T[S],it=S==="y"?"height":"width",tn=Ze+b[zt],xt=Ze-b[en],nn=[Ke,Je].indexOf(k)!==-1,Rn=(Zt=q==null?void 0:q[S])!=null?Zt:0,Pn=nn?tn:Ze-L[it]-F[it]-Rn+W.altAxis,Ln=nn?Ze+L[it]+F[it]-Rn-W.altAxis:xt,Bn=h&&nn?U0(Pn,Ze,Ln):ei(h?Pn:tn,Ze,h?Ln:xt);T[S]=Bn,J[S]=Bn-Ze}e.modifiersData[r]=J}}const xw={name:"preventOverflow",enabled:!0,phase:"main",fn:kw,requiresIfExists:["offset"]};function Sw(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Ew(n){return n===nt(n)||!dt(n)?ul(n):Sw(n)}function Cw(n){var e=n.getBoundingClientRect(),t=Mr(e.width)/n.offsetWidth||1,r=Mr(e.height)/n.offsetHeight||1;return t!==1||r!==1}function Tw(n,e,t){t===void 0&&(t=!1);var r=dt(e),i=dt(e)&&Cw(e),o=Nn(e),s=Or(n,i,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((Pt(e)!=="body"||dl(o))&&(a=Ew(e)),dt(e)?(l=Or(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=fl(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Mw(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function i(o){t.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||i(o)}),r}function Ow(n){var e=Mw(n);return H0.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function Aw(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function Nw(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var nu={placement:"bottom",modifiers:[],strategy:"absolute"};function ru(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Iw(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,o=i===void 0?nu:i;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},nu,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],d=!1,h={state:u,setOptions:function(k){var M=typeof k=="function"?k(u.options):k;g(),u.options=Object.assign({},o,u.options,M),u.scrollParents={reference:er(a)?ti(a):a.contextElement?ti(a.contextElement):[],popper:ti(l)};var D=Ow(Nw([].concat(r,u.options.modifiers)));return u.orderedModifiers=D.filter(function(v){return v.enabled}),p(),h.update()},forceUpdate:function(){if(!d){var k=u.elements,M=k.reference,D=k.popper;if(ru(M,D)){u.rects={reference:Tw(M,xi(D),u.options.strategy==="fixed"),popper:ll(D)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(W){return u.modifiersData[W.name]=Object.assign({},W.data)});for(var v=0;v<u.orderedModifiers.length;v++){if(u.reset===!0){u.reset=!1,v=-1;continue}var S=u.orderedModifiers[v],T=S.fn,L=S.options,F=L===void 0?{}:L,_=S.name;typeof T=="function"&&(u=T({state:u,options:F,name:_,instance:h})||u)}}}},update:Aw(function(){return new Promise(function(b){h.forceUpdate(),b(u)})}),destroy:function(){g(),d=!0}};if(!ru(a,l))return h;h.setOptions(c).then(function(b){!d&&c.onFirstUpdate&&c.onFirstUpdate(b)});function p(){u.orderedModifiers.forEach(function(b){var k=b.name,M=b.options,D=M===void 0?{}:M,v=b.effect;if(typeof v=="function"){var S=v({state:u,name:k,instance:h,options:D}),T=function(){};f.push(S||T)}})}function g(){f.forEach(function(b){return b()}),f=[]}return h}}var Dw=[tw,vw,Z0,md,yw,dw,xw,G0,pw],Rw=Iw({defaultModifiers:Dw}),Pw="tippy-box",Sd="tippy-content",Lw="tippy-backdrop",Ed="tippy-arrow",Cd="tippy-svg-arrow",zn={passive:!0,capture:!0},Td=function(){return document.body};function Vs(n,e,t){if(Array.isArray(n)){var r=n[e];return r??(Array.isArray(t)?t[e]:t)}return n}function hl(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function Md(n,e){return typeof n=="function"?n.apply(void 0,e):n}function iu(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function Bw(n){return n.split(/\s+/).filter(Boolean)}function hr(n){return[].concat(n)}function ou(n,e){n.indexOf(e)===-1&&n.push(e)}function _w(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function zw(n){return n.split("-")[0]}function Vo(n){return[].slice.call(n)}function su(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function ni(){return document.createElement("div")}function ss(n){return["Element","Fragment"].some(function(e){return hl(n,e)})}function Fw(n){return hl(n,"NodeList")}function Hw(n){return hl(n,"MouseEvent")}function $w(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function Vw(n){return ss(n)?[n]:Fw(n)?Vo(n):Array.isArray(n)?n:Vo(document.querySelectorAll(n))}function Ws(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function au(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function Ww(n){var e,t=hr(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function jw(n,e){var t=e.clientX,r=e.clientY;return n.every(function(i){var o=i.popperRect,s=i.popperState,a=i.props,l=a.interactiveBorder,c=zw(s.placement),u=s.modifiersData.offset;if(!u)return!0;var f=c==="bottom"?u.top.y:0,d=c==="top"?u.bottom.y:0,h=c==="right"?u.left.x:0,p=c==="left"?u.right.x:0,g=o.top-r+f>l,b=r-o.bottom-d>l,k=o.left-t+h>l,M=t-o.right-p>l;return g||b||k||M})}function js(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){n[r](i,t)})}function lu(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var Ot={isTouch:!1},cu=0;function Uw(){Ot.isTouch||(Ot.isTouch=!0,window.performance&&document.addEventListener("mousemove",Od))}function Od(){var n=performance.now();n-cu<20&&(Ot.isTouch=!1,document.removeEventListener("mousemove",Od)),cu=n}function qw(){var n=document.activeElement;if($w(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function Kw(){document.addEventListener("touchstart",Uw,zn),window.addEventListener("blur",qw)}var Jw=typeof window<"u"&&typeof document<"u",Gw=Jw?!!window.msCrypto:!1,Yw={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Xw={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},vt=Object.assign({appendTo:Td,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Yw,Xw),Qw=Object.keys(vt),Zw=function(e){var t=Object.keys(e);t.forEach(function(r){vt[r]=e[r]})};function Ad(n){var e=n.plugins||[],t=e.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var a;r[o]=n[o]!==void 0?n[o]:(a=vt[o])!=null?a:s}return r},{});return Object.assign({},n,t)}function e1(n,e){var t=e?Object.keys(Ad(Object.assign({},vt,{plugins:e}))):Qw,r=t.reduce(function(i,o){var s=(n.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function uu(n,e){var t=Object.assign({},e,{content:Md(e.content,[n])},e.ignoreAttributes?{}:e1(n,e.plugins));return t.aria=Object.assign({},vt.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var t1=function(){return"innerHTML"};function Ea(n,e){n[t1()]=e}function fu(n){var e=ni();return n===!0?e.className=Ed:(e.className=Cd,ss(n)?e.appendChild(n):Ea(e,n)),e}function du(n,e){ss(e.content)?(Ea(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Ea(n,e.content):n.textContent=e.content)}function Ca(n){var e=n.firstElementChild,t=Vo(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(Sd)}),arrow:t.find(function(r){return r.classList.contains(Ed)||r.classList.contains(Cd)}),backdrop:t.find(function(r){return r.classList.contains(Lw)})}}function Nd(n){var e=ni(),t=ni();t.className=Pw,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=ni();r.className=Sd,r.setAttribute("data-state","hidden"),du(r,n.props),e.appendChild(t),t.appendChild(r),i(n.props,n.props);function i(o,s){var a=Ca(e),l=a.box,c=a.content,u=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&du(c,n.props),s.arrow?u?o.arrow!==s.arrow&&(l.removeChild(u),l.appendChild(fu(s.arrow))):l.appendChild(fu(s.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:i}}Nd.$$tippy=!0;var n1=1,Ui=[],Us=[];function r1(n,e){var t=uu(n,Object.assign({},vt,Ad(su(e)))),r,i,o,s=!1,a=!1,l=!1,c=!1,u,f,d,h=[],p=iu(ir,t.interactiveDebounce),g,b=n1++,k=null,M=_w(t.plugins),D={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},v={id:b,reference:n,popper:ni(),popperInstance:k,props:t,state:D,plugins:M,clearDelayTimeouts:Pn,setProps:Ln,setContent:Bn,show:Ei,hide:Ci,hideWithInteractivity:Ti,enable:nn,disable:Rn,unmount:Mi,destroy:Oi};if(!t.render)return v;var S=t.render(v),T=S.popper,L=S.onUpdate;T.setAttribute("data-tippy-root",""),T.id="tippy-"+v.id,v.popper=T,n._tippy=v,T._tippy=v;var F=M.map(function(O){return O.fn(v)}),_=n.hasAttribute("aria-expanded");return Qt(),rt(),ie(),pe("onCreate",[v]),t.showOnCreate&&tn(),T.addEventListener("mouseenter",function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()}),T.addEventListener("mouseleave",function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&fe().addEventListener("mousemove",p)}),v;function W(){var O=v.props.touch;return Array.isArray(O)?O:[O,0]}function q(){return W()[0]==="hold"}function J(){var O;return!!((O=v.props.render)!=null&&O.$$tippy)}function X(){return g||n}function fe(){var O=X().parentNode;return O?Ww(O):document}function ue(){return Ca(T)}function oe(O){return v.state.isMounted&&!v.state.isVisible||Ot.isTouch||u&&u.type==="focus"?0:Vs(v.props.delay,O?0:1,vt.delay)}function ie(O){O===void 0&&(O=!1),T.style.pointerEvents=v.props.interactive&&!O?"":"none",T.style.zIndex=""+v.props.zIndex}function pe(O,V,K){if(K===void 0&&(K=!0),F.forEach(function(te){te[O]&&te[O].apply(te,V)}),K){var re;(re=v.props)[O].apply(re,V)}}function He(){var O=v.props.aria;if(O.content){var V="aria-"+O.content,K=T.id,re=hr(v.props.triggerTarget||n);re.forEach(function(te){var De=te.getAttribute(V);if(v.state.isVisible)te.setAttribute(V,De?De+" "+K:K);else{var we=De&&De.replace(K,"").trim();we?te.setAttribute(V,we):te.removeAttribute(V)}})}}function rt(){if(!(_||!v.props.aria.expanded)){var O=hr(v.props.triggerTarget||n);O.forEach(function(V){v.props.interactive?V.setAttribute("aria-expanded",v.state.isVisible&&V===X()?"true":"false"):V.removeAttribute("aria-expanded")})}}function Ie(){fe().removeEventListener("mousemove",p),Ui=Ui.filter(function(O){return O!==p})}function Ye(O){if(!(Ot.isTouch&&(l||O.type==="mousedown"))){var V=O.composedPath&&O.composedPath()[0]||O.target;if(!(v.props.interactive&&lu(T,V))){if(hr(v.props.triggerTarget||n).some(function(K){return lu(K,V)})){if(Ot.isTouch||v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else pe("onClickOutside",[v,O]);v.props.hideOnClick===!0&&(v.clearDelayTimeouts(),v.hide(),a=!0,setTimeout(function(){a=!1}),v.state.isMounted||gt())}}}function _t(){l=!0}function mt(){l=!1}function Xe(){var O=fe();O.addEventListener("mousedown",Ye,!0),O.addEventListener("touchend",Ye,zn),O.addEventListener("touchstart",mt,zn),O.addEventListener("touchmove",_t,zn)}function gt(){var O=fe();O.removeEventListener("mousedown",Ye,!0),O.removeEventListener("touchend",Ye,zn),O.removeEventListener("touchstart",mt,zn),O.removeEventListener("touchmove",_t,zn)}function Yt(O,V){Xt(O,function(){!v.state.isVisible&&T.parentNode&&T.parentNode.contains(T)&&V()})}function yt(O,V){Xt(O,V)}function Xt(O,V){var K=ue().box;function re(te){te.target===K&&(js(K,"remove",re),V())}if(O===0)return V();js(K,"remove",f),js(K,"add",re),f=re}function kt(O,V,K){K===void 0&&(K=!1);var re=hr(v.props.triggerTarget||n);re.forEach(function(te){te.addEventListener(O,V,K),h.push({node:te,eventType:O,handler:V,options:K})})}function Qt(){q()&&(kt("touchstart",In,{passive:!0}),kt("touchend",Qe,{passive:!0})),Bw(v.props.trigger).forEach(function(O){if(O!=="manual")switch(kt(O,In),O){case"mouseenter":kt("mouseleave",Qe);break;case"focus":kt(Gw?"focusout":"blur",Dn);break;case"focusin":kt("focusout",Dn);break}})}function rr(){h.forEach(function(O){var V=O.node,K=O.eventType,re=O.handler,te=O.options;V.removeEventListener(K,re,te)}),h=[]}function In(O){var V,K=!1;if(!(!v.state.isEnabled||Zt(O)||a)){var re=((V=u)==null?void 0:V.type)==="focus";u=O,g=O.currentTarget,rt(),!v.state.isVisible&&Hw(O)&&Ui.forEach(function(te){return te(O)}),O.type==="click"&&(v.props.trigger.indexOf("mouseenter")<0||s)&&v.props.hideOnClick!==!1&&v.state.isVisible?K=!0:tn(O),O.type==="click"&&(s=!K),K&&!re&&xt(O)}}function ir(O){var V=O.target,K=X().contains(V)||T.contains(V);if(!(O.type==="mousemove"&&K)){var re=it().concat(T).map(function(te){var De,we=te._tippy,rn=(De=we.popperInstance)==null?void 0:De.state;return rn?{popperRect:te.getBoundingClientRect(),popperState:rn,props:t}:null}).filter(Boolean);jw(re,O)&&(Ie(),xt(O))}}function Qe(O){var V=Zt(O)||v.props.trigger.indexOf("click")>=0&&s;if(!V){if(v.props.interactive){v.hideWithInteractivity(O);return}xt(O)}}function Dn(O){v.props.trigger.indexOf("focusin")<0&&O.target!==X()||v.props.interactive&&O.relatedTarget&&T.contains(O.relatedTarget)||xt(O)}function Zt(O){return Ot.isTouch?q()!==O.type.indexOf("touch")>=0:!1}function zt(){en();var O=v.props,V=O.popperOptions,K=O.placement,re=O.offset,te=O.getReferenceClientRect,De=O.moveTransition,we=J()?Ca(T).arrow:null,rn=te?{getBoundingClientRect:te,contextElement:te.contextElement||X()}:n,Ai={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(or){var on=or.state;if(J()){var ls=ue(),Pr=ls.box;["placement","reference-hidden","escaped"].forEach(function(sr){sr==="placement"?Pr.setAttribute("data-placement",on.placement):on.attributes.popper["data-popper-"+sr]?Pr.setAttribute("data-"+sr,""):Pr.removeAttribute("data-"+sr)}),on.attributes.popper={}}}},St=[{name:"offset",options:{offset:re}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!De}},Ai];J()&&we&&St.push({name:"arrow",options:{element:we,padding:3}}),St.push.apply(St,(V==null?void 0:V.modifiers)||[]),v.popperInstance=Rw(rn,T,Object.assign({},V,{placement:K,onFirstUpdate:d,modifiers:St}))}function en(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function Ze(){var O=v.props.appendTo,V,K=X();v.props.interactive&&O===Td||O==="parent"?V=K.parentNode:V=Md(O,[K]),V.contains(T)||V.appendChild(T),v.state.isMounted=!0,zt()}function it(){return Vo(T.querySelectorAll("[data-tippy-root]"))}function tn(O){v.clearDelayTimeouts(),O&&pe("onTrigger",[v,O]),Xe();var V=oe(!0),K=W(),re=K[0],te=K[1];Ot.isTouch&&re==="hold"&&te&&(V=te),V?r=setTimeout(function(){v.show()},V):v.show()}function xt(O){if(v.clearDelayTimeouts(),pe("onUntrigger",[v,O]),!v.state.isVisible){gt();return}if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(O.type)>=0&&s)){var V=oe(!1);V?i=setTimeout(function(){v.state.isVisible&&v.hide()},V):o=requestAnimationFrame(function(){v.hide()})}}function nn(){v.state.isEnabled=!0}function Rn(){v.hide(),v.state.isEnabled=!1}function Pn(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function Ln(O){if(!v.state.isDestroyed){pe("onBeforeUpdate",[v,O]),rr();var V=v.props,K=uu(n,Object.assign({},V,su(O),{ignoreAttributes:!0}));v.props=K,Qt(),V.interactiveDebounce!==K.interactiveDebounce&&(Ie(),p=iu(ir,K.interactiveDebounce)),V.triggerTarget&&!K.triggerTarget?hr(V.triggerTarget).forEach(function(re){re.removeAttribute("aria-expanded")}):K.triggerTarget&&n.removeAttribute("aria-expanded"),rt(),ie(),L&&L(V,K),v.popperInstance&&(zt(),it().forEach(function(re){requestAnimationFrame(re._tippy.popperInstance.forceUpdate)})),pe("onAfterUpdate",[v,O])}}function Bn(O){v.setProps({content:O})}function Ei(){var O=v.state.isVisible,V=v.state.isDestroyed,K=!v.state.isEnabled,re=Ot.isTouch&&!v.props.touch,te=Vs(v.props.duration,0,vt.duration);if(!(O||V||K||re)&&!X().hasAttribute("disabled")&&(pe("onShow",[v],!1),v.props.onShow(v)!==!1)){if(v.state.isVisible=!0,J()&&(T.style.visibility="visible"),ie(),Xe(),v.state.isMounted||(T.style.transition="none"),J()){var De=ue(),we=De.box,rn=De.content;Ws([we,rn],0)}d=function(){var St;if(!(!v.state.isVisible||c)){if(c=!0,T.offsetHeight,T.style.transition=v.props.moveTransition,J()&&v.props.animation){var Rr=ue(),or=Rr.box,on=Rr.content;Ws([or,on],te),au([or,on],"visible")}He(),rt(),ou(Us,v),(St=v.popperInstance)==null||St.forceUpdate(),pe("onMount",[v]),v.props.animation&&J()&&yt(te,function(){v.state.isShown=!0,pe("onShown",[v])})}},Ze()}}function Ci(){var O=!v.state.isVisible,V=v.state.isDestroyed,K=!v.state.isEnabled,re=Vs(v.props.duration,1,vt.duration);if(!(O||V||K)&&(pe("onHide",[v],!1),v.props.onHide(v)!==!1)){if(v.state.isVisible=!1,v.state.isShown=!1,c=!1,s=!1,J()&&(T.style.visibility="hidden"),Ie(),gt(),ie(!0),J()){var te=ue(),De=te.box,we=te.content;v.props.animation&&(Ws([De,we],re),au([De,we],"hidden"))}He(),rt(),v.props.animation?J()&&Yt(re,v.unmount):v.unmount()}}function Ti(O){fe().addEventListener("mousemove",p),ou(Ui,p),p(O)}function Mi(){v.state.isVisible&&v.hide(),v.state.isMounted&&(en(),it().forEach(function(O){O._tippy.unmount()}),T.parentNode&&T.parentNode.removeChild(T),Us=Us.filter(function(O){return O!==v}),v.state.isMounted=!1,pe("onHidden",[v]))}function Oi(){v.state.isDestroyed||(v.clearDelayTimeouts(),v.unmount(),rr(),delete n._tippy,v.state.isDestroyed=!0,pe("onDestroy",[v]))}}function Si(n,e){e===void 0&&(e={});var t=vt.plugins.concat(e.plugins||[]);Kw();var r=Object.assign({},e,{plugins:t}),i=Vw(n),o=i.reduce(function(s,a){var l=a&&r1(a,r);return l&&s.push(l),s},[]);return ss(n)?o[0]:o}Si.defaultProps=vt;Si.setDefaultProps=Zw;Si.currentInput=Ot;Object.assign({},md,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});Si.setDefaultProps({render:Nd});class i1{constructor({editor:e,element:t,view:r,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:c,to:u})=>{const{doc:f,selection:d}=l,{empty:h}=d,p=!f.textBetween(c,u).length&&qa(l.selection),g=this.element.contains(document.activeElement);return!(!(a.hasFocus()||g)||h||p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||(a==null?void 0:a.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const c=!(l!=null&&l.selection.eq(a.state.selection)),u=!(l!=null&&l.doc.eq(a.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,c,u,l)},this.updateDelay))},this.updateHandler=(a,l,c,u)=>{var f,d,h;const{state:p,composing:g}=a,{selection:b}=p;if(g||!l&&!c)return;this.createTooltip();const{ranges:M}=b,D=Math.min(...M.map(T=>T.$from.pos)),v=Math.max(...M.map(T=>T.$to.pos));if(!((f=this.shouldShow)===null||f===void 0?void 0:f.call(this,{editor:this.editor,element:this.element,view:a,state:p,oldState:u,from:D,to:v}))){this.hide();return}(d=this.tippy)===null||d===void 0||d.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(Zf(p.selection)){let T=a.nodeDOM(D);if(T){const L=T.dataset.nodeViewWrapper?T:T.querySelector("[data-node-view-wrapper]");if(L&&(T=L.firstChild),T)return T.getBoundingClientRect()}}return Tb(a,D,v)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=Si(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:r}=e,i=r.selection.from!==r.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,t);return}const o=!(t!=null&&t.selection.eq(e.state.selection)),s=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,o,s,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const o1=n=>new Ce({key:typeof n.pluginKey=="string"?new je(n.pluginKey):n.pluginKey,view:e=>new i1({view:e,...n})}),s1=Be.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[o1({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});var a1=ve('<div class="wysiwyg"></div> <div class="wysiwyg-bubble-menu"></div>',1);function pl(n,e){Lt(e,!0);const[t,r]=Cn(),i=()=>Tn(e.content,"$content",t);let o,s,a;e.content&&e.content.subscribe(f=>{a!=null&&a.isEmpty&&(a==null||a.commands.setContent(f))}),Rh(()=>{const f=[r0.configure({heading:{levels:[1,2,3]}}),i0,M0,s1.configure({element:s}),O0.configure({placeholder:"Start typing"})],d={attributes:{class:"prose prose-sm sm:prose-base lg:prose-lg xl:prose-2xl m-5 focus:outline-none"}};a=new nv({element:o,extensions:f,editorProps:d,content:i(),onUpdate:({editor:h})=>{e.update&&e.update(h.getHTML())},onTransaction:()=>{a=a}})}),Ph(()=>{a&&a.destroy()});var l=a1(),c=Ir(l);El(c,f=>o=f,()=>o);var u=ge(c,2);El(u,f=>s=f,()=>s),he(n,l),Bt(),r()}var l1=ve('<article class="prose"><h1>Reflection</h1> <section><p>Lets start with&nbsp;a&nbsp;short reflection on&nbsp;your year:</p> <ul><li>Looking back at your past year, what did you like or appreciate?</li> <li>What would you like to have less of or do less of based on last year experiences.</li> <li>What excited you last year, or what was great about last year?</li> <li>What would you like to have more this year, based off last year?</li></ul></section> <section><h3>Activity</h3> <p>Reflect on&nbsp;your previous year and&nbsp;note some noteworthy events.</p> <!></section></article>');function c1(n,e){Lt(e,!1);const t=tr("reflection",""),r=a=>{t.set(a)};Nr();var i=l1(),o=ge(le(i),4),s=ge(le(o),4);pl(s,{content:t,update:r}),ne(o),ne(i),he(n,i),Bt()}var u1=ve('<article class="prose"><h1>Areas of Life</h1> <section><p>Think about the different roles you play in your life. Reflect on the following questions:</p> <ul><li>What areas of life do you focus on the most?</li> <li>Are there any areas of life not serving you?</li> <li>How are you spending most of your time?</li> <li>What activities take most of your days?</li> <li>Are there any activities you would like not to do?</li> <li>Any activities that might not be serving you now?</li></ul></section> <section><h3>Activity</h3> <p>Reflect on what you are spending most of your time right now.</p> <!></section></article>');function f1(n,e){Lt(e,!1);const t=tr("areas-of-life",""),r=a=>{t.set(a)};Nr();var i=u1(),o=ge(le(i),4),s=ge(le(o),4);pl(s,{content:t,update:r}),ne(o),ne(i),he(n,i),Bt()}const as=[{uid:"health-fitness",name:"Health and Fitness",description:"Nutrition & Diet, Exercise & Fitness, Overall Healthcare, Energy Management, Rest/Sleep Quality.",assessment:["Do you feel energized and physically strong in your daily activities?","Are you consistent in exercising and maintaining a healthy diet?","Have you prioritized regular health checkups and preventive care?","Are you getting enough rest and sleep to support your bodys needs?","Are there any physical discomforts or symptoms youve been ignoring?"],sample_statements:["I feel vibrant and energetic, fueled by a balanced diet and regular exercise.","My body is strong and flexible, supporting me in all of lifes activities.","I maintain a healthy weight and feel confident in my appearance.","I prioritize preventative healthcare and consistently make choices that nurture my body.","I wake up each day feeling well-rested, ready to take on challenges with enthusiasm."],prompt_questions:["How do you see yourself being at your optimal health and vitality?","What habits could you adopt to enhance your physical well-being?","What motivates you to prioritize your health?","How can you improve your nutrition?","What activities make you feel energized and alive?","What physical goals (e.g., running a marathon, hiking a mountain) excite you the most?","If you could change one thing about your health or lifestyle, what would it be?","How would you feel waking up every morning with vibrant energy and strength?","What new activity or sport would you love to try to challenge your body?"]},{uid:"emotional-well-being",name:"Emotional Well-Being",description:"Stress Management, Emotional Resilience, Self-Care Practices, Coping with Anxiety/Depression, Therapy & Mental Wellness Resources.",assessment:["How often do you feel overwhelmed, stressed, or emotionally drained?","Are you regularly practicing self-care or stress-management techniques?","How well are you coping with challenges or setbacks in your life?","Do you have someone to talk to about your emotions or struggles?","What habits or practices could help you improve your emotional well-being?"],sample_statements:["I navigate stress with calm and clarity, maintaining peace of mind in all situations.","I prioritize self-care, setting boundaries that protect my emotional well-being.","I build resilience, bouncing back quickly from setbacks with a positive attitude.","I embrace vulnerability and authenticity, fostering deeper connections with others.","I invest in mental wellness practices, feeling balanced and optimistic."],prompt_questions:["How would your life change if you experienced daily peace of mind and emotional resilience?","What practices or habits would make you feel consistently balanced and centered?","What could you achieve if stress or fear no longer held you back?","How would you describe your ideal emotional state in a difficult situation?","What does a day filled with joy, gratitude, and calmness look like to you?"]},{uid:"purpose-spirituality",name:"Purpose and Spirituality",description:"Mindfulness Practices (Meditation, Journaling), Religious/Spiritual Life, Seeking Purpose & Meaning, Legacy & Contribution to the World, Gratitude Practices.",assessment:["Do you feel aligned with your values and life purpose?","How often do you engage in practices like meditation or prayer that nurture your spirituality?","Are you making a positive impact on others or contributing to something greater?","Do you feel a sense of gratitude and inner peace in your daily life?","Are there areas in your life where you feel disconnected or lacking meaning?"],sample_statements:["I feel deeply connected to my spirituality, aligning my actions with my values.","I find purpose and meaning in my life, contributing to something greater than myself.","I practice mindfulness daily, cultivating inner peace and clarity.","I leave a lasting legacy, positively impacting the lives of those around me.","I live with gratitude, appreciating lifes blessings and challenges"],prompt_questions:["What would a deeply fulfilling and spiritually connected life look like for you?","How can you align your daily actions more closely with your core values and beliefs?","If you could make one contribution to the world, what would it be?","What brings you the most peace, and how can you experience more of it?","What would your life look like if you fully lived in alignment with your purpose?"]},{uid:"relationships-social-connection",name:"Relationships and Social Connection",description:"Romantic Relationships (Marriage/Partnership), Work-Life Balance for Moms/Parents, Raising Children, Supporting Teenagers, Friendships & Social Circles, Building Community Connections, Networking for Social and Professional Goals.",assessment:["Do you feel connected and supported by the people in your life?","How often do you communicate openly and meaningfully with your partner, family, or friends?","Are you dedicating enough time to nurture your relationships?","Do you feel comfortable asking for help or offering support to others?","Are there any relationships in your life that feel draining or need resolution?"],sample_statements:["I nurture a loving and passionate relationship with my partner, filled with trust and joy.","I create lasting memories with my children, guiding them with patience and wisdom.","I am surrounded by a supportive and inspiring circle of friends.","I build strong professional networks, connecting with like-minded individuals who uplift and challenge me.","I deepen my relationships by listening, communicating, and showing appreciation daily."],prompt_questions:["What would your ideal relationship with your partner, family, or friends look like?","How would you like to show up for the people you care about the most?","What kind of connections or relationships would make you feel truly fulfilled?","Imagine hosting a gathering with your closest loved oneswhat would it look and feel like?","How can you bring more love, fun, and authenticity into your relationships?"]},{uid:"family-parenting",name:"Family and Parenting",description:"Household management, self- care for busy parents, creating a healthy family environment, bonding time with children, supporting kids, teaching life skills.",assessment:["Are you spending enough quality time with your family?","Are there specific ways you could better support your partner in parenting?","What is one thing you can do this week to strengthen your family bond?","How well/ How often do you communicate with your children?","What is one habit you could improve to better connect with your kids?"],sample_statements:["I create a nurturing and joyful environment for my family.","I raise confident and compassionate children.","I build meaningful family traditions that strengthen our bonds.","I communicate openly and respectfully with my partner.","I support my childrens education and growth, encouraging their unique talents.","I foster emotional intelligence in my children, helping them navigate challenges."],prompt_questions:["What traditions or rituals would you like to create with your family?","How would you like to strengthen your bond with each family member?","How can you create a family environment that fosters love and growth?","What does a perfect day look like for your family?","How can you support your partner and children in achieving their dreams?"]},{uid:"personal-growth-education",name:"Personal Growth and Education",description:"Lifelong Learning & Skill Development, Pursuing Personal Goals & Dreams, Emotional Intelligence Development, Overcoming Limiting Beliefs, Building Confidence & Self-Esteem, Education & Certification.",assessment:["Have you set clear goals for your personal development?","How often do you invest time in learning new skills or gaining knowledge?","Are you actively challenging yourself to step out of your comfort zone?","Do you feel like youre making meaningful progress toward becoming your best self?","What limiting beliefs or fears might be holding you back?"],sample_statements:["I am constantly learning, reading, and acquiring new skills that enrich my life and career.","I set and achieve personal goals that align with my passions and purpose.","I overcome fears and limiting beliefs, stepping into my fullest potential.","I approach life with curiosity, embracing challenges as opportunities to grow.","I cultivate self-awareness, understanding my strengths and areas for improvement."],prompt_questions:["What is one personal challenge or fear youd love to conquer, and how would it feel to overcome it?","What skills or knowledge do you dream of mastering, and how could they transform your life?","How would your life look if you became the best version of yourself?","What inspires you to grow, and how can you bring more of that into your life?","If you had unlimited time and resources, what would you dedicate yourself to learning or improving?"]},{uid:"fun-recreation",name:"Fun and Recreation",description:"Hobbies & Creative Expression, Travel & Adventure, Relaxation & Leisure Activities, Family Fun & Bonding Activities, cultivating Joy and Playfulness.",assessment:["How often do you engage in activities that bring you joy or relaxation?","Are you making time for hobbies or creative pursuits that you enjoy?","Do you feel balanced between work and play in your life?","When was the last time you explored something new or adventurous?","Are there opportunities to incorporate more fun or spontaneity into your routine?"],sample_statements:["I regularly engage in hobbies that bring me joy and allow my creativity to flourish.","I explore the world through travel, immersing myself in new cultures and experiences.","I make time for laughter, play, and relaxation with family and friends.","I express myself creatively through art, music, writing, or other forms of self-expression.","I embrace spontaneity and adventure, adding excitement to my routine."],prompt_questions:["What is one adventure or experience youve always wanted to try but havent yet?","If you had a full day to dedicate to fun and creativity, what would you do?","How can you bring more joy and playfulness into your daily routine?","What creative projects or hobbies would you pursue if there were no limitations?","If your life were a highlight reel of fun and excitement, what would it include?"]},{uid:"physical-environment",name:"Physical Environment",description:"Creating a Comfortable Home, Organizing & Decluttering Spaces, Living in Alignment with Nature (Sustainability), Creating a Productivity-Enhancing Workspace.",assessment:["Do you feel comfortable and inspired in your home or workspace?","How organized is your living and working space? Are there areas that need attention?","Does your environment support your goals, productivity, and well-being?","Are there any changes you could make to improve the functionality or aesthetics of your space?","How well does your physical environment align with your values, such as sustainability?"],sample_statements:["I create a home that feels peaceful, organized, and welcoming.","I design a workspace that inspires focus, creativity, and productivity.","I maintain a clutter-free environment that supports my mental clarity.","I live in harmony with nature, adopting sustainable and eco-friendly practices.","I personalize my spaces to reflect my style, values, and goals."],prompt_questions:["What does your ideal home or workspace look and feel like?","How can you transform your environment to inspire creativity and productivity?","What changes would make your home a sanctuary of peace and relaxation?","How can you make your physical space align better with your values and lifestyle?","What is one thing you can add or remove from your environment to bring more joy?"]},{uid:"community-contribution",name:"Community and Contribution",description:"Volunteering & Giving Back, Making a Positive Community Impact, Advocacy and Supporting Social Causes.",assessment:["Are you actively involved in your community or contributing to causes you care about?","Do you feel connected to the people and organizations around you?","How often do you volunteer or use your skills to help others?","What positive impact have you made in your community recently?","Are there new opportunities for you to contribute or give back in meaningful ways?"],sample_statements:["I actively contribute to causes I care about, making a meaningful impact.","I volunteer regularly, giving my time and skills to support others.","I foster a sense of belonging by building connections in my community.","I mentor and support others, sharing my experiences to help them grow.","I advocate for social causes, using my voice and resources to drive positive change."],prompt_questions:["What kind of impact do you dream of making in your community?","How can you use your unique talents to help others?","What causes or issues are you most passionate about supporting?","If you were a role model in your community, what would you want to be known for?","What legacy do you want to leave through your contributions to others?"]},{uid:"career-work",name:"Career and Work",description:"Career/Work Advancement, Side Hustles/Passion Projects, Leadership/Team Dynamics, Professional Networking, Productivity & Time Management, Innovation & Creative Problem-Solving.",assessment:["Do you feel fulfilled and motivated in your current role or career path? Why or why not?","Are you taking consistent steps to improve your skills or advance your professional goals?","How well do you balance the demands of your work with your personal well-being?","How strong are your professional relationships or networks, and are you nurturing them effectively?","What obstacles or challenges are preventing you from reaching your full potential at work?"],sample_statements:["I am leading a successful team, inspiring innovation and driving results in my industry.","I enjoy my job and continuously contribute to my team.","I am continuously learning and expanding my skill set to stay ahead in my field.","I balance a thriving career with a fulfilling personal life, feeling energized and accomplished.","I am recognized as a thought leader, contributing to my field and mentoring others."],prompt_questions:["If you could design your dream job, what would that look like?","What legacy do you want to leave in your industry or profession?","How would you like to feel at the end of each workday?","What professional challenge or goal excites you the most right now?","If success was guaranteed, what bold career move would you make today?"]},{uid:"entrepreneurship-business",name:"Entrepreneurship and Business",description:"Business Strategy & Scaling, Balancing Work and Family Life, Innovation and Idea Generation, Networking & Brand Building.",assessment:["Do you have a clear vision and strategy for your businesss future?","How effectively are you managing your time and delegating tasks?","Are you regularly seeking feedback and learning from your mistakes?","How well are you balancing your entrepreneurial goals with your personal life?","What new opportunities or innovations could you explore to grow your business?"],sample_statements:["I have built a successful business that provides financial freedom.","I embrace innovation, constantly creating new opportunities for growth.","I lead with integrity, inspiring my team to achieve shared goals.","I balance entrepreneurship with personal time, avoiding burnout and staying motivated.","I make a positive impact in my industry and community through my business ventures."],prompt_questions:["What would your dream business look like if resources and time were unlimited?","How do you envision impacting your industry or community through your business?","What motivates you most about your business, and how can you build on that?","If you achieved everything you wanted in your business, what would your life look like?","What bold or innovative ideas are you excited to bring to life in your business?"]},{uid:"finances",name:"Finances",description:"Financial Stability & Wealth Building, Budgeting & Financial Planning, Saving & Investing, Debt Management, Wealth creation.",assessment:["Do you have a clear understanding of your financial situation, including savings, debt, and expenses?","Are you consistently sticking to a budget or financial plan?","How confident do you feel about handling unexpected expenses or emergencies?","Are you making progress toward your long-term financial goals, such as savings or investments?","How comfortable are you addressing or discussing your financial concerns?"],sample_statements:["I have achieved financial independence, allowing me to pursue my passions freely.","I save and invest wisely, ensuring long-term stability and generational wealth.","I live debt-free, with a clear and confident understanding of my financial goals.","I manage my finances effortlessly, enjoying both security and occasional indulgences"],prompt_questions:["What does financial freedom mean to you, and how would your life change if you achieved it?","If money werent a concern, what passions or causes would you pursue?","What would it look like to have complete control and confidence over your financial future?","How would you use wealth to create meaningful experiences for yourself and others?","Imagine your ideal financial situation five years from nowwhat does it include?"]}];var d1=ve('<li><input type="checkbox" name="selected-areas"> <label class="font-bold"> </label> <div> </div></li>'),h1=ve(`<article class="prose"><h1>Select your Life Areas</h1> <section><p>After your previous reflection, lets now select your own areas of life.</p> <p>Below are some examples of the most common areas of life people choose from. Most people usually pick between 4 to 8 areas of
            life.</p> <p>You do not need to select all these areas; start small and then you can expand to other areas.</p> <ul></ul></section></article>`);function p1(n,e){Lt(e,!1);const[t,r]=Cn(),i=()=>Tn(s,"$selectedAreas",t),o=[],s=tr("selected-areas",[]);Nr();var a=h1(),l=ge(le(a),2),c=ge(le(l),6);bn(c,5,()=>as,yn,(u,f,d)=>{var h=d1(),p=le(h);$h(p);var g;ii(p,"id",`area-${d??""}`);var b=ge(p,2);ii(b,"for",`area-${d??""}`);var k=le(b,!0);ne(b);var M=ge(b,2),D=le(M,!0);ne(M),ne(h),qt(()=>{g!==(g=me(f).uid)&&(p.value=(p.__value=me(f).uid)==null?"":me(f).uid),Kt(k,me(f).name),Kt(D,me(f).description)}),jh(o,[],p,()=>(me(f).uid,i()),v=>Nh(s,v)),he(u,h)}),ne(c),ne(l),ne(a),he(n,a),Bt(),r()}var m1=ve("<li> </li>"),g1=ve('<section class="card bg-neutral-100"><h4 class="mt-0"> </h4> <ul></ul></section>'),y1=ve(`<article class="prose"><h1>Self Assessment</h1> <section><p>Being aware of your current state is crucial for tracking progress.
            Soon you will do a self-assessment of the areas you have chosen for your life.
            The table below contains questions for that would prompt some of your thinking to help you on an initial reflection.</p></section> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div> <section><h3>Activity</h3> <p>Write down your areas and score them from 1 to 10, where 10 is the highest and 1 is lowest.</p></section></article>`);function b1(n,e){Lt(e,!1);const[t,r]=Cn(),i=()=>Tn(o,"$selectedAreas",t),o=tr("selected-areas",[]);function s(c){return i().includes(c.uid)}Nr();var a=y1(),l=ge(le(a),4);bn(l,5,()=>as,yn,(c,u)=>{var f=Ta(),d=Ir(f);{var h=p=>{var g=g1(),b=le(g),k=le(b,!0);ne(b);var M=ge(b,2);bn(M,5,()=>me(u).assessment,yn,(D,v)=>{var S=m1(),T=le(S,!0);ne(S),qt(()=>Kt(T,me(v))),he(D,S)}),ne(M),ne(g),qt(()=>Kt(k,me(u).name)),he(p,g)};ri(d,p=>{s(me(u))&&p(h)})}he(c,f)}),ne(l),Mh(2),ne(a),he(n,a),Bt(),r()}var v1=ve("<li> </li>"),w1=ve('<section class="card bg-neutral-100"><h4 class="mt-0"> </h4> <ul></ul></section>'),k1=ve(`<article class="prose"><h1>Vision</h1> <section><p>The&nbsp;next step would be&nbsp;for&nbsp;you to&nbsp;create a&nbsp;vision for&nbsp;what you want in&nbsp;each area of&nbsp;your
            life. This should be&nbsp;something that inspires you.
            In&nbsp;the&nbsp;grid below you will see some examples of&nbsp;peoples vision statements to&nbsp;spark your creativity.
            You&nbsp;can use them and&nbsp;edit them to&nbsp;make them fit to&nbsp;your own areas.</p></section> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></article>`);function x1(n,e){Lt(e,!1);const[t,r]=Cn(),i=()=>Tn(o,"$selectedAreas",t),o=tr("selected-areas",[]);function s(c){return i().includes(c.uid)}Nr();var a=k1(),l=ge(le(a),4);bn(l,5,()=>as,yn,(c,u)=>{var f=Ta(),d=Ir(f);{var h=p=>{var g=w1(),b=le(g),k=le(b,!0);ne(b);var M=ge(b,2);bn(M,5,()=>me(u).sample_statements,yn,(D,v)=>{var S=v1(),T=le(S,!0);ne(S),qt(()=>Kt(T,me(v))),he(D,S)}),ne(M),ne(g),qt(()=>Kt(k,me(u).name)),he(p,g)};ri(d,p=>{s(me(u))&&p(h)})}he(c,f)}),ne(l),ne(a),he(n,a),Bt(),r()}var S1=ve("<li> </li>"),E1=ve("<li> </li>"),C1=ve('<section><h3> </h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div class="card bg-neutral-100"><h4 class="mt-0">Questions</h4> <ul></ul></div> <div class="card bg-neutral-100"><h4 class="mt-0">Examples</h4> <ul></ul></div></div> <!></section>'),T1=ve('<article class="prose"><h1>Create Your Vision</h1> <p>Define a vision for each one of your areas.</p> <!></article>');function M1(n,e){Lt(e,!1);const[t,r]=Cn(),i=()=>Tn(o,"$selectedAreas",t),o=tr("selected-areas",[]);function s(c){return i().includes(c.uid)}Nr();var a=T1(),l=ge(le(a),4);bn(l,1,()=>as,yn,(c,u)=>{var f=Ta(),d=Ir(f);{var h=p=>{var g=C1(),b=le(g),k=le(b,!0);ne(b);var M=ge(b,2),D=le(M),v=ge(le(D),2);bn(v,5,()=>me(u).prompt_questions,yn,(F,_)=>{var W=S1(),q=le(W,!0);ne(W),qt(()=>Kt(q,me(_))),he(F,W)}),ne(v),ne(D);var S=ge(D,2),T=ge(le(S),2);bn(T,5,()=>me(u).sample_statements,yn,(F,_)=>{var W=E1(),q=le(W,!0);ne(W),qt(()=>Kt(q,me(_))),he(F,W)}),ne(T),ne(S),ne(M);var L=ge(M,2);pl(L,{}),ne(g),qt(()=>Kt(k,me(u).name)),he(p,g)};ri(d,p=>{s(me(u))&&p(h)})}he(c,f)}),ne(a),he(n,a),Bt(),r()}var O1=ve(`<article class="prose"><h1>Goal Setting and Action Plans</h1> <section><p>Congratulations, you have already created a&nbsp;vision for&nbsp;your areas of&nbsp;life.
            With&nbsp;a&nbsp;vision in&nbsp;place, you can now set goals for&nbsp;different areas of&nbsp;your life.
            Establish clear and&nbsp;achievable goals,
            then break them down into&nbsp;quarterly milestones to&nbsp;track your progress effectively.</p> <p>Below is&nbsp;an&nbsp;example of&nbsp;a&nbsp;yearly goal plan with&nbsp;quarterly milestones.
            This example may help you in&nbsp;establishing your own goals and&nbsp;milestones.</p></section> <section class="grid grid-cols-1 md:grid-cols-2 gap-2"><header class="card bg-zinc-100 !p-2 col-span-2 font-bold text-center">Health and Fitness</header> <div class="card bg-blue-100 col-span-2"><h4 class="m-0">Big 3 Annual Goals</h4> <ul class="m-0"><li>Maintain a healthy weight and visible muscle tone throughout the year. 15% BF Dexa Scans.</li> <li>Run three races (e.g., 5K or 10K) injury-free throughout the year.</li> <li>Adopt and sustain a clean and balanced nutrition plan- Mostly Paleo and Meet Daily protein.</li></ul></div> <div class="card bg-green-100"><h4 class="m-0">Q1 Key Milestones</h4> <ul class="m-0"><li>Baseline Dexa scans and Initial doctor visits, Progress photos</li> <li>Start running program focusing on Endurance</li> <li>Consistently start tracking food intake, track Macros</li></ul></div> <div class="card bg-yellow-100"><h4 class="m-0">Q2 Key Milestones</h4> <ul class="m-0"><li>Try out HIIT Cardio. Dexa Scan - 2%.</li> <li>Schedule Race for this quarter (5k)</li> <li>Refine Meal plan- Focus on whole foods</li></ul></div> <div class="card bg-red-100"><h4 class="m-0">Q3 Key Milestones</h4> <ul class="m-0"><li>Integrate yoga/Pilates to improve core strength and flexibility.</li> <li>Train for longer races or incorporate trail runs</li> <li>Continue to monitor Macros.</li></ul></div> <div class="card bg-purple-100"><h4 class="m-0">Q4 Key milestones</h4> <ul class="m-0"><li>Final Race. Plan for recovery/maintenance program</li> <li>Dexa Scan - 3%. Progress photos</li> <li>Experiment new recipes. Mindful eating</li></ul></div> <div class="card !p-2 col-span-2 font-bold text-center">Gauge for Success</div> <div class="card bg-lime-100"><h4 class="m-0">Overall Self-Scoring</h4> <ul class="m-0"><li>Score 0: Poorly eating, no muscle tone, low energy.</li> <li>Score 10: Visible muscle tone, running without injuries, free of major illness, nutrition mostly optimal.</li></ul></div> <div class="card bg-pink-100"><h4 class="m-0">Metrics</h4> <ul class="m-0"><li>Running logs; number of races completed.</li> <li>Food tracking; water intake.</li> <li>Dexa scans every month or quarter.</li> <li>Regular health check ups</li></ul></div></section></article>`);function A1(n){var e=O1();he(n,e)}var N1=ve("<!> <form><!> <!></form>",1);function I1(n,e){Lt(e,!0);const[t,r]=Cn(),i=()=>Tn(s,"$currentStep",t),o=[c1,f1,p1,b1,x1,M1,A1],s=tr("current-step",1);let a=Oh(()=>o[i()-1]);function l(p){p>=1&&p<=o.length&&s.set(p)}var c=N1(),u=Ir(c);tp(u,{steps:o,currentStep:s});var f=ge(u,2),d=le(f);Ih(d,()=>me(a),(p,g)=>{g(p,{})});var h=ge(d,2);Zh(h,{steps:o,currentStep:s,navigate:l}),ne(f),he(n,c),Bt(),r()}var D1=ve("<header>Laife Planner Workshop</header> <!>",1);function H1(n){var e=D1(),t=ge(Ir(e),2);I1(t,{}),he(n,e)}export{H1 as component};
